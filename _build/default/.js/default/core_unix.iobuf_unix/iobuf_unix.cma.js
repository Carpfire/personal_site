// Generated by js_of_ocaml
//# buildInfo:effects=false, kind=cma, use-js-string=true, version=5.6.0

//# unitInfo: Provides: Iobuf_unix
//# unitInfo: Requires: Bigstring_unix, Core, Core__Array, Core__Bigstring, Core__Char, Core__Or_error, Core__Ordered_collection_common, Core__Queue, Core_unix, Core_unix__File_descr, Iobuf, Ppx_bench_lib__Benchmark_accumulator, Ppx_expect_runtime, Ppx_inline_test_lib, Ppx_module_timer_runtime, Sexplib0__Sexp_conv, Stdlib
(function
  (globalThis){
   "use strict";
   var
    runtime = globalThis.jsoo_runtime,
    cst_Iobuf_unix$0 = "Iobuf_unix",
    cst = "_",
    cst_iobuf_unix$0 = "iobuf_unix",
    caml_maybe_attach_backtrace = runtime.caml_maybe_attach_backtrace,
    caml_wrap_exception = runtime.caml_wrap_exception;
   function caml_call1(f, a0){
    return (f.l >= 0 ? f.l : f.l = f.length) == 1
            ? f(a0)
            : runtime.caml_call_gen(f, [a0]);
   }
   function caml_call2(f, a0, a1){
    return (f.l >= 0 ? f.l : f.l = f.length) == 2
            ? f(a0, a1)
            : runtime.caml_call_gen(f, [a0, a1]);
   }
   function caml_call3(f, a0, a1, a2){
    return (f.l >= 0 ? f.l : f.l = f.length) == 3
            ? f(a0, a1, a2)
            : runtime.caml_call_gen(f, [a0, a1, a2]);
   }
   function caml_call4(f, a0, a1, a2, a3){
    return (f.l >= 0 ? f.l : f.l = f.length) == 4
            ? f(a0, a1, a2, a3)
            : runtime.caml_call_gen(f, [a0, a1, a2, a3]);
   }
   function caml_call5(f, a0, a1, a2, a3, a4){
    return (f.l >= 0 ? f.l : f.l = f.length) == 5
            ? f(a0, a1, a2, a3, a4)
            : runtime.caml_call_gen(f, [a0, a1, a2, a3, a4]);
   }
   var
    global_data = runtime.caml_get_global_data(),
    Core = global_data.Core,
    Iobuf = global_data.Iobuf,
    Core_Queue = global_data.Core__Queue,
    Core_Bigstring = global_data.Core__Bigstring,
    Core_Char = global_data.Core__Char,
    Core_Ordered_collection_common =
      global_data.Core__Ordered_collection_common,
    Core_unix = global_data.Core_unix,
    Bigstring_unix = global_data.Bigstring_unix,
    Core_Array = global_data.Core__Array,
    Sexplib0_Sexp_conv = global_data.Sexplib0__Sexp_conv,
    Stdlib = global_data.Stdlib,
    Ppx_module_timer_runtime = global_data.Ppx_module_timer_runtime,
    Ppx_bench_lib_Benchmark_accumu =
      global_data.Ppx_bench_lib__Benchmark_accumulator,
    Ppx_expect_runtime = global_data.Ppx_expect_runtime,
    Ppx_inline_test_lib = global_data.Ppx_inline_test_lib,
    Core_unix_File_descr = global_data.Core_unix__File_descr,
    Core_Or_error = global_data.Core__Or_error;
   caml_call1(Ppx_module_timer_runtime[4], cst_Iobuf_unix$0);
   caml_call1(Ppx_bench_lib_Benchmark_accumu[1][1], cst_iobuf_unix$0);
   caml_call1(Ppx_expect_runtime[1][1], "iobuf_unix/src/iobuf_unix.ml");
   caml_call2(Ppx_inline_test_lib[6], cst_iobuf_unix$0, "iobuf_unix.ml");
   var
    compare_ok_or_eof = runtime.caml_int_compare,
    _d_ = [0, cst],
    _c_ = [0, cst],
    cst_Recvmmsg_context_create_al =
      "Recvmmsg_context.create: all buffers must be reset",
    _a_ = [0, "Eof"],
    _b_ = [0, "Ok"],
    cst_Iobuf_recvmmsg_assume_fd_i = "Iobuf.recvmmsg_assume_fd_is_nonblocking",
    cst_iobuf_unix = cst_iobuf_unix$0,
    cst_Iobuf_unix = cst_Iobuf_unix$0;
   function sexp_of_ok_or_eof(param){return param ? _a_ : _b_;}
   function input(t, ch){
    try{
     var
      _ac_ = caml_call1(Iobuf[78][1], t),
      _ad_ = [0, caml_call1(Iobuf[29], t)],
      _ae_ = [0, caml_call1(Iobuf[78][4], t)],
      n$0 = caml_call5(Bigstring_unix[135], 0, ch, _ae_, _ad_, _ac_);
    }
    catch(exn$0){
     var exn = caml_wrap_exception(exn$0);
     if(exn[1] === Bigstring_unix[125] && exn[3] === Stdlib[12]){var n = exn[2]; caml_call2(Iobuf[40], t, n); return 1;}
     throw caml_maybe_attach_backtrace(exn, 0);
    }
    caml_call2(Iobuf[40], t, n$0);
    return 0;
   }
   function read(t, fd){
    try{
     var
      _$_ = caml_call1(Iobuf[78][1], t),
      _aa_ = [0, caml_call1(Iobuf[29], t)],
      _ab_ = [0, caml_call1(Iobuf[78][4], t)],
      n$0 = caml_call5(Bigstring_unix[126], 0, fd, _ab_, _aa_, _$_);
    }
    catch(exn$0){
     var exn = caml_wrap_exception(exn$0);
     if(exn[1] === Bigstring_unix[125] && exn[3] === Stdlib[12]){var n = exn[2]; caml_call2(Iobuf[40], t, n); return 1;}
     throw caml_maybe_attach_backtrace(exn, 0);
    }
    caml_call2(Iobuf[40], t, n$0);
    return 0;
   }
   function read_assume_fd_is_nonblocking(t, fd){
    var
     _X_ = caml_call1(Iobuf[78][1], t),
     _Y_ = [0, caml_call1(Iobuf[29], t)],
     _Z_ = [0, caml_call1(Iobuf[78][4], t)],
     nread = caml_call4(Bigstring_unix[131], fd, _Z_, _Y_, _X_);
    if(caml_call1(Core_unix[5][2][6], nread)){
     var ___ = caml_call1(Core_unix[5][2][9], nread);
     caml_call2(Iobuf[40], t, ___);
    }
    return caml_call1(Core_unix[5][10], nread);
   }
   function pread_assume_fd_is_nonblocking(t, fd, offset){
    var
     _U_ = caml_call1(Iobuf[78][1], t),
     _V_ = [0, caml_call1(Iobuf[29], t)],
     _W_ = [0, caml_call1(Iobuf[78][4], t)],
     nread = caml_call5(Bigstring_unix[134], fd, offset, _W_, _V_, _U_);
    return caml_call2(Iobuf[40], t, nread);
   }
   function recvfrom_assume_fd_is_nonblock(t, fd){
    var
     _R_ = caml_call1(Iobuf[78][1], t),
     _S_ = [0, caml_call1(Iobuf[29], t)],
     _T_ = [0, caml_call1(Iobuf[78][4], t)],
     match = caml_call4(Bigstring_unix[130], fd, _T_, _S_, _R_),
     sockaddr = match[2],
     nread = match[1];
    caml_call2(Iobuf[40], t, nread);
    return sockaddr;
   }
   function create(iobufs){
    function _G_(t){
     var _P_ = caml_call1(Iobuf[28], t), _Q_ = caml_call1(Iobuf[29], t);
     return caml_call2(Core[90], _Q_, _P_);
    }
    if(caml_call2(Core_Array[40], iobufs, _G_))
     var _N_ = runtime.iobuf_recvmmsg_ctx(iobufs);
    else
     var
      _H_ = 0,
      _I_ = function(param){return _c_;},
      _J_ = function(param){return _d_;},
      _K_ = caml_call2(Iobuf[4], _J_, _I_),
      _L_ = [0, caml_call2(Core[301], _K_, iobufs), _H_],
      _M_ =
        [1,
         [0,
          caml_call1(Sexplib0_Sexp_conv[7], cst_Recvmmsg_context_create_al),
          _L_]],
      _N_ = caml_call1(Core[261], _M_);
    function _O_(buf){return caml_call1(Iobuf[78][1], buf);}
    return [0, iobufs, caml_call2(Core_Array[27], iobufs, _O_), _N_];
   }
   function recvmmsg_assume_fd_is_nonblock(fd, param){
    var ctx = param[3], iobufs = param[1];
    return runtime.iobuf_recvmmsg_assume_fd_is_nonblocking_stub
            (fd, iobufs, ctx);
   }
   var
    fd = caml_call1(Core_unix_File_descr[13], -1),
    _e_ = recvmmsg_assume_fd_is_nonblock(fd, create([0])),
    match = caml_call1(Core_unix[5][2][8], _e_);
   a:
   {
    if(1 === match[0]){
     var _f_ = match[1];
     if(typeof _f_ === "number" && 25 === _f_){
      var
       recvmmsg_assume_fd_is_nonblock$0 =
         caml_call1(Core_Or_error[52], cst_Iobuf_recvmmsg_assume_fd_i);
      break a;
     }
    }
    var
     recvmmsg_assume_fd_is_nonblock$0 = [0, recvmmsg_assume_fd_is_nonblock];
   }
   function unsafe_sent(t, result){
    if(! caml_call1(Core_unix[5][2][6], result))
     return caml_call1(Core_unix[5][2][11], result);
    var _F_ = caml_call1(Core_unix[5][2][9], result);
    caml_call2(Iobuf[40], t, _F_);
    return Core_unix[5][6];
   }
   function send_nonblocking_no_sigpipe(param){
    var e = Bigstring_unix[139];
    if(0 !== e[0]) return e;
    var send = e[1];
    return [0,
            function(t, fd){
             var
              _D_ = caml_call1(Iobuf[78][1], t),
              _E_ = [0, caml_call1(Iobuf[29], t)];
             return unsafe_sent
                     (t,
                      caml_call4
                       (send, fd, [0, caml_call1(Iobuf[78][4], t)], _E_, _D_));
            }];
   }
   function sendto_nonblocking_no_sigpipe(param){
    var e = Bigstring_unix[140];
    if(0 !== e[0]) return e;
    var sendto = e[1];
    return [0,
            function(t, fd, addr){
             var
              _B_ = caml_call1(Iobuf[78][1], t),
              _C_ = [0, caml_call1(Iobuf[29], t)];
             return unsafe_sent
                     (t,
                      caml_call5
                       (sendto,
                        fd,
                        [0, caml_call1(Iobuf[78][4], t)],
                        _C_,
                        _B_,
                        addr));
            }];
   }
   function output(t, ch){
    var
     _y_ = caml_call1(Iobuf[78][1], t),
     _z_ = [0, caml_call1(Iobuf[29], t)],
     _A_ = [0, caml_call1(Iobuf[78][4], t)];
    return caml_call5(Bigstring_unix[149], 0, ch, _A_, _z_, _y_);
   }
   function write(t, fd){
    var
     _v_ = caml_call1(Iobuf[78][1], t),
     _w_ = [0, caml_call1(Iobuf[29], t)],
     _x_ = [0, caml_call1(Iobuf[78][4], t)];
    return caml_call4(Bigstring_unix[141], fd, _x_, _w_, _v_);
   }
   function write_assume_fd_is_nonblocking(t, fd){
    var _t_ = caml_call1(Iobuf[78][1], t), _u_ = caml_call1(Iobuf[29], t);
    return runtime.bigstring_write_assume_fd_is_nonblocking_stub
            (fd, caml_call1(Iobuf[78][4], t), _u_, _t_);
   }
   var Peek = [0, output, write, write_assume_fd_is_nonblocking];
   function output$0(t, ch){
    var nwritten = caml_call2(Peek[1], t, ch);
    return caml_call2(Iobuf[40], t, nwritten);
   }
   function write$0(t, fd){
    var nwritten = caml_call2(Peek[2], t, fd);
    return caml_call2(Iobuf[40], t, nwritten);
   }
   function write_assume_fd_is_nonblocking$0(t, fd){
    var nwritten = caml_call2(Peek[3], t, fd);
    return caml_call2(Iobuf[40], t, nwritten);
   }
   function pwrite_assume_fd_is_nonblockin(t, fd, offset){
    var
     _q_ = caml_call1(Iobuf[78][1], t),
     _r_ = [0, caml_call1(Iobuf[29], t)],
     _s_ = [0, caml_call1(Iobuf[78][4], t)],
     nwritten = caml_call5(Bigstring_unix[142], fd, offset, _s_, _r_, _q_);
    return caml_call2(Iobuf[40], t, nwritten);
   }
   function fillf_float(t, c_format, value){
    var
     limit = caml_call1(Iobuf[29], t),
     result =
       runtime.iobuf_unsafe_pokef_double_bytecode
        (t, c_format, caml_call1(Iobuf[29], t), value);
    return caml_call2(Core[88], result, limit)
            ? -312493282
            : caml_call2
               (Core[92], result, 0)
              ? 1067692448
              : (caml_call2(Iobuf[40], t, result), 17724);
   }
   function to_iovec_shared(pos, len, t){
    var
     _n_ = caml_call1(Iobuf[29], t),
     match = caml_call4(Core_Ordered_collection_common[1], pos, len, 0, _n_),
     len$0 = match[2],
     pos$0 = match[1],
     _o_ = caml_call1(Iobuf[78][1], t),
     _p_ = [0, caml_call1(Iobuf[78][4], t) + pos$0 | 0];
    return caml_call3(Core_unix[276][7], _p_, [0, len$0], _o_);
   }
   var Expert = [0, fillf_float, to_iovec_shared];
   function present_line(fix_win_eol, acc, f, buf, len){
    a:
    {
     if(fix_win_eol && caml_call2(Core[91], len, 0)){
      var _m_ = caml_call2(Iobuf[66][3][4], buf, len - 1 | 0);
      if(caml_call2(Core_Char[54], 13, _m_)){
       var len_of_line = len - 1 | 0;
       break a;
      }
     }
     var len_of_line = len;
    }
    caml_call2(Iobuf[42], buf, len_of_line);
    return caml_call2(f, acc, buf);
   }
   function fold_lines_raw(opt, _g_, ch, init, f){
    if(opt) var sth = opt[1], fix_win_eol = sth; else var fix_win_eol = 1;
    if(_g_)
     var sth$0 = _g_[1], buf = sth$0;
    else
     var buf = caml_call1(Iobuf[10], 1024);
    caml_call1(Iobuf[44], buf);
    var acc$1 = [0, init];
    for(;;){
     var result = input(buf, ch);
     caml_call1(Iobuf[45], buf);
     var acc$2 = acc$1[1], acc = acc$2;
     for(;;){
      var
       len = caml_call1(Iobuf[29], buf),
       len$0 = caml_call4(Iobuf[66][3][34], buf, 0, len, 10);
      if(! caml_call2(Core[88], len$0, 0)) break;
      var
       hi = caml_call1(Iobuf[78][3], buf),
       lo = caml_call1(Iobuf[78][4], buf),
       next_line_starts_at = (lo + len$0 | 0) + 1 | 0,
       acc$0 = present_line(fix_win_eol, acc, f, buf, len$0);
      caml_call2(Iobuf[78][9], buf, next_line_starts_at);
      caml_call2(Iobuf[78][8], buf, hi);
      var acc = acc$0;
     }
     acc$1[1] = acc;
     var
      length = caml_call1(Iobuf[29], buf),
      capacity = caml_call1(Iobuf[28], buf);
     if(caml_call2(Core[90], length, capacity)){
      var
       new_capacity = caml_call2(Core[97], 1024, capacity * 2 | 0),
       str = caml_call1(Core_Bigstring[121], new_capacity),
       _h_ = caml_call1(Iobuf[24], buf);
      caml_call5(Iobuf[62][2][1], _h_, 0, str, 0, 0);
      caml_call4(Iobuf[78][12], buf, 0, new_capacity, str);
      caml_call2(Iobuf[41], buf, length);
     }
     caml_call1(Iobuf[47], buf);
     var _i_ = result ? 0 : 1;
     if(! _i_){
      var _j_ = caml_call1(Iobuf[28], buf), _k_ = caml_call1(Iobuf[29], buf);
      if(caml_call2(Core[92], _k_, _j_)){
       caml_call1(Iobuf[45], buf);
       var _l_ = caml_call1(Iobuf[29], buf);
       acc$1[1] = present_line(fix_win_eol, acc$1[1], f, buf, _l_);
      }
      return acc$1[1];
     }
    }
   }
   function fold_lines(fix_win_eol, buf, ch, init, f){
    return fold_lines_raw
            (fix_win_eol,
             buf,
             ch,
             init,
             function(acc, buf){
              return caml_call2
                      (f, acc, caml_call4(Iobuf[66][3][29], 0, 0, buf, 0));
             });
   }
   function iter_lines(fix_win_eol, buf, ch, f){
    return fold_lines
            (fix_win_eol,
             buf,
             ch,
             0,
             function(param, s){return caml_call1(f, s);});
   }
   function input_lines(fix_win_eol, buf, ch){
    var v = caml_call2(Core_Queue[66], 0, 0);
    iter_lines
     (fix_win_eol,
      buf,
      ch,
      function(str){return caml_call2(Core_Queue[43], v, str);});
    return caml_call1(Core_Queue[29], v);
   }
   caml_call1(Ppx_inline_test_lib[7], cst_iobuf_unix);
   caml_call1(Ppx_expect_runtime[1][2], 0);
   caml_call1(Ppx_bench_lib_Benchmark_accumu[1][2], 0);
   caml_call1(Ppx_module_timer_runtime[5], cst_Iobuf_unix);
   var
    Iobuf_unix =
      [0,
       compare_ok_or_eof,
       sexp_of_ok_or_eof,
       input,
       read,
       read_assume_fd_is_nonblocking,
       pread_assume_fd_is_nonblocking,
       recvfrom_assume_fd_is_nonblock,
       [0, create],
       recvmmsg_assume_fd_is_nonblock$0,
       send_nonblocking_no_sigpipe,
       sendto_nonblocking_no_sigpipe,
       Peek,
       output$0,
       write$0,
       write_assume_fd_is_nonblocking$0,
       pwrite_assume_fd_is_nonblockin,
       [0, fold_lines, iter_lines, input_lines, fold_lines_raw],
       Expert];
   runtime.caml_register_global(30, Iobuf_unix, cst_Iobuf_unix$0);
   return;
  }
  (globalThis));

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLjAsImZpbGUiOiJpb2J1Zl91bml4LmNtYS5qcyIsInNvdXJjZVJvb3QiOiIiLCJuYW1lcyI6WyJjb21wYXJlX29rX29yX2VvZiIsInNleHBfb2Zfb2tfb3JfZW9mIiwiaW5wdXQiLCJ0IiwiY2giLCJuJDAiLCJuIiwicmVhZCIsImZkIiwicmVhZF9hc3N1bWVfZmRfaXNfbm9uYmxvY2tpbmciLCJucmVhZCIsInByZWFkX2Fzc3VtZV9mZF9pc19ub25ibG9ja2luZyIsIm9mZnNldCIsInJlY3Zmcm9tX2Fzc3VtZV9mZF9pc19ub25ibG9jayIsInNvY2thZGRyIiwiY3JlYXRlIiwiaW9idWZzIiwiYnVmIiwicmVjdm1tc2dfYXNzdW1lX2ZkX2lzX25vbmJsb2NrIiwiY3R4IiwicmVjdm1tc2dfYXNzdW1lX2ZkX2lzX25vbmJsb2NrJDAiLCJ1bnNhZmVfc2VudCIsInJlc3VsdCIsInNlbmRfbm9uYmxvY2tpbmdfbm9fc2lncGlwZSIsImUiLCJzZW5kIiwic2VuZHRvX25vbmJsb2NraW5nX25vX3NpZ3BpcGUiLCJzZW5kdG8iLCJhZGRyIiwib3V0cHV0Iiwid3JpdGUiLCJ3cml0ZV9hc3N1bWVfZmRfaXNfbm9uYmxvY2tpbmciLCJvdXRwdXQkMCIsIm53cml0dGVuIiwid3JpdGUkMCIsIndyaXRlX2Fzc3VtZV9mZF9pc19ub25ibG9ja2luZyQwIiwicHdyaXRlX2Fzc3VtZV9mZF9pc19ub25ibG9ja2luIiwiZmlsbGZfZmxvYXQiLCJjX2Zvcm1hdCIsInZhbHVlIiwibGltaXQiLCJ0b19pb3ZlY19zaGFyZWQiLCJwb3MiLCJsZW4iLCJsZW4kMCIsInBvcyQwIiwicHJlc2VudF9saW5lIiwiZml4X3dpbl9lb2wiLCJhY2MiLCJmIiwibGVuX29mX2xpbmUiLCJmb2xkX2xpbmVzX3JhdyIsIm9wdCIsImluaXQiLCJzdGgiLCJzdGgkMCIsImFjYyQxIiwiYWNjJDIiLCJoaSIsImxvIiwibmV4dF9saW5lX3N0YXJ0c19hdCIsImFjYyQwIiwibGVuZ3RoIiwiY2FwYWNpdHkiLCJuZXdfY2FwYWNpdHkiLCJzdHIiLCJmb2xkX2xpbmVzIiwiaXRlcl9saW5lcyIsInMiLCJpbnB1dF9saW5lcyIsInYiXSwic291cmNlcyI6WyIvaG9tZS9saWFtLWNhcnBlbnRlci8ub3BhbS9wZXJzb25hbC1zaXRlL2xpYi9jb3JlX3VuaXgvaW9idWZfdW5peC9pb2J1Zl91bml4Lm1sIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Rzs7Ozs7Rzs7Ozs7Rzs7Ozs7Rzs7Ozs7Rzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0dBUUE7SUFBQUE7Ozs7Ozs7Ozs7WUFBQUMseUJBQUEseUJBRzZCO1lBRXpCQyxNQUFNQyxHQUFFQztJQUNWO0tBQThCO01BQUEsT0FBQSx5QkFEdEJEO01BQzZELFdBQUEsc0JBRDdEQTtNQUMwQyxXQUFBLHlCQUQxQ0E7TUFFTkUsTUFESSxtQ0FESUQ7Ozs7cUVBSzBCRSxZQUNsQyxzQkFOTUgsR0FLNEJHLElBQ2xDOzs7SUFIQSxzQkFITUgsR0FFTkU7SUFDQTtHQUlHO1lBR0hFLEtBQUtKLEdBQUVLO0lBQ1Q7S0FBNkI7TUFBQSxNQUFBLHlCQUR0Qkw7TUFDNkQsV0FBQSxzQkFEN0RBO01BQzBDLFdBQUEseUJBRDFDQTtNQUVMRSxNQURJLG1DQURHRzs7OztxRUFLMkJGLFlBQ2xDLHNCQU5LSCxHQUs2QkcsSUFDbEM7OztJQUhBLHNCQUhLSCxHQUVMRTtJQUNBO0dBSUc7WUFHSEksOEJBQThCTixHQUFFSztJQUNsQztLQUdJLE1BQUEseUJBSjRCTDtLQU12QixVQUFBLHNCQU51QkE7S0FLdkIsVUFBQSx5QkFMdUJBO0tBQzVCTyxRQUNGLGdDQUZnQ0Y7SUFRL0IsR0FBQSwrQkFQQ0U7S0FRa0IsVUFBQSwrQkFSbEJBO0tBUUMsc0JBVDJCUDs7SUFTM0IsT0FBQSw2QkFSRE87R0FTZ0M7WUFHbENDLCtCQUErQlIsR0FBRUssSUFBSUk7SUFDdkM7S0FJSSxNQUFBLHlCQUw2QlQ7S0FPeEIsVUFBQSxzQkFQd0JBO0tBTXhCLFVBQUEseUJBTndCQTtLQUM3Qk8sUUFDRixnQ0FGaUNGLElBQUlJO0lBU3ZDLE9BQUEsc0JBVGlDVCxHQUM3Qk87R0FRa0I7WUFHcEJHLCtCQUFrQ1YsR0FBRUs7SUFDdEM7S0FHSSxNQUFBLHlCQUpnQ0w7S0FNM0IsVUFBQSxzQkFOMkJBO0tBSzNCLFVBQUEseUJBTDJCQTtLQUVsQyxRQUFBLGdDQUZvQ0s7S0FDM0JNO0tBQVBKO0lBT0osc0JBUm9DUCxHQUNoQ087SUFPSixPQVBXSTtHQVFIO1lBaUNKQyxPQUFPQztJQW5CVCxhQUE0QmI7S0FBSyxJQUFXLE1BQUEsc0JBQWhCQSxJQUFLLE1BQUEsc0JBQUxBO0tBQWdCLE9BQUE7SUFBVTtJQUFuRCxHQUFBLDJCQW1CTWE7ZUFsQkosMkJBa0JJQTs7S0FoQlA7TUFBQTs0Qjs0Qjs7MkNBZ0JPQTs7Ozs7OztpQkFDa0NDLEtBQU8sT0FBQSx5QkFBUEEsS0FBcUI7SUFBaEUsV0FEU0QsUUFDUywyQkFEVEE7R0FDNEU7WUFZckZFLCtCQUFrQ1Y7UUFBOEJXLGdCQUF6Qkg7SUFDekMsT0FBQTthQURvQ1IsSUFBS1EsUUFBeUJHOztHQVVwRDtJQUFMWCxLQUFLO0lBQ1QsTUFYSFUsK0JBVU9WLElBdkJMTztJQXNCRixRQUFBOzs7Ozs7O09BTEFLO1NBU2dCOzs7OztLQVRoQkEsdUNBSkFGOztZQW1DQUcsWUFBWWxCLEdBQUVtQjtJQUNoQixLQUFHLCtCQURhQTtLQUtYLE9BQUEsZ0NBTFdBO0lBR0csVUFBQSwrQkFISEE7SUFHZCxzQkFIWW5COztHQUtzQztZQUtsRG9CO0lBQ0YsSUFDRUM7YUFBQUEsTUFBZ0IsT0FBaEJBO1FBQ0dDLE9BREhEO0lBRUE7cUJBQ09yQixHQUFFSzthQUNMO2NBQXVCLE1BQUEseUJBRHBCTDtjQUMyRCxVQUFBLHNCQUQzREE7YUFDVyxPQWhCbEJrQjtzQkFlT2xCO3NCQUNXO3dCQUhmc0IsTUFFTWpCLFFBQ3NDLHlCQUR4Q0w7WUFDc0U7R0FBQztZQUc5RXVCO0lBQ0YsSUFDRUY7YUFBQUEsTUFBZ0IsT0FBaEJBO1FBQ0dHLFNBREhIO0lBRUE7cUJBQ09yQixHQUFFSyxJQUFHb0I7YUFDUjtjQUF5QixNQUFBLHlCQUR0QnpCO2NBQzZELFVBQUEsc0JBRDdEQTthQUNXLE9BekJsQmtCO3NCQXdCT2xCO3NCQUNXO3dCQUhmd0I7d0JBRU1uQjs0QkFDd0MseUJBRDFDTDs7O3dCQUFLeUI7WUFDd0U7R0FBQztZQUluRkMsT0FBTzFCLEdBQUVDO0lBQ1g7S0FBeUIsTUFBQSx5QkFEaEJEO0tBQ3VELFVBQUEsc0JBRHZEQTtLQUNvQyxVQUFBLHlCQURwQ0E7SUFDZ0IsT0FBQSxtQ0FEZEM7R0FDK0Q7WUFHeEUwQixNQUFNM0IsR0FBRUs7SUFDVjtLQUF3QixNQUFBLHlCQURoQkw7S0FDdUQsVUFBQSxzQkFEdkRBO0tBQ29DLFVBQUEseUJBRHBDQTtJQUNnQixPQUFBLGdDQURkSztHQUMrRDtZQUd2RXVCLCtCQUErQjVCLEdBQUVLO0lBR25DLElBRUUsTUFBQSx5QkFMK0JMLElBTzFCLE1BQUEsc0JBUDBCQTtJQUdqQyxPQUFBO2FBSG1DSyxJQU01Qix5QkFOMEJMO0dBT2hCO0dBaEJQLGVBQ1IwQixRQUlBQyxPQUlBQztZQVdGQyxTQUFPN0IsR0FBRUM7SUFDSSxJQUFYNkIsV0FBVyxvQkFETjlCLEdBQUVDO0lBRVgsT0FBQSxzQkFGU0QsR0FDTDhCO0dBQ3FCO1lBR3ZCQyxRQUFNL0IsR0FBRUs7SUFDSyxJQUFYeUIsV0FBVyxvQkFEUDlCLEdBQUVLO0lBRVYsT0FBQSxzQkFGUUwsR0FDSjhCO0dBQ3FCO1lBR3ZCRSxpQ0FBK0JoQyxHQUFFSztJQUNwQixJQUFYeUIsV0FBVyxvQkFEa0I5QixHQUFFSztJQUVuQyxPQUFBLHNCQUZpQ0wsR0FDN0I4QjtHQUNxQjtZQUd2QkcsK0JBQWdDakMsR0FBRUssSUFBSUk7SUFDeEM7S0FJSSxNQUFBLHlCQUw4QlQ7S0FPekIsVUFBQSxzQkFQeUJBO0tBTXpCLFVBQUEseUJBTnlCQTtLQUM5QjhCLFdBQ0YsZ0NBRmtDekIsSUFBSUk7SUFTeEMsT0FBQSxzQkFUa0NULEdBQzlCOEI7R0FRcUI7WUFhckJJLFlBQVlsQyxHQUFHbUMsVUFBU0M7SUFDMUI7S0FBSUMsUUFBUSxzQkFERXJDO0tBRVZtQjtPQUFTO1NBRkNuQixHQUFHbUMsVUFFdUMsc0JBRjFDbkMsSUFBWW9DO0lBR3ZCLE9BQUEscUJBRENqQixRQURBa0I7O2NBSUk7MEJBSEpsQjs7aUJBTUYsc0JBUlluQixHQUVWbUI7R0FPRTtZQUdKbUIsZ0JBQWlCQyxLQUFLQyxLQUFJeEM7SUFDNUI7S0FDdUUsTUFBQSxzQkFGM0NBO0tBRTFCLFFBQUEsOENBRmlCdUMsS0FBS0M7S0FDZkM7S0FBTEM7S0FHb0IsTUFBQSx5QkFKSTFDO0tBSWdCLFVBQUMseUJBSmpCQSxLQUN4QjBDO0lBR29CLE9BQUEsdUNBSGZEO0dBRzJEO0dBMUJ4RCxpQkFVVlAsYUFZQUk7WUFjQUssYUFBY0MsYUFBYUMsS0FBS0MsR0FBRWhDLEtBQUswQjtJQUN6Qzs7S0FFUSxHQUhRSSxlQUdSLHFCQUhpQ0o7TUFJakIsVUFBQSw0QkFKWTFCLEtBQUswQjtNQUlqQyxHQUFBO1dBSEpPLGNBRHFDUDs7OztTQUNyQ08sY0FEcUNQOztJQVF6QyxzQkFSb0MxQixLQUNoQ2lDO0lBT0osT0FBQSxXQVJrQ0QsR0FBTEQsS0FBTy9CO0dBUzNCO1lBa0JQa0MsZUFBaUJDLFVBQW9EaEQsSUFBSWlELE1BQU1KO0lBQ2pGLEdBRG1CRyxTQUFjRSxNQUFkRixRQUFBTCxjQUFjTyxjQUFkUDtJQUNuQjtTQUQrQ1EsZ0JBQU50QyxNQUFNc0M7O1NBQU50QyxNQUFNO0lBQy9DLHNCQUR5Q0E7SUFFL0IsSUFBTnVDLFlBRnVFSDs7S0FJNUQsSUFBVC9CLFNBclJOcEIsTUFpUnlDZSxLQUE4QmI7S0FLckUsc0JBTHVDYTtTQWZFd0MsUUFpQnZDRCxVQWpCdUNSLE1BQUFTO0tBQzNDO01BakJVO09BQU5kLE1BQU0sc0JBK0IrQjFCO09BZHJDMkIsUUFoQkosNkJBOEJ5QzNCLFFBL0JyQzBCO01Ba0JELEtBQUEscUJBRENDO01BR087T0FBTGMsS0FBSyx5QkFXOEJ6QztPQVZuQzBDLEtBQUsseUJBVThCMUM7T0FUbkMyQyx1QkFEQUQsS0FKRmY7T0FEdUNpQixRQVp6Q2YsYUEyQmlCQyxhQWZ3QkMsS0Flc0NDLEdBQXhDaEMsS0FkckMyQjtNQVFGLHlCQU11QzNCLEtBVG5DMkM7TUFJSix5QkFLdUMzQyxLQVhuQ3lDO1VBSnFDVixNQUFBYTs7S0FpQnZDTCxXQWpCdUNSO0tBc0I1QjtNQUFUYyxTQUFTLHNCQVAwQjdDO01BUW5DOEMsV0FBVyxzQkFSd0I5QztLQVNwQyxHQUFBLHFCQUZDNkMsUUFDQUM7TUFHaUI7T0FBZkMsZUFBZSwyQkFIakJEO09BSUVFLE1BQU0sZ0NBRE5EO09BRWtDLE1BQUEsc0JBYkQvQztNQWFyQyxvQ0FESWdEO01BRUosMEJBZHFDaEQsUUFXakMrQyxjQUNBQztNQUdKLHNCQWZxQ2hELEtBT25DNkM7O0tBU0osc0JBaEJ1QzdDO2VBSW5DSztLQWVLO01BSVcsSUFBQSxNQUFBLHNCQXZCbUJMLE1BdUJ0QyxNQUFBLHNCQXZCc0NBO01BdUJ0QyxHQUFBO09BRUQsc0JBekJ1Q0E7T0EwQmdCLFVBQUEsc0JBMUJoQkE7T0FFckN1QyxXQTdCRlYsYUEyQmlCQyxhQUVmUyxVQUY2RVAsR0FBeENoQzs7YUFFckN1Qzs7O0dBeUJBO1lBR0ZVLFdBQVluQixhQUFhOUIsS0FBSWIsSUFBSWlELE1BQU1KO0lBQ3pDLE9BL0JFRTthQThCWUo7YUFBYTlCO2FBQUliO2FBQUlpRDtzQkFDZUwsS0FBSS9CO2NBQ3BELE9BQUE7dUJBRnVDZ0MsR0FDU0QsS0FDaEQsbUNBRG9EL0I7YUFDUDtHQUFDO1lBRzlDa0QsV0FBWXBCLGFBQWE5QixLQUFJYixJQUFJNkM7SUFDbkMsT0FORWlCO2FBS1luQjthQUFhOUI7YUFBSWI7OzZCQUNxQmdFLEdBQUssT0FBQSxXQUR0Qm5CLEdBQ2lCbUIsR0FBUTtHQUFDO1lBRzNEQyxZQUFhdEIsYUFBYTlCLEtBQUliO0lBRXhCLElBQUprRSxJQUFJO0lBTk5IO01BSWFwQjtNQUFhOUI7TUFBSWI7ZUFHUTZELEtBQU8sT0FBQSwyQkFEM0NLLEdBQ29DTCxLQUEwQjtJQUFsRSxPQUFBLDJCQURJSztHQUVZOzs7Ozs7OztPQWpVcEJ0RTtPQUFBQztPQUtJQztPQVVBSztPQVVBRTtPQWFBRTtPQVlBRTtXQTBDRUU7T0FpQkZLO09BeUNBRztPQVNBRzs7T0E2QkFNO09BS0FFO09BS0FDO09BS0FDO1dBeUdFOEIsWUFLQUMsWUFJQUUsYUF2Q0FsQjs7OztFIiwic291cmNlc0NvbnRlbnQiOlsiWyUlaW1wb3J0IFwiY29uZmlnLmhcIl1cblxub3BlbiEgQ29yZVxub3BlbiEgSW9idWZcbm1vZHVsZSBVbml4ID0gQ29yZV91bml4XG5tb2R1bGUgRmlsZV9kZXNjciA9IFVuaXguRmlsZV9kZXNjclxubW9kdWxlIFN5c2NhbGxfcmVzdWx0ID0gVW5peC5TeXNjYWxsX3Jlc3VsdFxuXG50eXBlIG9rX29yX2VvZiA9XG4gIHwgT2tcbiAgfCBFb2ZcbltAQGRlcml2aW5nIGNvbXBhcmUsIHNleHBfb2ZdXG5cbmxldCBpbnB1dCB0IGNoID1cbiAgbWF0Y2ggQmlnc3RyaW5nX3VuaXguaW5wdXQgY2ggKEV4cGVydC5idWYgdCkgfnBvczooRXhwZXJ0LmxvIHQpIH5sZW46KGxlbmd0aCB0KSB3aXRoXG4gIHwgbiAtPlxuICAgIHVuc2FmZV9hZHZhbmNlIHQgbjtcbiAgICBPa1xuICB8IGV4Y2VwdGlvbiBCaWdzdHJpbmdfdW5peC5JT0Vycm9yIChuLCBFbmRfb2ZfZmlsZSkgLT5cbiAgICB1bnNhZmVfYWR2YW5jZSB0IG47XG4gICAgRW9mXG47O1xuXG5sZXQgcmVhZCB0IGZkID1cbiAgbWF0Y2ggQmlnc3RyaW5nX3VuaXgucmVhZCBmZCAoRXhwZXJ0LmJ1ZiB0KSB+cG9zOihFeHBlcnQubG8gdCkgfmxlbjoobGVuZ3RoIHQpIHdpdGhcbiAgfCBuIC0+XG4gICAgdW5zYWZlX2FkdmFuY2UgdCBuO1xuICAgIE9rXG4gIHwgZXhjZXB0aW9uIEJpZ3N0cmluZ191bml4LklPRXJyb3IgKG4sIEVuZF9vZl9maWxlKSAtPlxuICAgIHVuc2FmZV9hZHZhbmNlIHQgbjtcbiAgICBFb2Zcbjs7XG5cbmxldCByZWFkX2Fzc3VtZV9mZF9pc19ub25ibG9ja2luZyB0IGZkID1cbiAgbGV0IG5yZWFkID1cbiAgICBCaWdzdHJpbmdfdW5peC5yZWFkX2Fzc3VtZV9mZF9pc19ub25ibG9ja2luZ1xuICAgICAgZmRcbiAgICAgIChFeHBlcnQuYnVmIHQpXG4gICAgICB+cG9zOihFeHBlcnQubG8gdClcbiAgICAgIH5sZW46KGxlbmd0aCB0KVxuICBpblxuICBpZiBTeXNjYWxsX3Jlc3VsdC5JbnQuaXNfb2sgbnJlYWRcbiAgdGhlbiB1bnNhZmVfYWR2YW5jZSB0IChTeXNjYWxsX3Jlc3VsdC5JbnQub2tfZXhuIG5yZWFkKTtcbiAgU3lzY2FsbF9yZXN1bHQuaWdub3JlX29rX3ZhbHVlIG5yZWFkXG47O1xuXG5sZXQgcHJlYWRfYXNzdW1lX2ZkX2lzX25vbmJsb2NraW5nIHQgZmQgfm9mZnNldCA9XG4gIGxldCBucmVhZCA9XG4gICAgQmlnc3RyaW5nX3VuaXgucHJlYWRfYXNzdW1lX2ZkX2lzX25vbmJsb2NraW5nXG4gICAgICBmZFxuICAgICAgfm9mZnNldFxuICAgICAgKEV4cGVydC5idWYgdClcbiAgICAgIH5wb3M6KEV4cGVydC5sbyB0KVxuICAgICAgfmxlbjoobGVuZ3RoIHQpXG4gIGluXG4gIHVuc2FmZV9hZHZhbmNlIHQgbnJlYWRcbjs7XG5cbmxldCByZWN2ZnJvbV9hc3N1bWVfZmRfaXNfbm9uYmxvY2tpbmcgdCBmZCA9XG4gIGxldCBucmVhZCwgc29ja2FkZHIgPVxuICAgIEJpZ3N0cmluZ191bml4LnJlY3Zmcm9tX2Fzc3VtZV9mZF9pc19ub25ibG9ja2luZ1xuICAgICAgZmRcbiAgICAgIChFeHBlcnQuYnVmIHQpXG4gICAgICB+cG9zOihFeHBlcnQubG8gdClcbiAgICAgIH5sZW46KGxlbmd0aCB0KVxuICBpblxuICB1bnNhZmVfYWR2YW5jZSB0IG5yZWFkO1xuICBzb2NrYWRkclxuOztcblxuWyUlaWZkZWYgSlNDX1JFQ1ZNTVNHXVxuXG4oKiBBbGxvY2F0ZSBhbmQgcHJlLXBvcHVsYXRlIHRoZSBbc3RydWN0IG1tc2doZHJdcyBhbmQgYXNzb2NpYXRlZCBbc3RydWN0IGlvdmVjXXMuIFJldXNpbmdcbiAgIHRoaXMgY29udGV4dCByZWR1Y2VzIHRoZSBjb3N0IG9mIGNhbGxzIHRvIFtyZWN2bW1zZ10gY29uc2lkZXJhYmx5IGlmIHRoZSBpb2J1ZiBhcnJheSBpc1xuICAgbGFyZ2UuICopXG5tb2R1bGUgUmVjdm1tc2dfY29udGV4dCA9IHN0cnVjdFxuICB0eXBlIGN0eFxuXG4gIGV4dGVybmFsIHVuc2FmZV9jdHggOiAoWz4gd3JpdGUgXSwgc2VlaykgdCBhcnJheSAtPiBjdHggPSBcImlvYnVmX3JlY3ZtbXNnX2N0eFwiXG5cbiAgbGV0IGN0eCB0cyA9XG4gICAgaWYgQXJyYXkuZm9yX2FsbCB0cyB+ZjooZnVuIHQgLT4gbGVuZ3RoIHQgPSBjYXBhY2l0eSB0KVxuICAgIHRoZW4gdW5zYWZlX2N0eCB0c1xuICAgIGVsc2VcbiAgICAgIHJhaXNlX3NcbiAgICAgICAgWyVzZXhwXG4gICAgICAgICAgXCJSZWN2bW1zZ19jb250ZXh0LmNyZWF0ZTogYWxsIGJ1ZmZlcnMgbXVzdCBiZSByZXNldFwiXG4gICAgICAgICAgLCAodHMgOiAoXywgXykgdF93aXRoX3NoYWxsb3dfc2V4cCBhcnJheSldXG4gIDs7XG5cbiAgKCogd2UgcmV0YWluIGEgcmVmZXJlbmNlIHRvIHRoZSB1bmRlcmx5aW5nIGJpZ3N0cmluZ3MsIGluIHRoZSBldmVudCB0aGF0IGNhbGxlcnNcbiAgICAgbWlzdGFrZW5seSB1c2Ugc2V0X2JvdW5kc19hbmRfYnVmZmVyLiBTaW5jZSB3ZSd2ZSBjYWNoZWQgdGhlIHVuZGVybHlpbmcgbWVtb3J5XG4gICAgIHJlZmVyZW5jZWQgYnkgdGhlIGJpZ3N0cmluZywgd2Ugd2FudCB0byBwcmV2ZW50IGl0IGZyb20gYmVpbmcgZ2FyYmFnZSBjb2xsZWN0ZWQgYW5kXG4gICAgIHJlbGVhc2VkLiAqKVxuICB0eXBlIG5vbnJlYyB0ID1cbiAgICB7IGlvYnVmcyA6IChyZWFkX3dyaXRlLCBzZWVrKSB0IGFycmF5XG4gICAgOyBic3RycyA6IEJpZ3N0cmluZy50IGFycmF5XG4gICAgOyBjdHggOiBjdHhcbiAgICB9XG5cbiAgbGV0IGNyZWF0ZSBpb2J1ZnMgPVxuICAgIHsgaW9idWZzOyBic3RycyA9IEFycmF5Lm1hcCBpb2J1ZnMgfmY6KGZ1biBidWYgLT4gRXhwZXJ0LmJ1ZiBidWYpOyBjdHggPSBjdHggaW9idWZzIH1cbiAgOztcbmVuZFxuXG5leHRlcm5hbCB1bnNhZmVfcmVjdm1tc2dfYXNzdW1lX2ZkX2lzX25vbmJsb2NraW5nXG4gIDogIEZpbGVfZGVzY3IudFxuICAtPiAocmVhZF93cml0ZSwgc2VlaykgdCBhcnJheVxuICAtPiBSZWN2bW1zZ19jb250ZXh0LmN0eFxuICAtPiBVbml4LlN5c2NhbGxfcmVzdWx0LkludC50XG4gID0gXCJpb2J1Zl9yZWN2bW1zZ19hc3N1bWVfZmRfaXNfbm9uYmxvY2tpbmdfc3R1YlwiXG4gIFtAQG5vYWxsb2NdXG5cbmxldCByZWN2bW1zZ19hc3N1bWVfZmRfaXNfbm9uYmxvY2tpbmcgZmQgeyBSZWN2bW1zZ19jb250ZXh0LmlvYnVmczsgY3R4OyBfIH0gPVxuICB1bnNhZmVfcmVjdm1tc2dfYXNzdW1lX2ZkX2lzX25vbmJsb2NraW5nIGZkIGlvYnVmcyBjdHhcbjs7XG5cbmxldCByZWN2bW1zZ19hc3N1bWVfZmRfaXNfbm9uYmxvY2tpbmcgPVxuICAoKiBXZSBsaW5rIHdpdGggWy0td3JhcCByZWN2bW1zZ10uICBJZiB3ZSBoYXZlIGNvbXBpbGVkIG9uIGEgbWFjaGluZSB3aXRoIHJlY3ZtbXNnXG4gICAgIChlLmcuLCBDZW50T1MgNikgYnV0IHRoZW4gcnVuIG9uIGEgbWFjaGluZSB3aXRob3V0IChlLmcuLCBDZW50T1MgNSksIG91ciB3cmFwcGVkXG4gICAgIFtyZWN2bW1zZ10gYWx3YXlzIHJldHVybnMgLTEgYW5kIHNldHMgZXJybm8gdG8gRU5PU1lTLiAqKVxuICBtYXRjaFxuICAgIFVuaXguU3lzY2FsbF9yZXN1bHQuSW50LnRvX3Jlc3VsdFxuICAgICAgKGxldCBmZCA9IEZpbGVfZGVzY3Iub2ZfaW50ICgtMSkgaW5cbiAgICAgICByZWN2bW1zZ19hc3N1bWVfZmRfaXNfbm9uYmxvY2tpbmcgZmQgKFJlY3ZtbXNnX2NvbnRleHQuY3JlYXRlIFt8fF0pKVxuICB3aXRoXG4gIHwgRXJyb3IgRU5PU1lTIC0+IE9yX2Vycm9yLnVuaW1wbGVtZW50ZWQgXCJJb2J1Zi5yZWN2bW1zZ19hc3N1bWVfZmRfaXNfbm9uYmxvY2tpbmdcIlxuICB8IF8gLT4gT2sgcmVjdm1tc2dfYXNzdW1lX2ZkX2lzX25vbmJsb2NraW5nXG47O1xuXG5bJSVlbHNlXVxuXG4oKiBub3QgSlNDX1JFQ1ZNTVNHICopXG5cbm1vZHVsZSBSZWN2bW1zZ19jb250ZXh0ID0gc3RydWN0XG4gIHR5cGUgdCA9IHVuaXRcblxuICBsZXQgY3JlYXRlID0gaWdub3JlXG5lbmRcblxubGV0IHJlY3ZtbXNnX2Fzc3VtZV9mZF9pc19ub25ibG9ja2luZyA9XG4gIE9yX2Vycm9yLnVuaW1wbGVtZW50ZWQgXCJJb2J1Zi5yZWN2bW1zZ19hc3N1bWVfZmRfaXNfbm9uYmxvY2tpbmdcIlxuOztcblxuWyUlZW5kaWZdXG5cbigqIEpTQ19SRUNWTU1TRyAqKVxuXG5sZXQgdW5zYWZlX3NlbnQgdCByZXN1bHQgPVxuICBpZiBTeXNjYWxsX3Jlc3VsdC5JbnQuaXNfb2sgcmVzdWx0XG4gIHRoZW4gKFxuICAgIHVuc2FmZV9hZHZhbmNlIHQgKFN5c2NhbGxfcmVzdWx0LkludC5va19leG4gcmVzdWx0KTtcbiAgICBTeXNjYWxsX3Jlc3VsdC51bml0KVxuICBlbHNlIFN5c2NhbGxfcmVzdWx0LkludC5yZWludGVycHJldF9lcnJvcl9leG4gcmVzdWx0XG47O1xuXG4oKiBEb24ndCB1c2UgW09yX2Vycm9yLm1hcF0uICBUaGUgbmF0dXJhbCB1c2FnZSByZXN1bHRzIGluIGEgcGFydGlhbGx5IGFwcGxpZWQgZnVuY3Rpb24sXG4gICB3aGljaCBpcyBzbG93ZXIgdG8gY2FsbC4gKilcbmxldCBzZW5kX25vbmJsb2NraW5nX25vX3NpZ3BpcGUgKCkgPVxuICBtYXRjaCBCaWdzdHJpbmdfdW5peC5zZW5kX25vbmJsb2NraW5nX25vX3NpZ3BpcGUgd2l0aFxuICB8IEVycm9yIF8gYXMgZSAtPiBlXG4gIHwgT2sgc2VuZCAtPlxuICAgIE9rXG4gICAgICAoZnVuIHQgZmQgLT5cbiAgICAgICAgdW5zYWZlX3NlbnQgdCAoc2VuZCBmZCAoRXhwZXJ0LmJ1ZiB0KSB+cG9zOihFeHBlcnQubG8gdCkgfmxlbjoobGVuZ3RoIHQpKSlcbjs7XG5cbmxldCBzZW5kdG9fbm9uYmxvY2tpbmdfbm9fc2lncGlwZSAoKSA9XG4gIG1hdGNoIEJpZ3N0cmluZ191bml4LnNlbmR0b19ub25ibG9ja2luZ19ub19zaWdwaXBlIHdpdGhcbiAgfCBFcnJvciBfIGFzIGUgLT4gZVxuICB8IE9rIHNlbmR0byAtPlxuICAgIE9rXG4gICAgICAoZnVuIHQgZmQgYWRkciAtPlxuICAgICAgICB1bnNhZmVfc2VudCB0IChzZW5kdG8gZmQgKEV4cGVydC5idWYgdCkgfnBvczooRXhwZXJ0LmxvIHQpIH5sZW46KGxlbmd0aCB0KSBhZGRyKSlcbjs7XG5cbm1vZHVsZSBQZWVrID0gc3RydWN0XG4gIGxldCBvdXRwdXQgdCBjaCA9XG4gICAgQmlnc3RyaW5nX3VuaXgub3V0cHV0IGNoIChFeHBlcnQuYnVmIHQpIH5wb3M6KEV4cGVydC5sbyB0KSB+bGVuOihsZW5ndGggdClcbiAgOztcblxuICBsZXQgd3JpdGUgdCBmZCA9XG4gICAgQmlnc3RyaW5nX3VuaXgud3JpdGUgZmQgKEV4cGVydC5idWYgdCkgfnBvczooRXhwZXJ0LmxvIHQpIH5sZW46KGxlbmd0aCB0KVxuICA7O1xuXG4gIGxldCB3cml0ZV9hc3N1bWVfZmRfaXNfbm9uYmxvY2tpbmcgdCBmZCA9XG4gICAgKCogVGhpcyBpcyBzYWZlIGJlY2F1c2Ugb2YgdGhlIGludmFyaWFudCBvZiBbdF0gdGhhdCB0aGUgd2luZG93IGlzIHdpdGhpbiB0aGUgYnVmZmVyXG4gICAgICAgKHVubGVzcyB0aGUgdXNlciBoYXMgdmlvbGF0ZWQgdGhlIGludmFyaWFudCB3aXRoIGFuIHVuc2FmZSBvcGVyYXRpb24pLiAqKVxuICAgIEJpZ3N0cmluZ191bml4LnVuc2FmZV93cml0ZV9hc3N1bWVfZmRfaXNfbm9uYmxvY2tpbmdcbiAgICAgIGZkXG4gICAgICAoRXhwZXJ0LmJ1ZiB0KVxuICAgICAgfnBvczooRXhwZXJ0LmxvIHQpXG4gICAgICB+bGVuOihsZW5ndGggdClcbiAgOztcbmVuZFxuXG5sZXQgb3V0cHV0IHQgY2ggPVxuICBsZXQgbndyaXR0ZW4gPSBQZWVrLm91dHB1dCB0IGNoIGluXG4gIHVuc2FmZV9hZHZhbmNlIHQgbndyaXR0ZW5cbjs7XG5cbmxldCB3cml0ZSB0IGZkID1cbiAgbGV0IG53cml0dGVuID0gUGVlay53cml0ZSB0IGZkIGluXG4gIHVuc2FmZV9hZHZhbmNlIHQgbndyaXR0ZW5cbjs7XG5cbmxldCB3cml0ZV9hc3N1bWVfZmRfaXNfbm9uYmxvY2tpbmcgdCBmZCA9XG4gIGxldCBud3JpdHRlbiA9IFBlZWsud3JpdGVfYXNzdW1lX2ZkX2lzX25vbmJsb2NraW5nIHQgZmQgaW5cbiAgdW5zYWZlX2FkdmFuY2UgdCBud3JpdHRlblxuOztcblxubGV0IHB3cml0ZV9hc3N1bWVfZmRfaXNfbm9uYmxvY2tpbmcgdCBmZCB+b2Zmc2V0ID1cbiAgbGV0IG53cml0dGVuID1cbiAgICBCaWdzdHJpbmdfdW5peC5wd3JpdGVfYXNzdW1lX2ZkX2lzX25vbmJsb2NraW5nXG4gICAgICBmZFxuICAgICAgfm9mZnNldFxuICAgICAgKEV4cGVydC5idWYgdClcbiAgICAgIH5wb3M6KEV4cGVydC5sbyB0KVxuICAgICAgfmxlbjoobGVuZ3RoIHQpXG4gIGluXG4gIHVuc2FmZV9hZHZhbmNlIHQgbndyaXR0ZW5cbjs7XG5cbm1vZHVsZSBFeHBlcnQgPSBzdHJ1Y3RcbiAgZXh0ZXJuYWwgdW5zYWZlX3Bva2VmX2Zsb2F0XG4gICAgOiAgKHJlYWRfd3JpdGUsIF8pIHRcbiAgICAtPiBjX2Zvcm1hdDpzdHJpbmdcbiAgICAtPiBtYXhfbGVuZ3RoOmludFxuICAgIC0+IChmbG9hdFtAdW5ib3hlZF0pXG4gICAgLT4gaW50XG4gICAgPSBcImlvYnVmX3Vuc2FmZV9wb2tlZl9kb3VibGVfYnl0ZWNvZGVcIiBcImlvYnVmX3Vuc2FmZV9wb2tlZl9kb3VibGVcIlxuICAgIFtAQG5vYWxsb2NdXG5cbiAgbGV0IGZpbGxmX2Zsb2F0IHQgfmNfZm9ybWF0IHZhbHVlID1cbiAgICBsZXQgbGltaXQgPSBsZW5ndGggdCBpblxuICAgIGxldCByZXN1bHQgPSB1bnNhZmVfcG9rZWZfZmxvYXQgdCB+Y19mb3JtYXQgfm1heF9sZW5ndGg6KGxlbmd0aCB0KSB2YWx1ZSBpblxuICAgIGlmIHJlc3VsdCA+PSBsaW1pdFxuICAgIHRoZW4gYFRydW5jYXRlZFxuICAgIGVsc2UgaWYgcmVzdWx0IDwgMFxuICAgIHRoZW4gYEZvcm1hdF9lcnJvclxuICAgIGVsc2UgKFxuICAgICAgdW5zYWZlX2FkdmFuY2UgdCByZXN1bHQ7XG4gICAgICBgT2spXG4gIDs7XG5cbiAgbGV0IHRvX2lvdmVjX3NoYXJlZCA/cG9zID9sZW4gdCA9XG4gICAgbGV0IHBvcywgbGVuID1cbiAgICAgIE9yZGVyZWRfY29sbGVjdGlvbl9jb21tb24uZ2V0X3Bvc19sZW5fZXhuICgpID9wb3MgP2xlbiB+dG90YWxfbGVuZ3RoOihsZW5ndGggdClcbiAgICBpblxuICAgIFVuaXguSU9WZWMub2ZfYmlnc3RyaW5nIChFeHBlcnQuYnVmIHQpIH5wb3M6KEV4cGVydC5sbyB0ICsgcG9zKSB+bGVuXG4gIDs7XG5lbmRcblxubW9kdWxlIEluX2NoYW5uZWxfb3B0aW1pemVkID0gc3RydWN0XG4gIGxldCBuZXh0X25ld2xpbmUgYnVmID1cbiAgICBsZXQgbGVuID0gSW9idWYubGVuZ3RoIGJ1ZiBpblxuICAgIElvYnVmLlVuc2FmZS5QZWVrLmluZGV4X29yX25lZyB+cG9zOjAgYnVmIH5sZW4gJ1xcbidcbiAgOztcblxuICBsZXQgcHJlc2VudF9saW5lIH5maXhfd2luX2VvbCB+YWNjIH5mIGJ1ZiB+bGVuID1cbiAgICBsZXQgbGVuX29mX2xpbmUgPVxuICAgICAgaWYgZml4X3dpbl9lb2xcbiAgICAgICAgICYmIGxlbiA+IDBcbiAgICAgICAgICYmIENoYXIuZXF1YWwgJ1xccicgKElvYnVmLlVuc2FmZS5QZWVrLmNoYXIgfnBvczoobGVuIC0gMSkgYnVmKVxuICAgICAgdGhlbiBsZW4gLSAxXG4gICAgICBlbHNlIGxlblxuICAgIGluXG4gICAgSW9idWYudW5zYWZlX3Jlc2l6ZSBidWYgfmxlbjpsZW5fb2ZfbGluZTtcbiAgICBmIGFjYyBidWZcbiAgOztcblxuICBsZXQgcmVjIGZvbGRfZnVsbF9saW5lc19pbl9idWYgfmZpeF93aW5fZW9sIH5hY2MgfmYgYnVmID1cbiAgICBsZXQgbGVuID0gbmV4dF9uZXdsaW5lIGJ1ZiBpblxuICAgIGlmIGxlbiA+PSAwXG4gICAgdGhlbiAoXG4gICAgICBsZXQgaGkgPSBJb2J1Zi5FeHBlcnQuaGkgYnVmIGluXG4gICAgICBsZXQgbG8gPSBJb2J1Zi5FeHBlcnQubG8gYnVmIGluXG4gICAgICBsZXQgbmV4dF9saW5lX3N0YXJ0c19hdCA9IGxvICsgbGVuICsgMSBpblxuICAgICAgKCogW3ByZXNlbnRfbGluZV0gbW9kaWZpZXMgW2hpXSBhbmQgW2xvXSwgc28gd2UgbXVzdCBjYWNoZSBhbmQgcmVzdG9yZSB0aGVtLiAqKVxuICAgICAgbGV0IGFjYyA9IHByZXNlbnRfbGluZSB+YWNjIH5mIH5maXhfd2luX2VvbCBidWYgfmxlbiBpblxuICAgICAgSW9idWYuRXhwZXJ0LnNldF9sbyBidWYgbmV4dF9saW5lX3N0YXJ0c19hdDtcbiAgICAgIElvYnVmLkV4cGVydC5zZXRfaGkgYnVmIGhpO1xuICAgICAgZm9sZF9mdWxsX2xpbmVzX2luX2J1ZiB+Zml4X3dpbl9lb2wgfmFjYyB+ZiBidWYpXG4gICAgZWxzZSBhY2NcbiAgOztcblxuICBsZXQgZm9sZF9saW5lc19yYXcgPyhmaXhfd2luX2VvbCA9IHRydWUpID8oYnVmID0gSW9idWYuY3JlYXRlIH5sZW46MTAyNCkgY2ggfmluaXQgfmYgPVxuICAgIElvYnVmLnJlc2V0IGJ1ZjtcbiAgICBsZXQgYWNjID0gcmVmIGluaXQgaW5cbiAgICB3aGlsZVxuICAgICAgbGV0IHJlc3VsdCA9IGlucHV0IGJ1ZiBjaCBpblxuICAgICAgSW9idWYuZmxpcF9sbyBidWY7XG4gICAgICBhY2MgOj0gZm9sZF9mdWxsX2xpbmVzX2luX2J1ZiB+Zml4X3dpbl9lb2wgfmFjYzohYWNjIH5mIGJ1ZjtcbiAgICAgIGxldCBsZW5ndGggPSBJb2J1Zi5sZW5ndGggYnVmIGluXG4gICAgICBsZXQgY2FwYWNpdHkgPSBJb2J1Zi5jYXBhY2l0eSBidWYgaW5cbiAgICAgIGlmIGxlbmd0aCA9IGNhcGFjaXR5XG4gICAgICB0aGVuIChcbiAgICAgICAgbGV0IG5ld19jYXBhY2l0eSA9IG1heCAxMDI0IChjYXBhY2l0eSAqIDIpIGluXG4gICAgICAgIGxldCBzdHIgPSBCaWdzdHJpbmcuY3JlYXRlIG5ld19jYXBhY2l0eSBpblxuICAgICAgICBJb2J1Zi5Db25zdW1lLlRvX2JpZ3N0cmluZy5ibGl0byB+c3JjOihJb2J1Zi5yZWFkX29ubHkgYnVmKSB+ZHN0OnN0ciAoKTtcbiAgICAgICAgSW9idWYuRXhwZXJ0LnJlaW5pdGlhbGl6ZV9vZl9iaWdzdHJpbmcgfnBvczowIH5sZW46bmV3X2NhcGFjaXR5IGJ1ZiBzdHI7XG4gICAgICAgIElvYnVmLnJlc2l6ZSBidWYgfmxlbjpsZW5ndGgpO1xuICAgICAgSW9idWYuY29tcGFjdCBidWY7XG4gICAgICBtYXRjaCByZXN1bHQgd2l0aFxuICAgICAgfCBPayAtPiB0cnVlXG4gICAgICB8IEVvZiAtPiBmYWxzZVxuICAgIGRvXG4gICAgICAoKVxuICAgIGRvbmU7XG4gICAgaWYgSW9idWYubGVuZ3RoIGJ1ZiA8IElvYnVmLmNhcGFjaXR5IGJ1ZlxuICAgIHRoZW4gKFxuICAgICAgSW9idWYuZmxpcF9sbyBidWY7XG4gICAgICBhY2MgOj0gcHJlc2VudF9saW5lIH5maXhfd2luX2VvbCB+YWNjOiFhY2MgfmYgYnVmIH5sZW46KElvYnVmLmxlbmd0aCBidWYpKTtcbiAgICAhYWNjXG4gIDs7XG5cbiAgbGV0IGZvbGRfbGluZXMgP2ZpeF93aW5fZW9sID9idWYgY2ggfmluaXQgfmYgPVxuICAgIGZvbGRfbGluZXNfcmF3ID9maXhfd2luX2VvbCA/YnVmIGNoIH5pbml0IH5mOihmdW4gYWNjIGJ1ZiAtPlxuICAgICAgSW9idWYuVW5zYWZlLlBlZWsuc3RyaW5nbyBidWYgfnBvczowIHw+IGYgYWNjKVxuICA7O1xuXG4gIGxldCBpdGVyX2xpbmVzID9maXhfd2luX2VvbCA/YnVmIGNoIH5mID1cbiAgICBmb2xkX2xpbmVzID9maXhfd2luX2VvbCA/YnVmIGNoIH5pbml0OigpIH5mOihmdW4gKCkgcyAtPiBmIHMpXG4gIDs7XG5cbiAgbGV0IGlucHV0X2xpbmVzID9maXhfd2luX2VvbCA/YnVmIGNoID1cbiAgICAoKiBWZWMgaXMgbm90IHVzYWJsZSBhcyBhIGRlcGVuZGVuY3kuICopXG4gICAgbGV0IHYgPSBRdWV1ZS5jcmVhdGUgKCkgaW5cbiAgICBpdGVyX2xpbmVzID9maXhfd2luX2VvbCA/YnVmIGNoIH5mOihmdW4gc3RyIC0+IFF1ZXVlLmVucXVldWUgdiBzdHIpO1xuICAgIFF1ZXVlLnRvX2FycmF5IHZcbiAgOztcbmVuZFxuIl19
