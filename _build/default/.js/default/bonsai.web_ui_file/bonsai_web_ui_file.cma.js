// Generated by js_of_ocaml
//# buildInfo:effects=false, kind=cma, use-js-string=true, version=5.6.0

//# unitInfo: Provides: Bonsai_web_ui_file
//# unitInfo: Requires: Bonsai, Core, Core__Bigstring, Core__Error, Core__Filename, Core__Int, Core__Option, Core__Or_error, Core__Percent, Core__Queue, Core__Result, Core__String, Ppx_bench_lib__Benchmark_accumulator, Ppx_expect_runtime, Ppx_inline_test_lib, Ppx_module_timer_runtime, Ppx_string_runtime, Sexplib0__Sexp_conv, Sexplib0__Sexp_conv_error, Sexplib0__Sexp_conv_record, Ui_effect, Ui_incr
(function
  (globalThis){
   "use strict";
   var
    runtime = globalThis.jsoo_runtime,
    cst_Aborted = "Aborted",
    cst_Bonsai_web_ui_file$0 = "Bonsai_web_ui_file",
    cst_Error = "Error",
    cst_aborted = "aborted",
    cst_bonsai_web_ui_file$0 = "bonsai_web_ui_file",
    cst_error = "error",
    cst_loaded$0 = "loaded",
    cst_total$0 = "total",
    cst_web_ui_file_src_bonsai_web = "web_ui/file/src/bonsai_web_ui_file.ml",
    caml_maybe_attach_backtrace = runtime.caml_maybe_attach_backtrace,
    caml_ml_string_length = runtime.caml_ml_string_length,
    caml_string_notequal = runtime.caml_string_notequal;
   function caml_call1(f, a0){
    return (f.l >= 0 ? f.l : f.l = f.length) == 1
            ? f(a0)
            : runtime.caml_call_gen(f, [a0]);
   }
   function caml_call2(f, a0, a1){
    return (f.l >= 0 ? f.l : f.l = f.length) == 2
            ? f(a0, a1)
            : runtime.caml_call_gen(f, [a0, a1]);
   }
   function caml_call3(f, a0, a1, a2){
    return (f.l >= 0 ? f.l : f.l = f.length) == 3
            ? f(a0, a1, a2)
            : runtime.caml_call_gen(f, [a0, a1, a2]);
   }
   function caml_call4(f, a0, a1, a2, a3){
    return (f.l >= 0 ? f.l : f.l = f.length) == 4
            ? f(a0, a1, a2, a3)
            : runtime.caml_call_gen(f, [a0, a1, a2, a3]);
   }
   function caml_call5(f, a0, a1, a2, a3, a4){
    return (f.l >= 0 ? f.l : f.l = f.length) == 5
            ? f(a0, a1, a2, a3, a4)
            : runtime.caml_call_gen(f, [a0, a1, a2, a3, a4]);
   }
   function caml_call6(f, a0, a1, a2, a3, a4, a5){
    return (f.l >= 0 ? f.l : f.l = f.length) == 6
            ? f(a0, a1, a2, a3, a4, a5)
            : runtime.caml_call_gen(f, [a0, a1, a2, a3, a4, a5]);
   }
   function caml_call7(f, a0, a1, a2, a3, a4, a5, a6){
    return (f.l >= 0 ? f.l : f.l = f.length) == 7
            ? f(a0, a1, a2, a3, a4, a5, a6)
            : runtime.caml_call_gen(f, [a0, a1, a2, a3, a4, a5, a6]);
   }
   var
    global_data = runtime.caml_get_global_data(),
    cst = ">",
    error_source_006 = "web_ui/file/src/bonsai_web_ui_file.ml.Progress.t",
    error_source_068 = "web_ui/file/src/bonsai_web_ui_file.ml.Read_error.t",
    Assert_failure = global_data.Assert_failure,
    Core_Option = global_data.Core__Option,
    Bonsai = global_data.Bonsai,
    Ui_incr = global_data.Ui_incr,
    Core_Filename = global_data.Core__Filename,
    Ui_effect = global_data.Ui_effect,
    Sexplib0_Sexp_conv_error = global_data.Sexplib0__Sexp_conv_error,
    Sexplib0_Sexp_conv_record = global_data.Sexplib0__Sexp_conv_record,
    Core_Bigstring = global_data.Core__Bigstring,
    Core_Or_error = global_data.Core__Or_error,
    Core_Result = global_data.Core__Result,
    Core_Int = global_data.Core__Int,
    Core_Queue = global_data.Core__Queue,
    Core = global_data.Core,
    Sexplib0_Sexp_conv = global_data.Sexplib0__Sexp_conv,
    Ppx_string_runtime = global_data.Ppx_string_runtime,
    Core_String = global_data.Core__String,
    Core_Error = global_data.Core__Error,
    Core_Percent = global_data.Core__Percent,
    Ppx_module_timer_runtime = global_data.Ppx_module_timer_runtime,
    Ppx_bench_lib_Benchmark_accumu =
      global_data.Ppx_bench_lib__Benchmark_accumulator,
    Ppx_expect_runtime = global_data.Ppx_expect_runtime,
    Ppx_inline_test_lib = global_data.Ppx_inline_test_lib;
   caml_call1(Ppx_module_timer_runtime[4], cst_Bonsai_web_ui_file$0);
   caml_call1(Ppx_bench_lib_Benchmark_accumu[1][1], cst_bonsai_web_ui_file$0);
   caml_call1(Ppx_expect_runtime[1][1], cst_web_ui_file_src_bonsai_web);
   caml_call2
    (Ppx_inline_test_lib[6],
     cst_bonsai_web_ui_file$0,
     "bonsai_web_ui_file.ml");
   var
    _M_ = [0, cst_web_ui_file_src_bonsai_web, 341, 4],
    _P_ = [0, cst_web_ui_file_src_bonsai_web, 341, 4],
    _N_ = [0, [0, cst_web_ui_file_src_bonsai_web, 341, 9723, 9727]],
    _O_ = [0, [0, cst_web_ui_file_src_bonsai_web, 341, 9723, 9727]],
    _Q_ = [0, cst_web_ui_file_src_bonsai_web, 342, 9747, 9753],
    _R_ = [0, [0, cst_web_ui_file_src_bonsai_web, 341, 9723, 9727]],
    _K_ = [0, [0, cst_web_ui_file_src_bonsai_web, 335, 9591, 9595]],
    _L_ = [0, [0, cst_web_ui_file_src_bonsai_web, 334, 9549, 9553]],
    _I_ = [0, [0, cst_web_ui_file_src_bonsai_web, 324, 9210, 9220]],
    _J_ = [0, [0, cst_web_ui_file_src_bonsai_web, 311, 8485, 8489]],
    _w_ = [0, [0, cst_web_ui_file_src_bonsai_web, 286, 7623, 7627]],
    _x_ = [0, [0, cst_web_ui_file_src_bonsai_web, 286, 7623, 7627]],
    _y_ = [0, [0, cst_web_ui_file_src_bonsai_web, 286, 7623, 7627]],
    _z_ = [0, [0, cst_web_ui_file_src_bonsai_web, 282, 7480, 7484]],
    _A_ = [0, [0, cst_web_ui_file_src_bonsai_web, 282, 7480, 7484]],
    _B_ = [0, [0, cst_web_ui_file_src_bonsai_web, 283, 7497, 7503]],
    _C_ = [0, [0, cst_web_ui_file_src_bonsai_web, 282, 7480, 7484]],
    _D_ = [0, [0, cst_web_ui_file_src_bonsai_web, 273, 7177, 7181]],
    _E_ = [0, [0, cst_web_ui_file_src_bonsai_web, 273, 7177, 7181]],
    _F_ = [0, [0, cst_web_ui_file_src_bonsai_web, 273, 7177, 7181]],
    _G_ = [0, [0, cst_web_ui_file_src_bonsai_web, 273, 7177, 7181]],
    _H_ = [0, [0, cst_web_ui_file_src_bonsai_web, 273, 7177, 7181]],
    _q_ = [0, cst_web_ui_file_src_bonsai_web, 266, 6],
    _t_ = [0, cst_web_ui_file_src_bonsai_web, 266, 6],
    _r_ = [0, [0, cst_web_ui_file_src_bonsai_web, 266, 6965, 6971]],
    _s_ = [0, [0, cst_web_ui_file_src_bonsai_web, 266, 6965, 6971]],
    _u_ = [0, cst_web_ui_file_src_bonsai_web, 267, 6988, 6996],
    _v_ = [0, [0, cst_web_ui_file_src_bonsai_web, 266, 6965, 6971]],
    _o_ = [0, "Start_read"],
    _p_ = [0, "Set_status"],
    _k_ = [0, "status"],
    _l_ = [0, "file_read"],
    _m_ = [0, "Reading"],
    _n_ = [0, "Before_first_read"],
    _h_ = [0, "Starting"],
    _i_ = [0, "In_progress"],
    _j_ = [0, "Complete"],
    _g_ = [1, 0],
    _f_ = [0, cst_web_ui_file_src_bonsai_web, 158, 8],
    cst_Bonsai_web_ui_file_Test_da =
      "Bonsai_web_ui_file.Test_data.feed: already closed",
    _e_ = [0, cst_web_ui_file_src_bonsai_web, 50, 21],
    cst_file = "<file ",
    _c_ = [0, cst_Error],
    _d_ = [0, cst_Aborted],
    _a_ = [0, cst_total$0],
    _b_ = [0, cst_loaded$0],
    cst_total = cst_total$0,
    cst_loaded = cst_loaded$0,
    cst_bonsai_web_ui_file = cst_bonsai_web_ui_file$0,
    cst_Bonsai_web_ui_file = cst_Bonsai_web_ui_file$0;
   function compare(a_001, b_002){
    if(a_001 === b_002) return 0;
    var n = caml_call2(Core[382], a_001[1], b_002[1]);
    return 0 === n ? caml_call2(Core[382], a_001[2], b_002[2]) : n;
   }
   function equal(a_003, b_004){
    if(a_003 === b_004) return 1;
    var _bT_ = caml_call2(Core[384], a_003[1], b_004[1]);
    return _bT_ ? caml_call2(Core[384], a_003[2], b_004[2]) : _bT_;
   }
   function t_of_sexp(x_007){
    function _bQ_(param){
     var total = param[2][1], loaded = param[1];
     return [0, loaded, total];
    }
    var _bR_ = 0;
    function _bS_(param){
     return caml_string_notequal(param, cst_loaded$0)
             ? caml_string_notequal(param, cst_total$0) ? -1 : 1
             : 0;
    }
    return caml_call6
            (Sexplib0_Sexp_conv_record[3],
             error_source_006,
             [0, cst_loaded, 1, Core[390], [0, cst_total, 1, Core[390], 0]],
             _bS_,
             _bR_,
             _bQ_,
             x_007);
   }
   function sexp_of_t(param){
    var
     total_011 = param[2],
     loaded_009 = param[1],
     arg_012 = caml_call1(Core[389], total_011),
     bnds_008 = [0, [1, [0, _a_, [0, arg_012, 0]]], 0],
     arg_010 = caml_call1(Core[389], loaded_009),
     bnds_008$0 = [0, [1, [0, _b_, [0, arg_010, 0]]], bnds_008];
    return [1, bnds_008$0];
   }
   function to_percentage(param){
    var total = param[2], loaded = param[1];
    return caml_call1(Core_Percent[76], loaded / total);
   }
   var Progress = [0, compare, equal, t_of_sexp, sexp_of_t, to_percentage];
   function compare$0(a_058, b_059){
    if(a_058 === b_059) return 0;
    if(! a_058) return b_059 ? -1 : 0;
    if(! b_059) return 1;
    var b_061 = b_059[1], a_060 = a_058[1];
    return caml_call2(Core_Error[1], a_060, b_061);
   }
   function equal$0(a_062, b_063){
    if(a_062 === b_063) return 1;
    if(! a_062) return b_063 ? 0 : 1;
    if(! b_063) return 0;
    var b_065 = b_063[1], a_064 = a_062[1];
    return caml_call2(Core_Error[3], a_064, b_065);
   }
   function t_of_sexp$0(sexp_070){
    a:
    {
     if(0 === sexp_070[0]){
      var _bN_ = sexp_070[1];
      b:
      if(caml_string_notequal(_bN_, cst_Aborted)){
       if(caml_string_notequal(_bN_, cst_Error)){
        if(! caml_string_notequal(_bN_, cst_aborted)) break b;
        if(caml_string_notequal(_bN_, cst_error)) break a;
       }
       return caml_call2
               (Sexplib0_Sexp_conv_error[9], error_source_068, sexp_070);
      }
      return 0;
     }
     var _bO_ = sexp_070[1];
     if(! _bO_)
      return caml_call2
              (Sexplib0_Sexp_conv_error[11], error_source_068, sexp_070);
     var _bP_ = _bO_[1];
     if(0 !== _bP_[0])
      return caml_call2
              (Sexplib0_Sexp_conv_error[10], error_source_068, sexp_070);
     var tag_071 = _bP_[1];
     b:
     if(caml_string_notequal(tag_071, cst_Aborted)){
      if(caml_string_notequal(tag_071, cst_Error)){
       if(! caml_string_notequal(tag_071, cst_aborted)) break b;
       if(caml_string_notequal(tag_071, cst_error)) break a;
      }
      var sexp_args_072 = _bO_[2];
      if(sexp_args_072 && ! sexp_args_072[2]){
       var
        arg0_073 = sexp_args_072[1],
        res0_074 = caml_call1(Core_Error[8], arg0_073);
       return [0, res0_074];
      }
      return caml_call3
              (Sexplib0_Sexp_conv_error[8],
               error_source_068,
               tag_071,
               sexp_070);
     }
     return caml_call2
             (Sexplib0_Sexp_conv_error[7], error_source_068, sexp_070);
    }
    return caml_call2
            (Sexplib0_Sexp_conv_error[12], error_source_068, sexp_070);
   }
   function sexp_of_t$0(param){
    if(! param) return _d_;
    var arg0_075 = param[1], res0_076 = caml_call1(Core_Error[9], arg0_075);
    return [1, [0, _c_, [0, res0_076, 0]]];
   }
   var Read_error = [0, compare$0, equal$0, t_of_sexp$0, sexp_of_t$0];
   function abort(r){return r[2];}
   function result(r){return r[1];}
   function filename(r){return r[2];}
   function create(read, filename){return [0, read, filename];}
   function sexp_of_t$1(t){
    var
     _bJ_ = [0, caml_call1(Ppx_string_runtime[1][2], cst), 0],
     _bK_ = caml_call1(Core_String[137], t[2]),
     _bL_ = [0, caml_call1(Ppx_string_runtime[1][3], _bK_), _bJ_],
     _bM_ = [0, caml_call1(Ppx_string_runtime[1][2], cst_file), _bL_];
    return [0, caml_call1(Ppx_string_runtime[1][4], _bM_)];
   }
   function read(opt, t){
    if(opt)
     var sth = opt[1], on_progress = sth;
    else
     var on_progress = function(progress){return Ui_effect[1];};
    return caml_call1(t[1], on_progress);
   }
   function contents(t){
    function _bG_(param){
     if(0 === param[0]){var contents = param[1]; return [0, contents];}
     var match = param[1];
     if(! match)
      throw caml_maybe_attach_backtrace([0, Assert_failure, _e_], 1);
     var e = match[1];
     return [1, e];
    }
    var _bH_ = read(0, t), _bI_ = caml_call2(Ui_effect[13][2], _bH_, result);
    return caml_call2(Ui_effect[13][4][3], _bI_, _bG_);
   }
   var Expert = [0, create];
   function iter(t, f){
    if(typeof t === "number") return 0;
    var callbacks = t[1];
    return caml_call1(f, callbacks);
   }
   function create_stream(filename, total_bytes){
    return [0,
            filename,
            [1, caml_call2(Core_Queue[66], 0, 0), total_bytes],
            0];
   }
   function create_static(filename, contents){
    return [0,
            filename,
            [0, [0, caml_call3(Core_Bigstring[14], 0, 0, contents)]],
            0];
   }
   function read_status(t){
    var _bF_ = t[3];
    return typeof _bF_ === "number"
            ? _bF_ ? -216426513 : -166948672
            : -801955028;
   }
   function feed_exn(t, chunk){
    var match = t[2];
    if(0 === match[0]){
     var
      _bz_ = caml_call1(Sexplib0_Sexp_conv[7], cst_Bonsai_web_ui_file_Test_da);
     return caml_call1(Core[261], _bz_);
    }
    var total_bytes = match[2], chunks = match[1];
    caml_call2(Core_Queue[43], chunks, chunk);
    var _bA_ = caml_ml_string_length;
    function _bB_(_bE_, _bD_){return _bE_ + _bD_ | 0;}
    var
     progress =
       [0,
        caml_call3(Core_Queue[25], [0, Core_Int[59], _bB_], chunks, _bA_),
        total_bytes];
    function _bC_(read){return caml_call1(read[1], progress);}
    return iter(t[3], _bC_);
   }
   function close(t){
    var match = t[2];
    if(0 === match[0]) return 0;
    var chunks = match[1], _br_ = caml_ml_string_length;
    function _bs_(_by_, _bx_){return _by_ + _bx_ | 0;}
    var
     _bt_ = caml_call3(Core_Queue[25], [0, Core_Int[59], _bs_], chunks, _br_),
     result = caml_call1(Core_Bigstring[121], _bt_);
    function _bu_(dst_pos, src){
     caml_call5
      (Core_Bigstring[29][1],
       src,
       0,
       result,
       dst_pos,
       caml_ml_string_length(src));
     return dst_pos + caml_ml_string_length(src) | 0;
    }
    var
     len = caml_call3(Core_Queue[19], chunks, 0, _bu_),
     _bv_ = caml_call1(Core_Bigstring[21], result);
    if(! caml_call2(Core[90], _bv_, len))
     throw caml_maybe_attach_backtrace([0, Assert_failure, _f_], 1);
    var result$0 = [0, result];
    t[2] = [0, result$0];
    function _bw_(read){return caml_call1(read[2], result$0);}
    return iter(t[3], _bw_);
   }
   function close_error(t, error){
    if(0 === t[2][0]) return 0;
    var result = [1, error];
    t[2] = [0, result];
    function _bq_(read){return caml_call1(read[2], result);}
    return iter(t[3], _bq_);
   }
   function create$0(test_data){
    function read(on_progress){
     var result_var = caml_call1(Ui_effect[23][1][1], 0), _bd_ = 0;
     function _be_(param){
      function _bk_(result){
       function _bo_(e){return [0, e];}
       var _bp_ = caml_call2(Core_Result[47], result, _bo_);
       return caml_call2(Ui_effect[23][1][3], result_var, _bp_);
      }
      var
       read =
         [0,
          function(progress){
           var _bn_ = caml_call1(on_progress, progress);
           return caml_call1(Ui_effect[21][2], _bn_);
          },
          _bk_],
       match = test_data[2];
      if(0 === match[0]){
       var result = match[1];
       caml_call1(read[2], result);
      }
      else{
       var
        total_bytes = match[2],
        chunks = match[1],
        _bh_ = caml_ml_string_length,
        _bi_ = function(_bm_, _bl_){return _bm_ + _bl_ | 0;},
        _bj_ =
          [0,
           caml_call3(Core_Queue[25], [0, Core_Int[59], _bi_], chunks, _bh_),
           total_bytes];
       caml_call1(read[1], _bj_);
      }
      test_data[3] = [0, read];
      return result_var;
     }
     var result = caml_call2(Ui_effect[23][2], _be_, _bd_), _bf_ = 0;
     function _bg_(param){
      test_data[3] = 1;
      return caml_call2(Ui_effect[23][1][3], result_var, _g_);
     }
     var abort = caml_call2(Ui_effect[17], _bg_, _bf_);
     return [0, result, abort];
    }
    var _bc_ = test_data[1];
    return [0, caml_call1(Ui_effect[17], read), _bc_];
   }
   var
    sexp_of_t$2 = Sexplib0_Sexp_conv[23],
    sexp_of_t$3 = Sexplib0_Sexp_conv[23];
   function sexp_of_t$4(param){
    if(typeof param === "number") return _h_;
    if(0 === param[0]){
     var arg0_109 = param[1], res0_110 = caml_call1(Progress[4], arg0_109);
     return [1, [0, _i_, [0, res0_110, 0]]];
    }
    var
     arg0_111 = param[1],
     res0_112 = caml_call2(Core_Or_error[17], Core_Bigstring[6], arg0_111);
    return [1, [0, _j_, [0, res0_112, 0]]];
   }
   function sexp_of_t$5(param){
    if(! param) return _n_;
    var
     status_126 = param[2],
     file_read_124 = param[1],
     arg_127 = sexp_of_t$4(status_126),
     bnds_123 = [0, [1, [0, _k_, [0, arg_127, 0]]], 0],
     arg_125 = caml_call1(sexp_of_t$3, file_read_124),
     bnds_123$0 = [0, [1, [0, _l_, [0, arg_125, 0]]], bnds_123];
    return [1, [0, _m_, bnds_123$0]];
   }
   function sexp_of_t$6(param){
    if(0 === param[0]){
     var arg0_148 = param[1], res0_149 = caml_call1(sexp_of_t$3, arg0_148);
     return [1, [0, _o_, [0, res0_149, 0]]];
    }
    var arg0_150 = param[1], res0_151 = sexp_of_t$4(arg0_150);
    return [1, [0, _p_, [0, res0_151, 0]]];
   }
   function apply_action(context, t, action){
    if(0 !== action[0]){
     var status = action[1];
     if(! t) return t;
     var file_read$0 = t[1];
     return [0, file_read$0, status];
    }
    var file_read = action[1];
    if(t){
     var old_file_read = t[1];
     caml_call2(Bonsai[16][2], context, old_file_read[2]);
    }
    return [0, file_read, 0];
   }
   function create_helper(file){
    function _as_(pattern_syntax_154){
     function _az_(state){
      function _aD_(inject){
       function _aK_(pattern_syntax_159){
        function _aW_(param){
         function _a0_(pattern_syntax_161){
          function _a__(param){return caml_call1(Bonsai[6], state);}
          function _a$_(param){return 0;}
          var
           _ba_ = caml_call3(Bonsai[49][5][4], _w_, pattern_syntax_161, _a$_),
           _bb_ = caml_call1(Bonsai[49][5][6], _ba_);
          return caml_call3(Bonsai[49][5][1], _x_, _bb_, _a__);
         }
         function _a1_(inject, file){
          function _a5_(file_read){
           function _a7_(param){
            function _a9_(param){
             if(0 === param[0]){
              var contents = param[1];
              return caml_call1(inject, [1, [1, [0, contents]]]);
             }
             var match = param[1];
             if(! match) return caml_call1(Ui_effect[13][1], 0);
             var e = match[1];
             return caml_call1(inject, [1, [1, [1, e]]]);
            }
            return caml_call2(Ui_effect[13][4][2], file_read[1], _a9_);
           }
           var _a8_ = caml_call1(inject, [0, file_read]);
           return caml_call2(Ui_effect[13][4][2], _a8_, _a7_);
          }
          var
           _a6_ =
             read
              ([0,
                function(progress){
                 return caml_call1(inject, [1, [0, progress]]);
                }],
               file);
          return caml_call2(Ui_effect[13][4][2], _a6_, _a5_);
         }
         var _a2_ = caml_call3(Bonsai[49][5][4], 0, inject, _a1_);
         function _a3_(a_162, b_163){return a_162 === b_163 ? 1 : 0;}
         var
          _a4_ = caml_call4(Bonsai[44][1], [0, sexp_of_t$2], _a3_, file, _a2_);
         return caml_call3(Bonsai[49][5][1], _y_, _a4_, _a0_);
        }
        function _aX_(param){return 0;}
        var
         _aY_ = caml_call3(Bonsai[49][5][4], _z_, pattern_syntax_159, _aX_),
         _aZ_ = caml_call1(Bonsai[49][5][6], _aY_);
        return caml_call3(Bonsai[49][5][1], _A_, _aZ_, _aW_);
       }
       function _aL_(abort){
        return caml_call4(Bonsai[44][3], 0, [0, abort], 0, 0);
       }
       function _aH_(pattern_syntax_152){
        function _aN_(param){
         if(0 === param) return caml_call1(Bonsai[7], Ui_effect[1]);
         if(1 !== param)
          throw caml_maybe_attach_backtrace([0, Assert_failure, _t_], 1);
         function _aR_(file_read){
          var _aV_ = caml_call2(Bonsai[49][2], file_read, abort);
          return caml_call1(Bonsai[6], _aV_);
         }
         function _aS_(param){
          if(! param)
           throw caml_maybe_attach_backtrace([0, Assert_failure, _q_], 1);
          var pattern_syntax_153 = param[1];
          return pattern_syntax_153;
         }
         var
          _aT_ = caml_call3(Bonsai[49][5][4], _r_, pattern_syntax_152, _aS_),
          _aU_ = caml_call1(Bonsai[49][5][6], _aT_);
         return caml_call3(Bonsai[49][5][1], _s_, _aU_, _aR_);
        }
        var _aO_ = 2;
        function _aP_(param){return param ? 1 : 0;}
        var _aQ_ = caml_call3(Bonsai[49][5][4], 0, pattern_syntax_152, _aP_);
        return caml_call4(Bonsai[49][5][3], _u_, _aQ_, _aO_, _aN_);
       }
       var
        _aI_ = caml_call1(Bonsai[49][5][6], state),
        _aJ_ = caml_call3(Bonsai[49][5][1], _v_, _aI_, _aH_),
        _aM_ = caml_call3(Bonsai[49][5][1], _B_, _aJ_, _aL_);
       return caml_call3(Bonsai[49][5][1], _C_, _aM_, _aK_);
      }
      function _aE_(param){
       var pattern_syntax_155 = param[2];
       return pattern_syntax_155;
      }
      var
       _aF_ = caml_call3(Bonsai[49][5][4], _D_, pattern_syntax_154, _aE_),
       _aG_ = caml_call1(Bonsai[49][5][6], _aF_);
      return caml_call3(Bonsai[49][5][1], _E_, _aG_, _aD_);
     }
     function _aA_(param){
      var pattern_syntax_156 = param[1];
      return pattern_syntax_156;
     }
     var
      _aB_ = caml_call3(Bonsai[49][5][4], _F_, pattern_syntax_154, _aA_),
      _aC_ = caml_call1(Bonsai[49][5][6], _aB_);
     return caml_call3(Bonsai[49][5][1], _G_, _aC_, _az_);
    }
    var
     _at_ = 0,
     _au_ = 0,
     _av_ =
       [0,
        function(a_157, b_158){
         if(a_157 === b_158) return 1;
         if(! a_157) return b_158 ? 0 : 1;
         if(! b_158) return 0;
         var _ay_ = a_157[1] === b_158[1] ? 1 : 0;
         if(! _ay_) return _ay_;
         var b_088 = b_158[2], a_087 = a_157[2];
         if(a_087 === b_088) return 1;
         if(typeof a_087 === "number")
          return typeof b_088 === "number" ? 1 : 0;
         if(0 === a_087[0]){
          var a_089 = a_087[1];
          if(typeof b_088 !== "number"){
           if(0 !== b_088[0]) return 0;
           var b_090 = b_088[1];
           return caml_call2(Progress[2], a_089, b_090);
          }
         }
         else{
          var a_091 = a_087[1];
          if(typeof b_088 !== "number"){
           if(0 === b_088[0]) return 0;
           var
            b_092 = b_088[1],
            _ax_ =
              function(a_093, b_094){
               return caml_call2(Core_Bigstring[12], a_093, b_094);
              };
           return caml_call3(Core_Or_error[12], _ax_, a_091, b_092);
          }
         }
         return 0;
        }],
     _aw_ =
       caml_call7
        (Bonsai[17],
         0,
         [0, sexp_of_t$5],
         [0, sexp_of_t$6],
         _av_,
         _au_,
         apply_action,
         _at_);
    return caml_call3(Bonsai[49][5][1], _H_, _aw_, _as_);
   }
   function create_multiple(files){
    function _ah_(file_states){
     var _ao_ = Ui_incr[82][4];
     function _ap_(_ar_){return _ar_;}
     function _aq_(eta){return caml_call4(_ao_, 0, 0, eta, _ap_);}
     return caml_call2(Bonsai[48][2], file_states, _aq_);
    }
    function _ai_(filename, file){
     function _ak_(reading){
      function _am_(param){
       if(! param) return 0;
       var status = param[2];
       return [0, status];
      }
      var _an_ = caml_call3(Bonsai[49][5][4], 0, reading, _am_);
      return caml_call1(Bonsai[6], _an_);
     }
     var _al_ = create_helper(file);
     return caml_call3(Bonsai[49][5][1], _I_, _al_, _ak_);
    }
    var
     _aj_ =
       caml_call3
        (Bonsai[34], [0, Core_Filename[2], Core_Filename[58]], files, _ai_);
    return caml_call3(Bonsai[49][5][1], _J_, _aj_, _ah_);
   }
   function create_single(file){
    function _ac_(state){
     function _ae_(param){
      var state = param[2], file = param[1];
      if(state) var status = state[2], _ag_ = status; else var _ag_ = 0;
      return [0, file[2], _ag_];
     }
     var _af_ = caml_call2(Bonsai[49][5][7], file, state);
     return caml_call3(Bonsai[49][5][8], _K_, _af_, _ae_);
    }
    var _ad_ = create_helper(file);
    return caml_call3(Bonsai[49][5][1], _L_, _ad_, _ac_);
   }
   function create_single_opt(file){
    function _S_(pattern_syntax_173){
     function _U_(param){
      if(0 === param) return caml_call1(Bonsai[7], 0);
      if(1 !== param)
       throw caml_maybe_attach_backtrace([0, Assert_failure, _P_], 1);
      function _Y_(file){
       var _aa_ = Core_Option[58], _ab_ = create_single(file);
       return caml_call2(Bonsai[3][2], _ab_, _aa_);
      }
      function _Z_(param){
       if(! param)
        throw caml_maybe_attach_backtrace([0, Assert_failure, _M_], 1);
       var pattern_syntax_174 = param[1];
       return pattern_syntax_174;
      }
      var
       ___ = caml_call3(Bonsai[49][5][4], _N_, pattern_syntax_173, _Z_),
       _$_ = caml_call1(Bonsai[49][5][6], ___);
      return caml_call3(Bonsai[49][5][1], _O_, _$_, _Y_);
     }
     var _V_ = 2;
     function _W_(param){return param ? 1 : 0;}
     var _X_ = caml_call3(Bonsai[49][5][4], 0, pattern_syntax_173, _W_);
     return caml_call4(Bonsai[49][5][3], _Q_, _X_, _V_, _U_);
    }
    var _T_ = caml_call1(Bonsai[49][5][6], file);
    return caml_call3(Bonsai[49][5][1], _R_, _T_, _S_);
   }
   caml_call1(Ppx_inline_test_lib[7], cst_bonsai_web_ui_file);
   caml_call1(Ppx_expect_runtime[1][2], 0);
   caml_call1(Ppx_bench_lib_Benchmark_accumu[1][2], 0);
   caml_call1(Ppx_module_timer_runtime[5], cst_Bonsai_web_ui_file);
   var
    Bonsai_web_ui_file =
      [0,
       sexp_of_t$1,
       filename,
       contents,
       Progress,
       Read_error,
       [0, result, abort],
       read,
       [0,
        [0, sexp_of_t$4],
        create_single,
        create_single_opt,
        create_multiple],
       [0,
        [0,
         create_static,
         create_stream,
         feed_exn,
         close,
         close_error,
         read_status],
        create$0],
       Expert];
   runtime.caml_register_global
    (144, Bonsai_web_ui_file, cst_Bonsai_web_ui_file$0);
   return;
  }
  (globalThis));

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLjAsImZpbGUiOiJib25zYWlfd2ViX3VpX2ZpbGUuY21hLmpzIiwic291cmNlUm9vdCI6IiIsIm5hbWVzIjpbImVycm9yX3NvdXJjZV8wMDYiLCJlcnJvcl9zb3VyY2VfMDY4IiwiY29tcGFyZSIsImFfMDAxIiwiYl8wMDIiLCJuIiwiZXF1YWwiLCJhXzAwMyIsImJfMDA0IiwidF9vZl9zZXhwIiwieF8wMDciLCJ0b3RhbCIsImxvYWRlZCIsInNleHBfb2ZfdCIsInRvdGFsXzAxMSIsImxvYWRlZF8wMDkiLCJhcmdfMDEyIiwiYm5kc18wMDgiLCJhcmdfMDEwIiwiYm5kc18wMDgkMCIsInRvX3BlcmNlbnRhZ2UiLCJjb21wYXJlJDAiLCJhXzA1OCIsImJfMDU5IiwiYl8wNjEiLCJhXzA2MCIsImVxdWFsJDAiLCJhXzA2MiIsImJfMDYzIiwiYl8wNjUiLCJhXzA2NCIsInRfb2Zfc2V4cCQwIiwic2V4cF8wNzAiLCJ0YWdfMDcxIiwic2V4cF9hcmdzXzA3MiIsImFyZzBfMDczIiwicmVzMF8wNzQiLCJzZXhwX29mX3QkMCIsImFyZzBfMDc1IiwicmVzMF8wNzYiLCJhYm9ydCIsInIiLCJyZXN1bHQiLCJmaWxlbmFtZSIsImNyZWF0ZSIsInJlYWQiLCJzZXhwX29mX3QkMSIsInQiLCJvcHQiLCJzdGgiLCJvbl9wcm9ncmVzcyIsInByb2dyZXNzIiwiY29udGVudHMiLCJlIiwiaXRlciIsImYiLCJjYWxsYmFja3MiLCJjcmVhdGVfc3RyZWFtIiwidG90YWxfYnl0ZXMiLCJjcmVhdGVfc3RhdGljIiwicmVhZF9zdGF0dXMiLCJmZWVkX2V4biIsImNodW5rIiwiY2h1bmtzIiwiY2xvc2UiLCJkc3RfcG9zIiwic3JjIiwibGVuIiwicmVzdWx0JDAiLCJjbG9zZV9lcnJvciIsImVycm9yIiwiY3JlYXRlJDAiLCJ0ZXN0X2RhdGEiLCJyZXN1bHRfdmFyIiwic2V4cF9vZl90JDIiLCJzZXhwX29mX3QkMyIsInNleHBfb2ZfdCQ0IiwiYXJnMF8xMDkiLCJyZXMwXzExMCIsImFyZzBfMTExIiwicmVzMF8xMTIiLCJzZXhwX29mX3QkNSIsInN0YXR1c18xMjYiLCJmaWxlX3JlYWRfMTI0IiwiYXJnXzEyNyIsImJuZHNfMTIzIiwiYXJnXzEyNSIsImJuZHNfMTIzJDAiLCJzZXhwX29mX3QkNiIsImFyZzBfMTQ4IiwicmVzMF8xNDkiLCJhcmcwXzE1MCIsInJlczBfMTUxIiwiYXBwbHlfYWN0aW9uIiwiY29udGV4dCIsImFjdGlvbiIsInN0YXR1cyIsImZpbGVfcmVhZCQwIiwiZmlsZV9yZWFkIiwib2xkX2ZpbGVfcmVhZCIsImNyZWF0ZV9oZWxwZXIiLCJmaWxlIiwicGF0dGVybl9zeW50YXhfMTU0Iiwic3RhdGUiLCJpbmplY3QiLCJwYXR0ZXJuX3N5bnRheF8xNTkiLCJwYXR0ZXJuX3N5bnRheF8xNjEiLCJhXzE2MiIsImJfMTYzIiwicGF0dGVybl9zeW50YXhfMTUyIiwicGF0dGVybl9zeW50YXhfMTUzIiwicGF0dGVybl9zeW50YXhfMTU1IiwicGF0dGVybl9zeW50YXhfMTU2IiwiYV8xNTciLCJiXzE1OCIsImJfMDg4IiwiYV8wODciLCJhXzA4OSIsImJfMDkwIiwiYV8wOTEiLCJiXzA5MiIsImFfMDkzIiwiYl8wOTQiLCJjcmVhdGVfbXVsdGlwbGUiLCJmaWxlcyIsImZpbGVfc3RhdGVzIiwicmVhZGluZyIsImNyZWF0ZV9zaW5nbGUiLCJjcmVhdGVfc2luZ2xlX29wdCIsInBhdHRlcm5fc3ludGF4XzE3MyIsInBhdHRlcm5fc3ludGF4XzE3NCJdLCJzb3VyY2VzIjpbIi9ob21lL2xpYW0tY2FycGVudGVyLy5vcGFtL3BlcnNvbmFsLXNpdGUvbGliL2JvbnNhaS93ZWJfdWlfZmlsZS9ib25zYWlfd2ViX3VpX2ZpbGUubWwiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Rzs7Ozs7Rzs7Ozs7Rzs7Ozs7Rzs7Ozs7Rzs7Ozs7Rzs7Ozs7Rzs7Ozs7Ozs7SUFJRUE7SUFrQkFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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N0NGdkM7YUFjRU87OztTQU1FSzs7OztZQTZERjhCLGdCQUFnQkM7a0JBQ1ZDO0tBbUJSO3lCO3dCQUE4RCxPQUFBO3NDQW5CdERBO0lBbUI0RDtrQkFQeERsRixVQUFVMEQ7bUJBQ1J5QjtNQUNSO08sWUFFcUM7V0FDdEI5QjtPQUEyQixXQUEzQkE7O2lEQUpQOEI7O0tBSThDO0tBSnBDLFdBcER0QjFCLGNBbURvQkM7OztJQUhwQjs7T0FBQTsrREFWZ0J1Qjs7O1lBdUJoQkcsY0FBYzFCO2tCQUNSRTs7VUFFSkEsa0JBRElGO1NBQ0pFLFdBakdVUCxTQWlHVk8saUJBakdVUDtNQWtHZCxXQUZRSzs7NkNBRlFBLE1BQ1JFOzs7SUFBUSxXQTlEZEgsY0E2RGNDOzs7WUFPZDJCLGtCQUFrQjNCO2lCQUNwQjRCOztNLGdCQUNVLE9BQUE7OzttQkFDSDVCO09BQVEsSUFBQSx3QkFBdUIsT0FWcEMwQixjQVVLMUI7T0FBUSxPQUFBO01BQTBEOztPOztXQUFsRTZCO2NBQUFBOzs7K0NBRlBEOzs7Ozt5QjsrQ0FBQUE7OzsyQ0FEb0I1Qjs7Ozs7Ozs7OztPQXpTcEJ2RDtPQUpBSDtPQU9BUzs7O1dBZkVWLFFBQ0FGO09BWUZLOztZQWlMQStCO1FBZ0hFbUQ7UUFPQUM7UUE5QkFMOzs7U0EvTUVoRTtTQVBBRjtTQWtDQUk7U0FhQUc7U0FxQkFLO1NBdERBVDtRQWdFRlc7Ozs7O0UiLCJzb3VyY2VzQ29udGVudCI6WyJvcGVuIENvcmVcbm9wZW4gQm9uc2FpLkxldF9zeW50YXhcblxubW9kdWxlIFByb2dyZXNzID0gc3RydWN0XG4gIHR5cGUgdCA9XG4gICAgeyBsb2FkZWQgOiBpbnRcbiAgICA7IHRvdGFsIDogaW50XG4gICAgfVxuICBbQEBkZXJpdmluZyBjb21wYXJlLCBlcXVhbCwgc2V4cF1cblxuICBsZXQgdG9fcGVyY2VudGFnZSB7IGxvYWRlZDsgdG90YWwgfSA9IFBlcmNlbnQub2ZfbXVsdCAoZmxvYXQgbG9hZGVkIC8uIGZsb2F0IHRvdGFsKVxuZW5kXG5cbm1vZHVsZSBfID0gc3RydWN0XG4gIHR5cGUgdCA9XG4gICAgfCBDb250ZW50cyBvZiBCaWdzdHJpbmcudFxuICAgIHwgTG9hZGluZyBvZiBQcm9ncmVzcy50IG9wdGlvblxuICAgIHwgRXJyb3Igb2YgRXJyb3IudFxuICBbQEBkZXJpdmluZyBjb21wYXJlLCBlcXVhbCwgc2V4cF1cbmVuZFxuXG5tb2R1bGUgUmVhZF9lcnJvciA9IHN0cnVjdFxuICB0eXBlIHQgPVxuICAgIHwgQWJvcnRlZFxuICAgIHwgRXJyb3Igb2YgRXJyb3IudFxuICBbQEBkZXJpdmluZyBjb21wYXJlLCBlcXVhbCwgc2V4cF1cbmVuZFxuXG5tb2R1bGUgRmlsZV9yZWFkID0gc3RydWN0XG4gIHR5cGUgdCA9XG4gICAgeyByZXN1bHQgOiAoQmlnc3RyaW5nLnQsIFJlYWRfZXJyb3IudCkgUmVzdWx0LnQgVWlfZWZmZWN0LnRcbiAgICA7IGFib3J0IDogdW5pdCBVaV9lZmZlY3QudFxuICAgIH1cbiAgW0BAZGVyaXZpbmcgZmllbGRzIH5nZXR0ZXJzXVxuZW5kXG5cbnR5cGUgdCA9XG4gIHsgcmVhZCA6IChQcm9ncmVzcy50IC0+IHVuaXQgVWlfZWZmZWN0LnQpIC0+IEZpbGVfcmVhZC50IFVpX2VmZmVjdC50XG4gIDsgZmlsZW5hbWUgOiBzdHJpbmdcbiAgfVxuW0BAZGVyaXZpbmcgZmllbGRzIH5nZXR0ZXJzIH5pdGVyYXRvcnM6Y3JlYXRlXVxuXG5sZXQgc2V4cF9vZl90IHQgPSBTZXhwLkF0b20gWyVzdHJpbmcgXCI8ZmlsZSAle2ZpbGVuYW1lIHQjU3RyaW5nfT5cIl1cbmxldCByZWFkID8ob25fcHJvZ3Jlc3MgPSBmdW4gX3Byb2dyZXNzIC0+IFVpX2VmZmVjdC5JZ25vcmUpIHQgPSB0LnJlYWQgb25fcHJvZ3Jlc3NcblxubGV0IGNvbnRlbnRzIHQgPVxuICBsZXQgb3BlbiBVaV9lZmZlY3QuTGV0X3N5bnRheCBpblxuICBtYXRjaCVtYXAgcmVhZCB0ID4+PSBGaWxlX3JlYWQucmVzdWx0IHdpdGhcbiAgfCBPayBjb250ZW50cyAtPiBPayBjb250ZW50c1xuICB8IEVycm9yIEFib3J0ZWQgLT4gYXNzZXJ0IGZhbHNlXG4gIHwgRXJyb3IgKEVycm9yIGUpIC0+IEVycm9yIGVcbjs7XG5cbm1vZHVsZSBFeHBlcnQgPSBzdHJ1Y3RcbiAgdHlwZSBmaWxlX3JlYWQgPSBGaWxlX3JlYWQudCA9XG4gICAgeyByZXN1bHQgOiAoQmlnc3RyaW5nLnQsIFJlYWRfZXJyb3IudCkgUmVzdWx0LnQgVWlfZWZmZWN0LnRcbiAgICA7IGFib3J0IDogdW5pdCBVaV9lZmZlY3QudFxuICAgIH1cblxuICBsZXQgY3JlYXRlID0gRmllbGRzLmNyZWF0ZVxuZW5kXG5cbm1vZHVsZSBGb3JfdGVzdGluZyA9IHN0cnVjdFxuICBtb2R1bGUgVGVzdF9kYXRhID0gc3RydWN0XG4gICAgdHlwZSBkYXRhID1cbiAgICAgIHwgQ2xvc2VkIG9mIEJpZ3N0cmluZy50IE9yX2Vycm9yLnRcbiAgICAgIHwgT3BlbiBvZlxuICAgICAgICAgIHsgY2h1bmtzIDogc3RyaW5nIFF1ZXVlLnRcbiAgICAgICAgICA7IHRvdGFsX2J5dGVzIDogaW50XG4gICAgICAgICAgfVxuXG4gICAgdHlwZSByZWFkX2NhbGxiYWNrcyA9XG4gICAgICB7IG9uX3Byb2dyZXNzIDogUHJvZ3Jlc3MudCAtPiB1bml0XG4gICAgICA7IG9uX2ZpbmlzaGVkIDogQmlnc3RyaW5nLnQgT3JfZXJyb3IudCAtPiB1bml0XG4gICAgICB9XG5cbiAgICBtb2R1bGUgUmVhZF9zdGF0ZSA9IHN0cnVjdFxuICAgICAgdHlwZSB0ID1cbiAgICAgICAgfCBOb3RfcmVhZGluZ1xuICAgICAgICB8IEFib3J0ZWRcbiAgICAgICAgfCBSZWFkaW5nIG9mIHJlYWRfY2FsbGJhY2tzXG5cbiAgICAgIGxldCBpdGVyIHQgfmYgPVxuICAgICAgICBtYXRjaCB0IHdpdGhcbiAgICAgICAgfCBOb3RfcmVhZGluZyB8IEFib3J0ZWQgLT4gKClcbiAgICAgICAgfCBSZWFkaW5nIGNhbGxiYWNrcyAtPiBmIGNhbGxiYWNrc1xuICAgICAgOztcbiAgICBlbmRcblxuICAgIHR5cGUgdCA9XG4gICAgICB7IGZpbGVuYW1lIDogc3RyaW5nXG4gICAgICA7IG11dGFibGUgZGF0YSA6IGRhdGFcbiAgICAgIDsgbXV0YWJsZSByZWFkX3N0YXRlIDogUmVhZF9zdGF0ZS50XG4gICAgICB9XG5cbiAgICBsZXQgY3JlYXRlX3N0cmVhbSB+ZmlsZW5hbWUgfnRvdGFsX2J5dGVzID1cbiAgICAgIHsgZmlsZW5hbWVcbiAgICAgIDsgZGF0YSA9IE9wZW4geyBjaHVua3MgPSBRdWV1ZS5jcmVhdGUgKCk7IHRvdGFsX2J5dGVzIH1cbiAgICAgIDsgcmVhZF9zdGF0ZSA9IE5vdF9yZWFkaW5nXG4gICAgICB9XG4gICAgOztcblxuICAgIGxldCBjcmVhdGVfc3RhdGljIH5maWxlbmFtZSB+Y29udGVudHMgPVxuICAgICAgeyBmaWxlbmFtZVxuICAgICAgOyBkYXRhID0gQ2xvc2VkIChPayAoQmlnc3RyaW5nLm9mX3N0cmluZyBjb250ZW50cykpXG4gICAgICA7IHJlYWRfc3RhdGUgPSBOb3RfcmVhZGluZ1xuICAgICAgfVxuICAgIDs7XG5cbiAgICBsZXQgcmVhZF9zdGF0dXMgdCA9XG4gICAgICBtYXRjaCB0LnJlYWRfc3RhdGUgd2l0aFxuICAgICAgfCBOb3RfcmVhZGluZyAtPiBgTm90X3JlYWRpbmdcbiAgICAgIHwgQWJvcnRlZCAtPiBgQWJvcnRlZFxuICAgICAgfCBSZWFkaW5nIF8gLT4gYFJlYWRpbmdcbiAgICA7O1xuXG4gICAgbGV0IHJlYWQgdCByZWFkID1cbiAgICAgIChtYXRjaCB0LmRhdGEgd2l0aFxuICAgICAgIHwgT3BlbiB7IGNodW5rczsgdG90YWxfYnl0ZXMgfSAtPlxuICAgICAgICAgcmVhZC5vbl9wcm9ncmVzc1xuICAgICAgICAgICB7IFByb2dyZXNzLmxvYWRlZCA9IFF1ZXVlLnN1bSAobW9kdWxlIEludCkgY2h1bmtzIH5mOlN0cmluZy5sZW5ndGhcbiAgICAgICAgICAgOyB0b3RhbCA9IHRvdGFsX2J5dGVzXG4gICAgICAgICAgIH1cbiAgICAgICB8IENsb3NlZCByZXN1bHQgLT4gcmVhZC5vbl9maW5pc2hlZCByZXN1bHQpO1xuICAgICAgdC5yZWFkX3N0YXRlIDwtIFJlYWRpbmcgcmVhZFxuICAgIDs7XG5cbiAgICBsZXQgYWJvcnRfcmVhZCB0ID0gdC5yZWFkX3N0YXRlIDwtIEFib3J0ZWRcblxuICAgIGxldCBmZWVkX2V4biB0IGNodW5rID1cbiAgICAgIG1hdGNoIHQuZGF0YSB3aXRoXG4gICAgICB8IE9wZW4geyBjaHVua3M7IHRvdGFsX2J5dGVzIH0gLT5cbiAgICAgICAgUXVldWUuZW5xdWV1ZSBjaHVua3MgY2h1bms7XG4gICAgICAgIGxldCBwcm9ncmVzcyA9XG4gICAgICAgICAgeyBQcm9ncmVzcy5sb2FkZWQgPSBRdWV1ZS5zdW0gKG1vZHVsZSBJbnQpIGNodW5rcyB+ZjpTdHJpbmcubGVuZ3RoXG4gICAgICAgICAgOyB0b3RhbCA9IHRvdGFsX2J5dGVzXG4gICAgICAgICAgfVxuICAgICAgICBpblxuICAgICAgICBSZWFkX3N0YXRlLml0ZXIgdC5yZWFkX3N0YXRlIH5mOihmdW4gcmVhZCAtPiByZWFkLm9uX3Byb2dyZXNzIHByb2dyZXNzKVxuICAgICAgfCBDbG9zZWQgXyAtPiByYWlzZV9zIFslbWVzc2FnZSBcIkJvbnNhaV93ZWJfdWlfZmlsZS5UZXN0X2RhdGEuZmVlZDogYWxyZWFkeSBjbG9zZWRcIl1cbiAgICA7O1xuXG4gICAgbGV0IGNsb3NlIHQgPVxuICAgICAgbWF0Y2ggdC5kYXRhIHdpdGhcbiAgICAgIHwgQ2xvc2VkIF8gLT4gKClcbiAgICAgIHwgT3BlbiB7IGNodW5rczsgdG90YWxfYnl0ZXMgPSBfIH0gLT5cbiAgICAgICAgbGV0IHJlc3VsdCA9IEJpZ3N0cmluZy5jcmVhdGUgKFF1ZXVlLnN1bSAobW9kdWxlIEludCkgY2h1bmtzIH5mOlN0cmluZy5sZW5ndGgpIGluXG4gICAgICAgIGxldCBsZW4gPVxuICAgICAgICAgIFF1ZXVlLmZvbGQgfmluaXQ6MCBjaHVua3MgfmY6KGZ1biBkc3RfcG9zIHNyYyAtPlxuICAgICAgICAgICAgQmlnc3RyaW5nLkZyb21fc3RyaW5nLmJsaXRcbiAgICAgICAgICAgICAgfnNyY1xuICAgICAgICAgICAgICB+c3JjX3BvczowXG4gICAgICAgICAgICAgIH5kc3Q6cmVzdWx0XG4gICAgICAgICAgICAgIH5kc3RfcG9zXG4gICAgICAgICAgICAgIH5sZW46KFN0cmluZy5sZW5ndGggc3JjKTtcbiAgICAgICAgICAgIGRzdF9wb3MgKyBTdHJpbmcubGVuZ3RoIHNyYylcbiAgICAgICAgaW5cbiAgICAgICAgYXNzZXJ0IChCaWdzdHJpbmcubGVuZ3RoIHJlc3VsdCA9IGxlbik7XG4gICAgICAgIGxldCByZXN1bHQgPSBPayByZXN1bHQgaW5cbiAgICAgICAgdC5kYXRhIDwtIENsb3NlZCByZXN1bHQ7XG4gICAgICAgIFJlYWRfc3RhdGUuaXRlciB0LnJlYWRfc3RhdGUgfmY6KGZ1biByZWFkIC0+IHJlYWQub25fZmluaXNoZWQgcmVzdWx0KVxuICAgIDs7XG5cbiAgICBsZXQgY2xvc2VfZXJyb3IgdCBlcnJvciA9XG4gICAgICBtYXRjaCB0LmRhdGEgd2l0aFxuICAgICAgfCBDbG9zZWQgXyAtPiAoKVxuICAgICAgfCBPcGVuIF8gLT5cbiAgICAgICAgbGV0IHJlc3VsdCA9IEVycm9yIGVycm9yIGluXG4gICAgICAgIHQuZGF0YSA8LSBDbG9zZWQgcmVzdWx0O1xuICAgICAgICBSZWFkX3N0YXRlLml0ZXIgdC5yZWFkX3N0YXRlIH5mOihmdW4gcmVhZCAtPiByZWFkLm9uX2ZpbmlzaGVkIHJlc3VsdClcbiAgICA7O1xuICBlbmRcblxuICBsZXQgY3JlYXRlIHRlc3RfZGF0YSA9XG4gICAgbGV0IG1vZHVsZSBTdmFyID0gVWlfZWZmZWN0LkZvcl90ZXN0aW5nLlN2YXIgaW5cbiAgICBsZXQgcmVhZCBvbl9wcm9ncmVzcyA9XG4gICAgICBsZXQgKHJlc3VsdF92YXIgOiAoQmlnc3RyaW5nLnQsIFJlYWRfZXJyb3IudCkgUmVzdWx0LnQgU3Zhci50KSA9IFN2YXIuY3JlYXRlICgpIGluXG4gICAgICBsZXQgcmVzdWx0ID1cbiAgICAgICAgVWlfZWZmZWN0LkZvcl90ZXN0aW5nLm9mX3N2YXJfZnVuXG4gICAgICAgICAgKGZ1biAoKSAtPlxuICAgICAgICAgICAgVGVzdF9kYXRhLnJlYWRcbiAgICAgICAgICAgICAgdGVzdF9kYXRhXG4gICAgICAgICAgICAgIHsgb25fcHJvZ3Jlc3MgPVxuICAgICAgICAgICAgICAgICAgKGZ1biBwcm9ncmVzcyAtPiBvbl9wcm9ncmVzcyBwcm9ncmVzcyB8PiBVaV9lZmZlY3QuRXhwZXJ0LmhhbmRsZSlcbiAgICAgICAgICAgICAgOyBvbl9maW5pc2hlZCA9XG4gICAgICAgICAgICAgICAgICAoZnVuIHJlc3VsdCAtPlxuICAgICAgICAgICAgICAgICAgICBTdmFyLmZpbGxfaWZfZW1wdHlcbiAgICAgICAgICAgICAgICAgICAgICByZXN1bHRfdmFyXG4gICAgICAgICAgICAgICAgICAgICAgKFJlc3VsdC5tYXBfZXJyb3IgcmVzdWx0IH5mOihmdW4gZSAtPiBSZWFkX2Vycm9yLkVycm9yIGUpKSlcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJlc3VsdF92YXIpXG4gICAgICAgICAgKClcbiAgICAgIGluXG4gICAgICBsZXQgYWJvcnQgPVxuICAgICAgICBVaV9lZmZlY3Qub2Zfc3luY19mdW5cbiAgICAgICAgICAoZnVuICgpIC0+XG4gICAgICAgICAgICBUZXN0X2RhdGEuYWJvcnRfcmVhZCB0ZXN0X2RhdGE7XG4gICAgICAgICAgICBTdmFyLmZpbGxfaWZfZW1wdHkgcmVzdWx0X3ZhciAoRXJyb3IgQWJvcnRlZCkpXG4gICAgICAgICAgKClcbiAgICAgIGluXG4gICAgICB7IEZpbGVfcmVhZC5yZXN1bHQ7IGFib3J0IH1cbiAgICBpblxuICAgIHsgcmVhZCA9IFVpX2VmZmVjdC5vZl9zeW5jX2Z1biByZWFkOyBmaWxlbmFtZSA9IHRlc3RfZGF0YS5maWxlbmFtZSB9XG4gIDs7XG5lbmRcblxubW9kdWxlIFJlYWRfb25fY2hhbmdlID0gc3RydWN0XG4gIG1vZHVsZSBGaWxlID0gc3RydWN0XG4gICAgdHlwZSBub25yZWMgdCA9ICh0W0BzZXhwLm9wYXF1ZV0pIFtAQGRlcml2aW5nIHNleHBdXG5cbiAgICBsZXQgZXF1YWwgPSBwaHlzX2VxdWFsXG4gIGVuZFxuXG4gIG1vZHVsZSBGaWxlX3JlYWQnID0gc3RydWN0XG4gICAgdHlwZSB0ID0gKEZpbGVfcmVhZC50W0BzZXhwLm9wYXF1ZV0pIFtAQGRlcml2aW5nIHNleHBdXG5cbiAgICBsZXQgZXF1YWwgPSBwaHlzX2VxdWFsXG4gIGVuZFxuXG4gIG1vZHVsZSBTdGF0dXMgPSBzdHJ1Y3RcbiAgICB0eXBlIHQgPVxuICAgICAgfCBTdGFydGluZ1xuICAgICAgfCBJbl9wcm9ncmVzcyBvZiBQcm9ncmVzcy50XG4gICAgICB8IENvbXBsZXRlIG9mIEJpZ3N0cmluZy50IE9yX2Vycm9yLnRcbiAgICBbQEBkZXJpdmluZyBjb21wYXJlLCBlcXVhbCwgc2V4cF1cbiAgZW5kXG5cbiAgbW9kdWxlIEZpbGVfc3RhdGUgPSBzdHJ1Y3RcbiAgICB0eXBlIHQgPVxuICAgICAgfCBCZWZvcmVfZmlyc3RfcmVhZFxuICAgICAgfCBSZWFkaW5nIG9mXG4gICAgICAgICAgeyBmaWxlX3JlYWQgOiBGaWxlX3JlYWQnLnRcbiAgICAgICAgICA7IHN0YXR1cyA6IFN0YXR1cy50XG4gICAgICAgICAgfVxuICAgIFtAQGRlcml2aW5nIGVxdWFsLCBzZXhwXVxuXG4gICAgbGV0IHRvX3N0YXR1cyA9IGZ1bmN0aW9uXG4gICAgICB8IEJlZm9yZV9maXJzdF9yZWFkIC0+IFN0YXR1cy5TdGFydGluZ1xuICAgICAgfCBSZWFkaW5nIHsgc3RhdHVzOyBfIH0gLT4gc3RhdHVzXG4gICAgOztcblxuICAgIG1vZHVsZSBBY3Rpb24gPSBzdHJ1Y3RcbiAgICAgIHR5cGUgdCA9XG4gICAgICAgIHwgU3RhcnRfcmVhZCBvZiBGaWxlX3JlYWQnLnRcbiAgICAgICAgfCBTZXRfc3RhdHVzIG9mIFN0YXR1cy50XG4gICAgICBbQEBkZXJpdmluZyBlcXVhbCwgc2V4cF1cbiAgICBlbmRcblxuICAgIGxldCBhcHBseV9hY3Rpb24gY29udGV4dCB0IChhY3Rpb24gOiBBY3Rpb24udCkgPVxuICAgICAgbWF0Y2ggYWN0aW9uIHdpdGhcbiAgICAgIHwgU3RhcnRfcmVhZCBmaWxlX3JlYWQgLT5cbiAgICAgICAgKG1hdGNoIHQgd2l0aFxuICAgICAgICAgfCBCZWZvcmVfZmlyc3RfcmVhZCAtPiAoKVxuICAgICAgICAgfCBSZWFkaW5nIHsgZmlsZV9yZWFkID0gb2xkX2ZpbGVfcmVhZDsgc3RhdHVzID0gXyB9IC0+XG4gICAgICAgICAgIEJvbnNhaS5BcHBseV9hY3Rpb25fY29udGV4dC5zY2hlZHVsZV9ldmVudFxuICAgICAgICAgICAgIGNvbnRleHRcbiAgICAgICAgICAgICAoRmlsZV9yZWFkLmFib3J0IG9sZF9maWxlX3JlYWQpKTtcbiAgICAgICAgUmVhZGluZyB7IGZpbGVfcmVhZDsgc3RhdHVzID0gU3RhcnRpbmcgfVxuICAgICAgfCBTZXRfc3RhdHVzIHN0YXR1cyAtPlxuICAgICAgICAobWF0Y2ggdCB3aXRoXG4gICAgICAgICB8IEJlZm9yZV9maXJzdF9yZWFkIC0+IHRcbiAgICAgICAgIHwgUmVhZGluZyB7IGZpbGVfcmVhZDsgc3RhdHVzID0gXyB9IC0+IFJlYWRpbmcgeyBmaWxlX3JlYWQ7IHN0YXR1cyB9KVxuICAgIDs7XG5cbiAgICBsZXQgYWJvcnRfcmVhZF9pZl9hcHBsaWNhYmxlIHQgPVxuICAgICAgbWF0Y2glc3ViIHQgd2l0aFxuICAgICAgfCBCZWZvcmVfZmlyc3RfcmVhZCAtPiBCb25zYWkuY29uc3QgVWlfZWZmZWN0Lklnbm9yZVxuICAgICAgfCBSZWFkaW5nIHsgZmlsZV9yZWFkOyBzdGF0dXMgPSBfIH0gLT4gQm9uc2FpLnJlYWQgKGZpbGVfcmVhZCA+PnwgRmlsZV9yZWFkLmFib3J0KVxuICAgIDs7XG4gIGVuZFxuXG4gIGxldCBjcmVhdGVfaGVscGVyIGZpbGUgPVxuICAgIGxldCVzdWIgc3RhdGUsIGluamVjdCA9XG4gICAgICBCb25zYWkuc3RhdGVfbWFjaGluZTBcbiAgICAgICAgfnNleHBfb2ZfbW9kZWw6WyVzZXhwX29mOiBGaWxlX3N0YXRlLnRdXG4gICAgICAgIH5lcXVhbDpbJWVxdWFsOiBGaWxlX3N0YXRlLnRdXG4gICAgICAgIH5zZXhwX29mX2FjdGlvbjpbJXNleHBfb2Y6IEZpbGVfc3RhdGUuQWN0aW9uLnRdXG4gICAgICAgIH5kZWZhdWx0X21vZGVsOkJlZm9yZV9maXJzdF9yZWFkXG4gICAgICAgIH5hcHBseV9hY3Rpb246RmlsZV9zdGF0ZS5hcHBseV9hY3Rpb25cbiAgICAgICAgKClcbiAgICBpblxuICAgIGxldCVzdWIgKCkgPVxuICAgICAgbGV0JXN1YiBhYm9ydCA9IEZpbGVfc3RhdGUuYWJvcnRfcmVhZF9pZl9hcHBsaWNhYmxlIHN0YXRlIGluXG4gICAgICBCb25zYWkuRWRnZS5saWZlY3ljbGUgfm9uX2RlYWN0aXZhdGU6YWJvcnQgKClcbiAgICBpblxuICAgIGxldCVzdWIgKCkgPVxuICAgICAgQm9uc2FpLkVkZ2Uub25fY2hhbmdlXG4gICAgICAgIH5zZXhwX29mX21vZGVsOlslc2V4cF9vZjogRmlsZS50XVxuICAgICAgICB+ZXF1YWw6WyVlcXVhbDogRmlsZS50XVxuICAgICAgICBmaWxlXG4gICAgICAgIH5jYWxsYmFjazpcbiAgICAgICAgICAobGV0JW1hcCBpbmplY3QgPSBpbmplY3QgaW5cbiAgICAgICAgICAgZnVuIGZpbGUgLT5cbiAgICAgICAgICAgICBsZXQgb3BlbiBVaV9lZmZlY3QuTGV0X3N5bnRheCBpblxuICAgICAgICAgICAgIGxldCViaW5kIGZpbGVfcmVhZCA9XG4gICAgICAgICAgICAgICByZWFkIGZpbGUgfm9uX3Byb2dyZXNzOihmdW4gcHJvZ3Jlc3MgLT5cbiAgICAgICAgICAgICAgICAgaW5qZWN0IChTZXRfc3RhdHVzIChJbl9wcm9ncmVzcyBwcm9ncmVzcykpKVxuICAgICAgICAgICAgIGluXG4gICAgICAgICAgICAgbGV0JWJpbmQgKCkgPSBpbmplY3QgKFN0YXJ0X3JlYWQgZmlsZV9yZWFkKSBpblxuICAgICAgICAgICAgIG1hdGNoJWJpbmQgRmlsZV9yZWFkLnJlc3VsdCBmaWxlX3JlYWQgd2l0aFxuICAgICAgICAgICAgIHwgRXJyb3IgQWJvcnRlZCAtPlxuICAgICAgICAgICAgICAgKCogTGV0IHRoZSBuZXh0IHJlYWQgdGFrZSBvdmVyICopXG4gICAgICAgICAgICAgICByZXR1cm4gKClcbiAgICAgICAgICAgICB8IEVycm9yIChFcnJvciBlKSAtPiBpbmplY3QgKFNldF9zdGF0dXMgKENvbXBsZXRlIChFcnJvciBlKSkpXG4gICAgICAgICAgICAgfCBPayBjb250ZW50cyAtPiBpbmplY3QgKFNldF9zdGF0dXMgKENvbXBsZXRlIChPayBjb250ZW50cykpKSlcbiAgICBpblxuICAgIEJvbnNhaS5yZWFkIHN0YXRlXG4gIDs7XG5cbiAgbGV0IGNyZWF0ZV9tdWx0aXBsZSBmaWxlcyA9XG4gICAgbGV0JXN1YiBmaWxlX3N0YXRlcyA9XG4gICAgICAoKiBJbiByZWFsaXR5LCBJIHN1c3BlY3QgdGhhdCB3aGVuZXZlciB0aGUgdXNlciBjaGFuZ2VzIHRoZWlyIHNlbGVjdGlvbiBpbiBhIGZpbGVcbiAgICAgICAgIHBpY2tlciB3aWRnZXQsIHRoZSBicm93c2VyIGdlbmVyYXRlcyBhbiBlbnRpcmVseSBuZXcgc2V0IG9mIEZpbGUgb2JqZWN0cyBmb3IgdXMuXG4gICAgICAgICBTbyBJIHN1c3BlY3QgaXQncyBub3QgcG9zc2libGUgZm9yIFtmaWxlc10gdG8gY2hhbmdlIGluIHN1Y2ggYSB3YXkgdGhhdCBzb21lLCBidXRcbiAgICAgICAgIG5vdCBhbGwsIG9mIHRoZSBrZXlzIGNoYW5nZS4gSG93ZXZlciwgaXQncyBlYXN5IGVub3VnaCB0byBzdXBwb3J0IHRoYXQsIHNvIHdlIGRvLlxuXG4gICAgICAgICBUaGUgb25lIHRoaW5nIHdlIGRvbid0IHN1cHBvcnQgaXMgaWYgYSBmaWxlIGRpc2FwcGVhcnMgZnJvbSB0aGUgbWFwIGFuZCB0aGVuXG4gICAgICAgICBjb21lcyBiYWNrLiBJbiB0aGF0IGNhc2UsIHdlJ3ZlIGFscmVhZHkgdG9sZCB0aGUgZmlsZSByZWFkZXIgdG8gYWJvcnQgdGhlIHJlYWRcbiAgICAgICAgIHdoZW4gaXQgZGlzYXBwZWFyZWQsIHNvIHRoZXJlIGlzIG5vIHdheSBmb3IgdXMgdG8gcmVjb3Zlci4gKilcbiAgICAgIEJvbnNhaS5hc3NvY1xuICAgICAgICAobW9kdWxlIEZpbGVuYW1lKVxuICAgICAgICBmaWxlc1xuICAgICAgICB+ZjooZnVuIF9maWxlbmFtZSBmaWxlIC0+XG4gICAgICAgICAgbGV0JXN1YiByZWFkaW5nID0gY3JlYXRlX2hlbHBlciBmaWxlIGluXG4gICAgICAgICAgQm9uc2FpLnJlYWRcbiAgICAgICAgICAgIChtYXRjaCVtYXAgcmVhZGluZyB3aXRoXG4gICAgICAgICAgICAgfCBGaWxlX3N0YXRlLkJlZm9yZV9maXJzdF9yZWFkIC0+IE5vbmVcbiAgICAgICAgICAgICB8IFJlYWRpbmcgeyBzdGF0dXM7IGZpbGVfcmVhZCA9IF8gfSAtPiBTb21lIHN0YXR1cykpXG4gICAgaW5cbiAgICBCb25zYWkuSW5jci5jb21wdXRlIGZpbGVfc3RhdGVzIH5mOihVaV9pbmNyLk1hcC5maWx0ZXJfbWFwIH5mOkZuLmlkKVxuICA7O1xuXG4gIGxldCBjcmVhdGVfc2luZ2xlIGZpbGUgPVxuICAgIGxldCVzdWIgc3RhdGUgPSBjcmVhdGVfaGVscGVyIGZpbGUgaW5cbiAgICBsZXQlYXJyIGZpbGUgPSBmaWxlXG4gICAgYW5kIHN0YXRlID0gc3RhdGUgaW5cbiAgICBmaWxlLmZpbGVuYW1lLCBGaWxlX3N0YXRlLnRvX3N0YXR1cyBzdGF0ZVxuICA7O1xuXG4gIGxldCBjcmVhdGVfc2luZ2xlX29wdCBmaWxlID1cbiAgICBtYXRjaCVzdWIgZmlsZSB3aXRoXG4gICAgfCBOb25lIC0+IEJvbnNhaS5jb25zdCBOb25lXG4gICAgfCBTb21lIGZpbGUgLT4gQm9uc2FpLkNvbXB1dGF0aW9uLm1hcCAoY3JlYXRlX3NpbmdsZSBmaWxlKSB+ZjpPcHRpb24uc29tZVxuICA7O1xuZW5kXG4iXX0=
