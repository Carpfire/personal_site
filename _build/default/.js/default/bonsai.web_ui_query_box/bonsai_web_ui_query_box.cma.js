// Generated by js_of_ocaml
//# buildInfo:effects=false, kind=cma, use-js-string=true, version=5.6.0

//# unitInfo: Provides: Bonsai_web_ui_query_box
//# unitInfo: Requires: Bonsai, Bonsai_web, CamlinternalLazy, Core, Core__Array, Core__Char, Core__Comparable, Core__Comparator, Core__Float, Core__Int, Core__List, Core__Map, Core__Option, Core__String, Core__Uniform_array, Css_gen, Fuzzy_match, Fuzzy_search, Incr_map, Js_of_ocaml__Dom_html, Js_of_ocaml__Js, Ppx_bench_lib__Benchmark_accumulator, Ppx_expect_runtime, Ppx_inline_test_lib, Ppx_module_timer_runtime, Sexplib0__Sexp_conv_error, Sexplib0__Sexp_conv_record, Ui_effect, Ui_incr, Virtual_dom__Effect, Virtual_dom__Node, Virtual_dom__Vdom
(function
  (globalThis){
   "use strict";
   var
    runtime = globalThis.jsoo_runtime,
    cst$2 = "",
    cst_Bonsai_web_ui_query_box$0 = "Bonsai_web_ui_query_box",
    cst_Down = "Down",
    cst_Fuzzy_match = "Fuzzy_match",
    cst_Permanent_fixture = "Permanent_fixture",
    cst_Transient_overlay = "Transient_overlay",
    cst_Up = "Up",
    cst_bonsai_web_ui_query_box$0 = "bonsai_web_ui_query_box",
    cst_down = "down",
    cst_permanent_fixture = "permanent_fixture",
    cst_transient_overlay = "transient_overlay",
    cst_up = "up",
    cst_web_ui_query_box_src_bonsa =
      "web_ui/query_box/src/bonsai_web_ui_query_box.ml",
    caml_check_bound = runtime.caml_check_bound,
    caml_int_compare = runtime.caml_int_compare,
    caml_maybe_attach_backtrace = runtime.caml_maybe_attach_backtrace,
    caml_string_notequal = runtime.caml_string_notequal;
   function caml_call1(f, a0){
    return (f.l >= 0 ? f.l : f.l = f.length) == 1
            ? f(a0)
            : runtime.caml_call_gen(f, [a0]);
   }
   function caml_call2(f, a0, a1){
    return (f.l >= 0 ? f.l : f.l = f.length) == 2
            ? f(a0, a1)
            : runtime.caml_call_gen(f, [a0, a1]);
   }
   function caml_call3(f, a0, a1, a2){
    return (f.l >= 0 ? f.l : f.l = f.length) == 3
            ? f(a0, a1, a2)
            : runtime.caml_call_gen(f, [a0, a1, a2]);
   }
   function caml_call4(f, a0, a1, a2, a3){
    return (f.l >= 0 ? f.l : f.l = f.length) == 4
            ? f(a0, a1, a2, a3)
            : runtime.caml_call_gen(f, [a0, a1, a2, a3]);
   }
   function caml_call5(f, a0, a1, a2, a3, a4){
    return (f.l >= 0 ? f.l : f.l = f.length) == 5
            ? f(a0, a1, a2, a3, a4)
            : runtime.caml_call_gen(f, [a0, a1, a2, a3, a4]);
   }
   function caml_call7(f, a0, a1, a2, a3, a4, a5, a6){
    return (f.l >= 0 ? f.l : f.l = f.length) == 7
            ? f(a0, a1, a2, a3, a4, a5, a6)
            : runtime.caml_call_gen(f, [a0, a1, a2, a3, a4, a5, a6]);
   }
   var
    global_data = runtime.caml_get_global_data(),
    cst$1 = cst$2,
    cst = cst$2,
    cst$0 = cst$2,
    error_source_064 =
      "web_ui/query_box/src/bonsai_web_ui_query_box.ml.Suggestion_list_kind.t",
    all = [0, 0, [0, 1, 0]],
    error_source_072 =
      "web_ui/query_box/src/bonsai_web_ui_query_box.ml.Expand_direction.t",
    all$0 = [0, 0, [0, 1, 0]],
    all$1 = [0, 0, [0, 1, 0]],
    Core_Char = global_data.Core__Char,
    Fuzzy_match = global_data.Fuzzy_match,
    Ui_incr = global_data.Ui_incr,
    Incr_map = global_data.Incr_map,
    Bonsai = global_data.Bonsai,
    Fuzzy_search = global_data.Fuzzy_search,
    Core_String = global_data.Core__String,
    Virtual_dom_Node = global_data.Virtual_dom__Node,
    Core_Option = global_data.Core__Option,
    Core_Map = global_data.Core__Map,
    Core = global_data.Core,
    Core_Int = global_data.Core__Int,
    Core_List = global_data.Core__List,
    Core_Uniform_array = global_data.Core__Uniform_array,
    Core_Array = global_data.Core__Array,
    Core_Comparable = global_data.Core__Comparable,
    Assert_failure = global_data.Assert_failure,
    Virtual_dom_Effect = global_data.Virtual_dom__Effect,
    Ui_effect = global_data.Ui_effect,
    Virtual_dom_Vdom = global_data.Virtual_dom__Vdom,
    Js_of_ocaml_Dom_html = global_data.Js_of_ocaml__Dom_html,
    Core_Float = global_data.Core__Float,
    Js_of_ocaml_Js = global_data.Js_of_ocaml__Js,
    Css_gen = global_data.Css_gen,
    Bonsai_web = global_data.Bonsai_web,
    CamlinternalLazy = global_data.CamlinternalLazy,
    Sexplib0_Sexp_conv_error = global_data.Sexplib0__Sexp_conv_error;
   global_data.Sexplib0__Sexp_conv_record;
   var
    Ppx_module_timer_runtime = global_data.Ppx_module_timer_runtime,
    Ppx_bench_lib_Benchmark_accumu =
      global_data.Ppx_bench_lib__Benchmark_accumulator,
    Ppx_expect_runtime = global_data.Ppx_expect_runtime,
    Ppx_inline_test_lib = global_data.Ppx_inline_test_lib,
    Core_Comparator = global_data.Core__Comparator;
   caml_call1(Ppx_module_timer_runtime[4], cst_Bonsai_web_ui_query_box$0);
   caml_call1
    (Ppx_bench_lib_Benchmark_accumu[1][1], cst_bonsai_web_ui_query_box$0);
   caml_call1(Ppx_expect_runtime[1][1], cst_web_ui_query_box_src_bonsa);
   caml_call2
    (Ppx_inline_test_lib[6],
     cst_bonsai_web_ui_query_box$0,
     "bonsai_web_ui_query_box.ml");
   var
    _ao_ = [0, [0, cst_web_ui_query_box_src_bonsa, 691, 24700, 24712]],
    _ap_ = [0, [0, cst_web_ui_query_box_src_bonsa, 690, 24674, 24684]],
    _an_ = [0, [0, cst_web_ui_query_box_src_bonsa, 705, 25241, 25245]],
    _aq_ = [0, [0, cst_web_ui_query_box_src_bonsa, 676, 24233, 24239]],
    _ar_ = [0, [0, cst_web_ui_query_box_src_bonsa, 675, 24212, 24216]],
    _am_ = [0, [0, cst_web_ui_query_box_src_bonsa, 637, 22895, 22899]],
    _as_ = [0, [0, cst_web_ui_query_box_src_bonsa, 672, 24130, 24136]],
    _at_ = [0, [0, cst_web_ui_query_box_src_bonsa, 671, 24106, 24110]],
    _au_ = [0, [0, cst_web_ui_query_box_src_bonsa, 647, 23267, 23271]],
    _ak_ = [0, "Fuzzy_search_and_score"],
    _al_ = [0, cst_Fuzzy_match],
    _X_ = [0, cst_web_ui_query_box_src_bonsa, 208, 10],
    _Y_ = [0, cst_web_ui_query_box_src_bonsa, 208, 6839, 6849],
    _W_ = [0, [0, cst_web_ui_query_box_src_bonsa, 212, 6974, 6982]],
    _Z_ = [0, [0, cst_web_ui_query_box_src_bonsa, 208, 6839, 6849]],
    ___ = [0, [0, cst_web_ui_query_box_src_bonsa, 207, 6815, 6823]],
    _$_ = [0, [0, cst_web_ui_query_box_src_bonsa, 206, 6762, 6770]],
    _aa_ = [0, [0, cst_web_ui_query_box_src_bonsa, 206, 6762, 6770]],
    _ab_ = [0, [0, cst_web_ui_query_box_src_bonsa, 206, 6762, 6770]],
    _F_ = [0, cst_web_ui_query_box_src_bonsa, 219, 4],
    _E_ = [0, [0, cst_web_ui_query_box_src_bonsa, 221, 7253, 7259]],
    _D_ = [0, cst_web_ui_query_box_src_bonsa, 219, 4],
    _G_ = [0, [0, cst_web_ui_query_box_src_bonsa, 219, 7190, 7194]],
    _H_ = [0, [0, cst_web_ui_query_box_src_bonsa, 219, 7190, 7194]],
    _I_ = [0, [0, cst_web_ui_query_box_src_bonsa, 230, 7571, 7577]],
    _J_ = [0, cst_web_ui_query_box_src_bonsa, 220, 7231, 7237],
    _y_ = [0, [0, cst_web_ui_query_box_src_bonsa, 291, 9973, 9981]],
    cst_value = "value",
    cst_text = "text",
    _k_ = [0, 17960, 0],
    cst_query_box_item_container = "query-box-item-container",
    cst_data_test = "data-test",
    _l_ = [0, [0, cst_web_ui_query_box_src_bonsa, 381, 13166, 13168]],
    _m_ = [0, [0, cst_web_ui_query_box_src_bonsa, 380, 13127, 13129]],
    _n_ = [0, [0, cst_web_ui_query_box_src_bonsa, 379, 13073, 13075]],
    _o_ = [0, [0, cst_web_ui_query_box_src_bonsa, 334, 11529, 11533]],
    _p_ = [0, [0, cst_web_ui_query_box_src_bonsa, 333, 11502, 11504]],
    _q_ = [0, [0, cst_web_ui_query_box_src_bonsa, 330, 11352, 11354]],
    _r_ = [0, [0, cst_web_ui_query_box_src_bonsa, 330, 11352, 11354]],
    _s_ = [0, [0, cst_web_ui_query_box_src_bonsa, 330, 11352, 11354]],
    _t_ = [0, [0, cst_web_ui_query_box_src_bonsa, 330, 11352, 11354]],
    _u_ = [0, [0, cst_web_ui_query_box_src_bonsa, 330, 11352, 11354]],
    _v_ = [0, [0, cst_web_ui_query_box_src_bonsa, 330, 11352, 11354]],
    _w_ = [0, "query-box"],
    _x_ = [0, [0, cst_web_ui_query_box_src_bonsa, 330, 11352, 11354]],
    _z_ = [0, [0, cst_web_ui_query_box_src_bonsa, 286, 9881, 9883]],
    _A_ = [0, [0, cst_web_ui_query_box_src_bonsa, 285, 9837, 9839]],
    _B_ = [0, [0, cst_web_ui_query_box_src_bonsa, 237, 7753, 7757]],
    _C_ = [0, [0, cst_web_ui_query_box_src_bonsa, 236, 7735, 7737]],
    _K_ = [0, [0, cst_web_ui_query_box_src_bonsa, 219, 7190, 7194]],
    _L_ = [0, [0, cst_web_ui_query_box_src_bonsa, 218, 7165, 7167]],
    _M_ = [0, [0, cst_web_ui_query_box_src_bonsa, 93, 2265, 2267]],
    _N_ = [0, [0, cst_web_ui_query_box_src_bonsa, 93, 2265, 2267]],
    _O_ = [0, [0, cst_web_ui_query_box_src_bonsa, 93, 2265, 2267]],
    _P_ = [0, [0, cst_web_ui_query_box_src_bonsa, 93, 2265, 2267]],
    _Q_ = [0, [0, cst_web_ui_query_box_src_bonsa, 93, 2265, 2267]],
    _R_ = [0, [0, cst_web_ui_query_box_src_bonsa, 93, 2265, 2267]],
    _S_ = [0, [0, cst_web_ui_query_box_src_bonsa, 93, 2265, 2267]],
    _T_ = [0, [0, cst_web_ui_query_box_src_bonsa, 93, 2265, 2267]],
    _U_ = [0, [0, cst_web_ui_query_box_src_bonsa, 93, 2265, 2267]],
    _V_ = [0, [0, cst_web_ui_query_box_src_bonsa, 93, 2265, 2267]],
    _ac_ = [0, [0, cst_web_ui_query_box_src_bonsa, 93, 2265, 2267]],
    _ad_ = [0, [0, cst_web_ui_query_box_src_bonsa, 90, 2153, 2157]],
    _ae_ = [0, [0, cst_web_ui_query_box_src_bonsa, 89, 2107, 2109]],
    _af_ = [0, [0, cst_web_ui_query_box_src_bonsa, 86, 2008, 2010]],
    _ag_ = [0, [0, cst_web_ui_query_box_src_bonsa, 86, 2008, 2010]],
    _ah_ = [0, [0, cst_web_ui_query_box_src_bonsa, 86, 2008, 2010]],
    _ai_ = [0, [0, cst_web_ui_query_box_src_bonsa, 86, 2008, 2010]],
    _aj_ = [0, [0, cst_web_ui_query_box_src_bonsa, 86, 2008, 2010]],
    _i_ = [0, cst_Up],
    _j_ = [0, cst_Down],
    _g_ = [0, cst_Permanent_fixture],
    _h_ = [0, cst_Transient_overlay],
    _d_ = [0, "offset"],
    _e_ = [0, "suggestion_list_state"],
    _f_ = [0, "query"],
    _a_ = [0, "First_item"],
    _b_ = [0, "Closed"],
    _c_ = [0, "Selected"],
    cst_bonsai_web_ui_query_box = cst_bonsai_web_ui_query_box$0,
    cst_Bonsai_web_ui_query_box = cst_Bonsai_web_ui_query_box$0;
   function compare_suggestion_list_state(cmp_k, a_020, b_021){
    if(a_020 === b_021) return 0;
    if(typeof a_020 === "number"){
     if(! a_020){
      if(typeof b_021 === "number" && ! b_021) return 0;
      return -1;
     }
     if(typeof b_021 !== "number") return -1;
     if(b_021) return 0;
    }
    else{
     var a_022 = a_020[1];
     if(typeof b_021 !== "number"){
      var b_023 = b_021[1];
      return caml_call2(cmp_k, a_022, b_023);
     }
     if(b_021) return 1;
    }
    return 1;
   }
   function t_of_sexp(sexp_065){
    a:
    {
     if(0 === sexp_065[0]){
      var _fH_ = sexp_065[1];
      b:
      if(caml_string_notequal(_fH_, cst_Permanent_fixture)){
       if(caml_string_notequal(_fH_, cst_Transient_overlay)){
        if(! caml_string_notequal(_fH_, cst_permanent_fixture)) break b;
        if(caml_string_notequal(_fH_, cst_transient_overlay)) break a;
       }
       return 0;
      }
      return 1;
     }
     var _fI_ = sexp_065[1];
     if(! _fI_)
      return caml_call2
              (Sexplib0_Sexp_conv_error[11], error_source_064, sexp_065);
     var _fJ_ = _fI_[1];
     if(0 !== _fJ_[0])
      return caml_call2
              (Sexplib0_Sexp_conv_error[10], error_source_064, sexp_065);
     var _fK_ = _fJ_[1];
     b:
     if(caml_string_notequal(_fK_, cst_Permanent_fixture)){
      if(caml_string_notequal(_fK_, cst_Transient_overlay)){
       if(! caml_string_notequal(_fK_, cst_permanent_fixture)) break b;
       if(caml_string_notequal(_fK_, cst_transient_overlay)) break a;
      }
      return caml_call2
              (Sexplib0_Sexp_conv_error[7], error_source_064, sexp_065);
     }
     return caml_call2
             (Sexplib0_Sexp_conv_error[7], error_source_064, sexp_065);
    }
    return caml_call2
            (Sexplib0_Sexp_conv_error[12], error_source_064, sexp_065);
   }
   function sexp_of_t(param){return param ? _g_ : _h_;}
   var compare = caml_int_compare;
   function equal(_fG_, _fF_){return _fG_ === _fF_ ? 1 : 0;}
   var Suggestion_list_kind = [0, t_of_sexp, sexp_of_t, compare, all, equal];
   function t_of_sexp$0(sexp_073){
    a:
    {
     if(0 === sexp_073[0]){
      var _fB_ = sexp_073[1];
      b:
      if(caml_string_notequal(_fB_, cst_Down)){
       if(caml_string_notequal(_fB_, cst_Up)){
        if(! caml_string_notequal(_fB_, cst_down)) break b;
        if(caml_string_notequal(_fB_, cst_up)) break a;
       }
       return 1;
      }
      return 0;
     }
     var _fC_ = sexp_073[1];
     if(! _fC_)
      return caml_call2
              (Sexplib0_Sexp_conv_error[11], error_source_072, sexp_073);
     var _fD_ = _fC_[1];
     if(0 !== _fD_[0])
      return caml_call2
              (Sexplib0_Sexp_conv_error[10], error_source_072, sexp_073);
     var _fE_ = _fD_[1];
     b:
     if(caml_string_notequal(_fE_, cst_Down)){
      if(caml_string_notequal(_fE_, cst_Up)){
       if(! caml_string_notequal(_fE_, cst_down)) break b;
       if(caml_string_notequal(_fE_, cst_up)) break a;
      }
      return caml_call2
              (Sexplib0_Sexp_conv_error[7], error_source_072, sexp_073);
     }
     return caml_call2
             (Sexplib0_Sexp_conv_error[7], error_source_072, sexp_073);
    }
    return caml_call2
            (Sexplib0_Sexp_conv_error[12], error_source_072, sexp_073);
   }
   function sexp_of_t$0(param){return param ? _i_ : _j_;}
   var compare$0 = caml_int_compare;
   function equal$0(_fA_, _fz_){return _fA_ === _fz_ ? 1 : 0;}
   var
    Expand_direction =
      [0, t_of_sexp$0, sexp_of_t$0, compare$0, all$0, equal$0];
   function select_key(first_try, then_try, else_use){
    if(first_try){var key = first_try[1][1]; return [0, key];}
    var _fx_ = runtime.caml_obj_tag(then_try);
    a:
    if(250 === _fx_)
     var _fy_ = then_try[1];
    else{
     if(246 !== _fx_ && 244 !== _fx_){var _fy_ = then_try; break a;}
     var _fy_ = caml_call1(CamlinternalLazy[2], then_try);
    }
    if(! _fy_) return else_use;
    var key$0 = _fy_[1][1];
    return [0, key$0];
   }
   function focus_input(r){return r[5];}
   function set_query(r){return r[4];}
   function query(r){return r[3];}
   function view(r){return r[2];}
   function selected_item(r){return r[1];}
   function create
   (Key,
    opt,
    _bI_,
    _bH_,
    _bG_,
    _bF_,
    _bE_,
    _bD_,
    _bC_,
    _bB_,
    _bA_,
    f,
    on_select,
    param){
    if(opt)
     var sth = opt[1], initial_query = sth;
    else
     var initial_query = cst$0;
    if(_bI_)
     var sth$0 = _bI_[1], max_visible_items = sth$0;
    else
     var max_visible_items = caml_call1(Bonsai[2][1], 10);
    if(_bH_)
     var sth$1 = _bH_[1], suggestion_list_kind = sth$1;
    else
     var suggestion_list_kind = caml_call1(Bonsai[2][1], 0);
    if(_bG_)
     var sth$2 = _bG_[1], expand_direction = sth$2;
    else
     var expand_direction = caml_call1(Bonsai[2][1], 0);
    if(_bF_)
     var sth$3 = _bF_[1], selected_item_attr = sth$3;
    else
     var
      selected_item_attr = caml_call1(Bonsai[2][1], Virtual_dom_Vdom[1][11]);
    if(_bE_)
     var sth$4 = _bE_[1], extra_list_container_attr = sth$4;
    else
     var
      extra_list_container_attr =
        caml_call1(Bonsai[2][1], Virtual_dom_Vdom[1][11]);
    if(_bD_)
     var sth$5 = _bD_[1], extra_input_attr = sth$5;
    else
     var extra_input_attr = caml_call1(Bonsai[2][1], Virtual_dom_Vdom[1][11]);
    if(_bC_)
     var sth$6 = _bC_[1], extra_attr = sth$6;
    else
     var extra_attr = caml_call1(Bonsai[2][1], Virtual_dom_Vdom[1][11]);
    if(_bB_)
     var sth$7 = _bB_[1], on_blur = sth$7;
    else
     var
      _bM_ = caml_call1(Virtual_dom_Effect[6], 0),
      on_blur = caml_call1(Bonsai[2][1], _bM_);
    if(_bA_)
     var sth$8 = _bA_[1], modify_input_on_select = sth$8;
    else
     var
      _bL_ = function(selected_key, query){return cst;},
      modify_input_on_select = caml_call1(Bonsai[2][1], _bL_);
    function _bJ_(pattern_syntax_078){
     function _bN_(suggestion_list_is_initialized){
      function _bR_(initialize_suggestion_list){
       function _bV_(inject_initialize_suggestion_l){
        function _bY_(pattern_syntax_083){
         function _cH_(suggestion_list_state){
          function _cL_(query){
           function _cP_(offset){
            function _cT_(items){
             function _cX_(inject){
              function _c1_(selected_key){
               function _de_(items){
                function _dn_(get_items){
                 function _dp_(items){
                  function _dW_(pattern_syntax_128){
                   function _dY_(focus_input){
                    function _d2_(focus_attr){
                     function _d6_(blur_input){
                      function _d__(let_syntax_147){
                       function _ev_(let_syntax_154){
                        function _ew_(input_id){
                         function _ex_(param){
                          var
                           _eN_ = param[2],
                           _eO_ = _eN_[2],
                           _eP_ = _eO_[2],
                           _eQ_ = _eP_[2],
                           _eR_ = _eQ_[2],
                           _eS_ = _eR_[2],
                           _eT_ = _eS_[2],
                           _eU_ = _eT_[2],
                           _eV_ = _eU_[2],
                           _eW_ = _eV_[2],
                           _eX_ = _eW_[2],
                           _eY_ = _eX_[2],
                           _eZ_ = _eY_[2],
                           match = _eZ_[2],
                           on_blur = match[2],
                           inject_initialize_suggestion_l = match[1],
                           focus_input = _eZ_[1],
                           focus_attr = _eY_[1],
                           input_id = _eX_[1],
                           suggestion_container_id = _eW_[1],
                           extra_attr = _eV_[1],
                           extra_input_attr = _eU_[1],
                           extra_list_container_attr = _eT_[1],
                           items = _eS_[1],
                           expand_direction = _eR_[1],
                           suggestion_list_kind = _eQ_[1],
                           handle_keydown = _eP_[1],
                           inject = _eO_[1],
                           selected_key = _eN_[1],
                           query = param[1];
                          if(suggestion_list_kind)
                           var
                            is_open = 1,
                            suggestions_position = Virtual_dom_Vdom[1][11],
                            container_position = Virtual_dom_Vdom[1][11];
                          else
                           var
                            is_open$0 = caml_call1(Core_Option[62], selected_key),
                            _fm_ = caml_call5(Css_gen[24], 0, 0, 0, 0, 491227799),
                            suggestions_position$0 =
                              caml_call1(Virtual_dom_Vdom[1][32], _fm_),
                            _fn_ = caml_call5(Css_gen[24], 0, 0, 0, 0, 260471020),
                            container_position$0 =
                              caml_call1(Virtual_dom_Vdom[1][32], _fn_),
                            is_open = is_open$0,
                            suggestions_position = suggestions_position$0,
                            container_position = container_position$0;
                          function _e0_(ev){
                           var
                            _ft_ = Js_of_ocaml_Js[5][10],
                            _fu_ = caml_call1(Js_of_ocaml_Js[6][10], ev.relatedTarget),
                            match = caml_call2(Core_Option[32], _fu_, _ft_);
                           if(! match){
                            var _fw_ = [0, caml_call1(inject, 4), [0, on_blur, 0]];
                            return [0, Virtual_dom_Effect[2], _fw_];
                           }
                           var
                            related_target = match[1],
                            id = runtime.caml_string_of_jsstring(related_target.id);
                           if
                            (!
                             caml_call2(Core_String[145], id, suggestion_container_id)
                             && ! caml_call2(Core_String[145], id, input_id)){
                            var _fv_ = [0, caml_call1(inject, 4), [0, on_blur, 0]];
                            return [0, Virtual_dom_Effect[2], _fv_];
                           }
                           return Virtual_dom_Effect[1];
                          }
                          var
                           on_blur$0 = caml_call1(Virtual_dom_Vdom[1][54], _e0_),
                           _e1_ = 0,
                           _e2_ =
                             [0, focus_attr, [0, on_blur$0, [0, extra_input_attr, 0]]];
                          function _e3_(param){
                           var
                            _fs_ =
                              [0,
                               inject_initialize_suggestion_l,
                               [0, caml_call1(inject, 5), 0]];
                           return caml_call1(Virtual_dom_Effect[11], _fs_);
                          }
                          var
                           _e4_ = [0, caml_call1(Virtual_dom_Vdom[1][53], _e3_), _e2_];
                          function _e5_(param, query){
                           var
                            _fr_ =
                              [0,
                               caml_call1(inject, [0, query]),
                               [0, inject_initialize_suggestion_l, 0]];
                           return caml_call1(Virtual_dom_Effect[11], _fr_);
                          }
                          var
                           _e6_ = [0, caml_call1(Virtual_dom_Vdom[1][57], _e5_), _e4_];
                          function _e7_(ev){
                           var
                            _fq_ =
                              [0,
                               inject_initialize_suggestion_l,
                               [0, caml_call1(handle_keydown, ev), 0]];
                           return caml_call1(Virtual_dom_Effect[11], _fq_);
                          }
                          var
                           _e8_ = [0, caml_call1(Virtual_dom_Vdom[1][81], _e7_), _e6_],
                           _e9_ =
                             [0,
                              caml_call2(Virtual_dom_Vdom[1][3], cst_value, query),
                              _e8_],
                           _e__ =
                             [0, caml_call1(Virtual_dom_Vdom[1][43], cst_text), _e9_],
                           _e$_ =
                             [0,
                              [0, caml_call1(Virtual_dom_Vdom[1][25], input_id), _e__]],
                           input = caml_call3(Virtual_dom_Node[30], 0, _e$_, _e1_);
                          if(is_open){
                           if(expand_direction)
                            var
                             _fa_ = caml_call1(Core_Map[80], items),
                             directed_items = caml_call1(Core_List[59], _fa_),
                             _fb_ = caml_call1(Css_gen[26], _k_),
                             directed_items$0 = directed_items,
                             position_above_or_below =
                               caml_call1(Virtual_dom_Vdom[1][32], _fb_);
                           else
                            var
                             _fl_ = caml_call1(Core_Map[80], items),
                             directed_items$0 = _fl_,
                             position_above_or_below = Virtual_dom_Vdom[1][11];
                           var
                            _fc_ =
                              caml_call2
                               (Virtual_dom_Vdom[1][12],
                                position_above_or_below,
                                extra_list_container_attr),
                            attr =
                              caml_call2
                               (Virtual_dom_Vdom[1][12], suggestions_position, _fc_),
                            suggestions =
                              caml_call3
                               (Virtual_dom_Node[17],
                                0,
                                [0, [0, attr, 0]],
                                directed_items$0);
                          }
                          else
                           var suggestions = caml_call3(Virtual_dom_Node[17], 0, 0, 0);
                          var
                           _fd_ = [0, suggestions, 0],
                           _fe_ = [0, on_blur$0, [0, container_position, 0]];
                          function _ff_(ev){
                           var
                            comparison =
                              expand_direction
                               ? caml_call2(Core_Float[129], ev.deltaY, 0.)
                               : caml_call2(Core_Float[130], ev.deltaY, 0.),
                            _fo_ = [0, Virtual_dom_Effect[20], 0],
                            _fp_ =
                              comparison ? caml_call1(inject, 3) : caml_call1(inject, 2);
                           return [0, Virtual_dom_Effect[2], [0, _fp_, _fo_]];
                          }
                          var
                           _fg_ = [0, caml_call1(Virtual_dom_Vdom[1][89], _ff_), _fe_],
                           _fh_ = [0, caml_call1(Virtual_dom_Vdom[1][42], -1), _fg_],
                           _fi_ =
                             [0,
                              caml_call1(Virtual_dom_Vdom[1][25], suggestion_container_id),
                              _fh_],
                           _fj_ =
                             [0,
                              [0,
                               caml_call2
                                (Virtual_dom_Vdom[1][1],
                                 cst_data_test,
                                 cst_query_box_item_container),
                               _fi_]],
                           suggestions_container =
                             caml_call3(Virtual_dom_Node[17], 0, _fj_, _fd_),
                           _fk_ =
                             expand_direction
                              ? [0, suggestions_container, [0, input, 0]]
                              : [0, input, [0, suggestions_container, 0]],
                           view =
                             caml_call3
                              (Virtual_dom_Node[17], 0, [0, [0, extra_attr, 0]], _fk_);
                          return [0,
                                  selected_key,
                                  view,
                                  query,
                                  function(query){return caml_call1(inject, [0, query]);},
                                  focus_input];
                         }
                         var
                          _ey_ =
                            caml_call2
                             (Bonsai[49][5][7], inject_initialize_suggestion_l, on_blur),
                          _ez_ = caml_call2(Bonsai[49][5][7], focus_input, _ey_),
                          _eA_ = caml_call2(Bonsai[49][5][7], focus_attr, _ez_),
                          _eB_ = caml_call2(Bonsai[49][5][7], input_id, _eA_),
                          _eC_ = caml_call2(Bonsai[49][5][7], let_syntax_154, _eB_),
                          _eD_ = caml_call2(Bonsai[49][5][7], extra_attr, _eC_),
                          _eE_ = caml_call2(Bonsai[49][5][7], extra_input_attr, _eD_),
                          _eF_ =
                            caml_call2
                             (Bonsai[49][5][7], extra_list_container_attr, _eE_),
                          _eG_ = caml_call2(Bonsai[49][5][7], items, _eF_),
                          _eH_ = caml_call2(Bonsai[49][5][7], expand_direction, _eG_),
                          _eI_ =
                            caml_call2(Bonsai[49][5][7], suggestion_list_kind, _eH_),
                          _eJ_ = caml_call2(Bonsai[49][5][7], let_syntax_147, _eI_),
                          _eK_ = caml_call2(Bonsai[49][5][7], inject, _eJ_),
                          _eL_ = caml_call2(Bonsai[49][5][7], selected_key, _eK_),
                          _eM_ = caml_call2(Bonsai[49][5][7], query, _eL_);
                         return caml_call3(Bonsai[49][5][8], _l_, _eM_, _ex_);
                        }
                        return caml_call3(Bonsai[49][5][1], _m_, Bonsai[8], _ew_);
                       }
                       return caml_call3(Bonsai[49][5][1], _n_, Bonsai[8], _ev_);
                      }
                      function _d$_(param){
                       var
                        _ei_ = param[2],
                        _ej_ = _ei_[2],
                        _ek_ = _ej_[2],
                        _el_ = _ek_[2],
                        _em_ = _el_[2],
                        match = _em_[2],
                        modify_input_on_select = match[2],
                        query = match[1],
                        blur_input = _em_[1],
                        suggestion_list_state = _el_[1],
                        expand_direction = _ek_[1],
                        on_select = _ej_[1],
                        selected_key = _ei_[1],
                        inject = param[1];
                       return function(ev){
                        var
                         _en_ = [0, Virtual_dom_Effect[20], 0],
                         _eo_ = [0, caml_call1(inject, 0), _en_],
                         move_next = [0, Virtual_dom_Effect[2], _eo_],
                         _ep_ = [0, Virtual_dom_Effect[20], 0],
                         _eq_ = [0, caml_call1(inject, 1), _ep_],
                         move_prev = [0, Virtual_dom_Effect[2], _eq_];
                        if(expand_direction)
                         var down = move_prev, up = move_next;
                        else
                         var down = move_next, up = move_prev;
                        var
                         switcher =
                           caml_call1(Js_of_ocaml_Dom_html[26][1], ev) - 96 | 0;
                        if(1 >= switcher >>> 0) return switcher ? down : up;
                        var switcher$0 = switcher + 57 | 0;
                        if(3 >= switcher$0 >>> 0)
                         switch(switcher$0){
                           case 0:
                            return ev.shiftKey | 0
                                    ? selected_key ? up : Virtual_dom_Effect[1]
                                    : selected_key ? down : Virtual_dom_Effect[1];
                           case 1:
                            if(! selected_key) return caml_call1(inject, 5);
                            var
                             key = selected_key[1],
                             _er_ = [0, Virtual_dom_Effect[20], 0],
                             _es_ = [0, caml_call1(inject, 4), _er_],
                             _et_ =
                               [0,
                                caml_call1
                                 (inject,
                                  [0, caml_call2(modify_input_on_select, key, query)]),
                                _es_],
                             _eu_ = [0, caml_call1(on_select, key), _et_];
                            return [0, Virtual_dom_Effect[2], _eu_];
                           case 2: break;
                           default:
                            if
                             (typeof suggestion_list_state === "number"
                              && ! suggestion_list_state)
                             return blur_input;
                            return caml_call1(inject, 4);
                         }
                        return Virtual_dom_Effect[1];};
                      }
                      var
                       _ea_ =
                         caml_call2(Bonsai[49][5][7], query, modify_input_on_select),
                       _eb_ = caml_call2(Bonsai[49][5][7], blur_input, _ea_),
                       _ec_ =
                         caml_call2(Bonsai[49][5][7], suggestion_list_state, _eb_),
                       _ed_ = caml_call2(Bonsai[49][5][7], expand_direction, _ec_),
                       _ee_ = caml_call2(Bonsai[49][5][7], on_select, _ed_),
                       _ef_ = caml_call2(Bonsai[49][5][7], selected_key, _ee_),
                       _eg_ = caml_call2(Bonsai[49][5][7], inject, _ef_),
                       _eh_ = caml_call3(Bonsai[49][5][8], _o_, _eg_, _d$_);
                      return caml_call3(Bonsai[49][5][1], _p_, _eh_, _d__);
                     }
                     function _d7_(param){
                      var pattern_syntax_129 = param[3];
                      return pattern_syntax_129;
                     }
                     var
                      _d8_ =
                        caml_call3(Bonsai[49][5][4], _q_, pattern_syntax_128, _d7_),
                      _d9_ = caml_call1(Bonsai[49][5][6], _d8_);
                     return caml_call3(Bonsai[49][5][1], _r_, _d9_, _d6_);
                    }
                    function _d3_(param){
                     var pattern_syntax_130 = param[1];
                     return pattern_syntax_130;
                    }
                    var
                     _d4_ =
                       caml_call3(Bonsai[49][5][4], _s_, pattern_syntax_128, _d3_),
                     _d5_ = caml_call1(Bonsai[49][5][6], _d4_);
                    return caml_call3(Bonsai[49][5][1], _t_, _d5_, _d2_);
                   }
                   function _dZ_(param){
                    var pattern_syntax_131 = param[2];
                    return pattern_syntax_131;
                   }
                   var
                    _d0_ =
                      caml_call3(Bonsai[49][5][4], _u_, pattern_syntax_128, _dZ_),
                    _d1_ = caml_call1(Bonsai[49][5][6], _d0_);
                   return caml_call3(Bonsai[49][5][1], _v_, _d1_, _dY_);
                  }
                  var _dX_ = caml_call2(Bonsai_web[5][26][1], _w_, 0);
                  return caml_call3(Bonsai[49][5][1], _x_, _dX_, _dW_);
                 }
                 function _dq_(key, item){
                  function _ds_(param){
                   var
                    _dB_ = param[2],
                    _dC_ = _dB_[2],
                    _dD_ = _dC_[2],
                    _dE_ = _dD_[2],
                    _dF_ = _dE_[2],
                    _dG_ = _dF_[2],
                    match = _dG_[2],
                    modify_input_on_select = match[2],
                    query = match[1],
                    on_select = _dG_[1],
                    inject = _dF_[1],
                    selected_item_attr = _dE_[1],
                    selected_key = _dD_[1],
                    get_items = _dC_[1],
                    item = _dB_[1],
                    key = param[1];
                   a:
                   {
                    if(selected_key){
                     var
                      selected_key$0 = selected_key[1],
                      _dH_ = caml_call2(Key[2][1], key, selected_key$0);
                     if(caml_call2(Core[90], _dH_, 0)){
                      var selected_attr = selected_item_attr;
                      break a;
                     }
                    }
                    var selected_attr = Virtual_dom_Vdom[1][11];
                   }
                   function _dI_(items){
                    function _dT_(offset){
                     var offset$0 = caml_call2(Core_Option[39], offset, 0);
                     return caml_call1(inject, [1, key, offset$0]);
                    }
                    var
                     _dU_ = caml_call1(Core_Map[113], items),
                     _dV_ = caml_call2(Virtual_dom_Effect[15], _dU_, key);
                    return caml_call2(Ui_effect[13][4][2], _dV_, _dT_);
                   }
                   function _dJ_(param){
                    if(! param) return Virtual_dom_Effect[12];
                    var items = param[1];
                    return caml_call1(Virtual_dom_Effect[6], items);
                   }
                   var
                    _dK_ = caml_call2(Ui_effect[13][4][2], get_items, _dJ_),
                    move_to_effect = caml_call2(Ui_effect[13][4][2], _dK_, _dI_),
                    _dL_ = 0;
                   function _dM_(param){
                    var
                     _dQ_ = [0, caml_call1(inject, 4), 0],
                     _dR_ =
                       [0,
                        caml_call1
                         (inject,
                          [0, caml_call2(modify_input_on_select, key, query)]),
                        _dQ_],
                     _dS_ = [0, caml_call1(on_select, key), _dR_];
                    return [0, Virtual_dom_Effect[2], _dS_];
                   }
                   var
                    _dN_ = [0, caml_call1(Virtual_dom_Vdom[1][61], _dM_), _dL_];
                   function _dO_(param){return move_to_effect;}
                   var
                    _dP_ =
                      [0,
                       selected_attr,
                       [0, caml_call1(Virtual_dom_Vdom[1][75], _dO_), _dN_]],
                    attr = caml_call1(Virtual_dom_Vdom[1][9], _dP_);
                   return caml_call3
                           (Virtual_dom_Node[17], 0, [0, [0, attr, 0]], [0, item, 0]);
                  }
                  var
                   _dt_ =
                     caml_call2(Bonsai[49][5][7], query, modify_input_on_select),
                   _du_ = caml_call2(Bonsai[49][5][7], on_select, _dt_),
                   _dv_ = caml_call2(Bonsai[49][5][7], inject, _du_),
                   _dw_ =
                     caml_call2(Bonsai[49][5][7], selected_item_attr, _dv_),
                   _dx_ = caml_call2(Bonsai[49][5][7], selected_key, _dw_),
                   _dy_ = caml_call2(Bonsai[49][5][7], get_items, _dx_),
                   _dz_ = caml_call2(Bonsai[49][5][7], item, _dy_),
                   _dA_ = caml_call2(Bonsai[49][5][7], key, _dz_);
                  return caml_call3(Bonsai[49][5][8], _y_, _dA_, _ds_);
                 }
                 var _dr_ = caml_call3(Bonsai[34], Key, items, _dq_);
                 return caml_call3(Bonsai[49][5][1], _z_, _dr_, _dp_);
                }
                var _do_ = caml_call1(Bonsai[41], items);
                return caml_call3(Bonsai[49][5][1], _A_, _do_, _dn_);
               }
               function _df_(param){
                var
                 _dk_ = param[2],
                 match = _dk_[2],
                 offset = match[2],
                 selected_key = match[1],
                 max_visible_items = _dk_[1],
                 items = param[1];
                if(! selected_key){
                 var
                  match$0 =
                    caml_call2(Core_Map[111], items, max_visible_items);
                 if(match$0)
                  var k = match$0[1][1], _dm_ = [1, k];
                 else
                  var _dm_ = 0;
                 return caml_call3(Core_Map[107], items, 0, _dm_);
                }
                var
                 selected_key$0 = selected_key[1],
                 length = [0, 0],
                 items$0 = [0, items],
                 result = [0, caml_call1(Core_Map[4], [0, Key[2]])],
                 _dl_ = caml_call1(Core_Map[35], items$0[1]),
                 visible_items = caml_call2(Core[96], max_visible_items, _dl_),
                 offset$0 = caml_call2(Core[96], offset, visible_items);
                function add_element_from_side(side){
                 var
                  match =
                    caml_call3(Core_Map[110], items$0[1], side, selected_key$0);
                 if(! match) return 0;
                 var match$0 = match[1], data = match$0[2], key = match$0[1];
                 result[1] = caml_call3(Core_Map[38], result[1], key, data);
                 items$0[1] = caml_call2(Core_Map[47], items$0[1], key);
                 length[1]++;
                 return 1;
                }
                for(;;){
                 if(! caml_call2(Core[92], length[1], visible_items))
                  return result[1];
                 if(caml_call2(Core[89], length[1], offset$0)){
                  if(1 - add_element_from_side(927731004))
                   add_element_from_side(521507869);
                 }
                 else if(1 - add_element_from_side(521507869))
                  add_element_from_side(927731004);
                }
               }
               var
                _dg_ = caml_call2(Bonsai[49][5][7], selected_key, offset),
                _dh_ = caml_call2(Bonsai[49][5][7], max_visible_items, _dg_),
                _di_ = caml_call2(Bonsai[49][5][7], items, _dh_),
                _dj_ = caml_call3(Bonsai[49][5][8], _B_, _di_, _df_);
               return caml_call3(Bonsai[49][5][1], _C_, _dj_, _de_);
              }
              function _c2_(pattern_syntax_102){
               function _c5_(param){
                if(2 < param >>> 0)
                 throw caml_maybe_attach_backtrace
                        ([0, Assert_failure, _D_], 1);
                switch(param){
                  case 0:
                   var
                    _c9_ =
                      function(key){
                       function _dc_(param){
                        var
                         items = param[2],
                         key = param[1],
                         match = caml_call3(Core_Map[110], items, 927731004, key);
                        if(match){var key$0 = match[1][1]; return [0, key$0];}
                        var
                         match$0 = caml_call3(Core_Map[110], items, 521507869, key);
                        if(! match$0) return 0;
                        var key$1 = match$0[1][1];
                        return [0, key$1];
                       }
                       var _dd_ = caml_call2(Bonsai[49][5][7], key, items);
                       return caml_call3(Bonsai[49][5][8], _E_, _dd_, _dc_);
                      },
                    _c__ =
                      function(param){
                       if(typeof param === "number")
                        throw caml_maybe_attach_backtrace
                               ([0, Assert_failure, _F_], 1);
                       var pattern_syntax_103 = param[1];
                       return pattern_syntax_103;
                      },
                    _c$_ =
                      caml_call3(Bonsai[49][5][4], _G_, pattern_syntax_102, _c__),
                    _da_ = caml_call1(Bonsai[49][5][6], _c$_);
                   return caml_call3(Bonsai[49][5][1], _H_, _da_, _c9_);
                  case 1:
                   var
                    _db_ =
                      function(items){
                       var match = caml_call1(Core_Map[90], items);
                       if(! match) return 0;
                       var key = match[1][1];
                       return [0, key];
                      };
                   return caml_call3(Bonsai[49][5][8], _I_, items, _db_);
                  default: return caml_call1(Bonsai[7], 0);
                }
               }
               var _c6_ = 3;
               function _c7_(param){
                return typeof param === "number" ? param ? 1 : 2 : 0;
               }
               var
                _c8_ =
                  caml_call3(Bonsai[49][5][4], 0, pattern_syntax_102, _c7_);
               return caml_call4(Bonsai[49][5][3], _J_, _c8_, _c6_, _c5_);
              }
              var
               _c3_ = caml_call1(Bonsai[49][5][6], suggestion_list_state),
               _c4_ = caml_call3(Bonsai[49][5][1], _K_, _c3_, _c2_);
              return caml_call3(Bonsai[49][5][1], _L_, _c4_, _c1_);
             }
             function _cY_(param){
              var pattern_syntax_084 = param[2];
              return pattern_syntax_084;
             }
             var
              _cZ_ =
                caml_call3(Bonsai[49][5][4], _M_, pattern_syntax_083, _cY_),
              _c0_ = caml_call1(Bonsai[49][5][6], _cZ_);
             return caml_call3(Bonsai[49][5][1], _N_, _c0_, _cX_);
            }
            function _cU_(param){
             var pattern_syntax_085 = param[3];
             return pattern_syntax_085;
            }
            var
             _cV_ =
               caml_call3(Bonsai[49][5][4], _O_, pattern_syntax_083, _cU_),
             _cW_ = caml_call1(Bonsai[49][5][6], _cV_);
            return caml_call3(Bonsai[49][5][1], _P_, _cW_, _cT_);
           }
           function _cQ_(param){
            var pattern_syntax_086 = param[1][3];
            return pattern_syntax_086;
           }
           var
            _cR_ = caml_call3(Bonsai[49][5][4], _Q_, pattern_syntax_083, _cQ_),
            _cS_ = caml_call1(Bonsai[49][5][6], _cR_);
           return caml_call3(Bonsai[49][5][1], _R_, _cS_, _cP_);
          }
          function _cM_(param){
           var pattern_syntax_087 = param[1][1];
           return pattern_syntax_087;
          }
          var
           _cN_ = caml_call3(Bonsai[49][5][4], _S_, pattern_syntax_083, _cM_),
           _cO_ = caml_call1(Bonsai[49][5][6], _cN_);
          return caml_call3(Bonsai[49][5][1], _T_, _cO_, _cL_);
         }
         function _cI_(param){
          var pattern_syntax_088 = param[1][2];
          return pattern_syntax_088;
         }
         var
          _cJ_ = caml_call3(Bonsai[49][5][4], _U_, pattern_syntax_083, _cI_),
          _cK_ = caml_call1(Bonsai[49][5][6], _cJ_);
         return caml_call3(Bonsai[49][5][1], _V_, _cK_, _cH_);
        }
        function sexp_of_t(x_089){
         var
          of_k_016 = Key[1],
          offset_038 = x_089[3],
          suggestion_list_state_036 = x_089[2],
          query_034 = x_089[1],
          arg_039 = caml_call1(Core[389], offset_038),
          bnds_033 = [0, [1, [0, _d_, [0, arg_039, 0]]], 0];
         if(typeof suggestion_list_state_036 === "number")
          var arg_037 = suggestion_list_state_036 ? _a_ : _b_;
         else
          var
           arg0_017 = suggestion_list_state_036[1],
           res0_018 = caml_call1(of_k_016, arg0_017),
           arg_037 = [1, [0, _c_, [0, res0_018, 0]]];
         var
          bnds_033$0 = [0, [1, [0, _e_, [0, arg_037, 0]]], bnds_033],
          arg_035 = caml_call1(Core[558], query_034),
          bnds_033$1 = [0, [1, [0, _f_, [0, arg_035, 0]]], bnds_033$0];
         return [1, bnds_033$1];
        }
        var _bZ_ = 0;
        function _b0_(model, inject){
         function _cn_(pattern_syntax_092){
          function _cp_(query){
           function _ct_(items){
            function _cC_(param){
             var
              _cG_ = param[2],
              match = _cG_[2],
              max_visible_items = match[2],
              items = match[1],
              inject = _cG_[1],
              model = param[1];
             return [0, model, inject, items, max_visible_items];
            }
            var
             _cD_ = caml_call2(Bonsai[49][5][7], items, max_visible_items),
             _cE_ = caml_call2(Bonsai[49][5][7], inject, _cD_),
             _cF_ = caml_call2(Bonsai[49][5][7], model, _cE_);
            return caml_call3(Bonsai[49][5][8], _W_, _cF_, _cC_);
           }
           function _cu_(pattern_syntax_095){
            function _cx_(param){
             if(0 === param) return caml_call1(f, query);
             if(1 !== param)
              throw caml_maybe_attach_backtrace([0, Assert_failure, _X_], 1);
             var _cB_ = caml_call1(Core_Map[4], [0, Key[2]]);
             return caml_call1(Bonsai[7], _cB_);
            }
            var _cy_ = 2;
            function _cz_(param){return param ? 0 : 1;}
            var
             _cA_ = caml_call3(Bonsai[49][5][4], 0, pattern_syntax_095, _cz_);
            return caml_call4(Bonsai[49][5][3], _Y_, _cA_, _cy_, _cx_);
           }
           var
            _cv_ =
              caml_call1(Bonsai[49][5][6], suggestion_list_is_initialized),
            _cw_ = caml_call3(Bonsai[49][5][1], _Z_, _cv_, _cu_);
           return caml_call3(Bonsai[49][5][1], ___, _cw_, _ct_);
          }
          function _cq_(param){
           var pattern_syntax_093 = param[1];
           return pattern_syntax_093;
          }
          var
           _cr_ = caml_call3(Bonsai[49][5][4], _$_, pattern_syntax_092, _cq_),
           _cs_ = caml_call1(Bonsai[49][5][6], _cr_);
          return caml_call3(Bonsai[49][5][1], _aa_, _cs_, _cp_);
         }
         var _co_ = caml_call1(Bonsai[49][1], model);
         return caml_call3(Bonsai[49][5][1], _ab_, _co_, _cn_);
        }
        function _b1_(param, _b9_, model, action){
         var max_visible_items = _b9_[4], items = _b9_[3], match = model[2];
         if(typeof match === "number")
          var suggestion_list_state = match ? 1 : 0;
         else
          var
           key$1 = match[1],
           _ce_ = 1,
           _cf_ =
             [246,
              function(_cm_){
               return caml_call3(Core_Map[110], items, 521507869, key$1);
              }],
           suggestion_list_state =
             select_key
              (caml_call3(Core_Map[110], items, 927731004, key$1), _cf_, _ce_);
         function next_suggestion_list_state(param){
          if(typeof suggestion_list_state !== "number"){
           var
            key = suggestion_list_state[1],
            _cj_ = [0, key],
            _ck_ =
              [246, function(_cl_){return caml_call1(Core_Map[90], items);}];
           return select_key
                   (caml_call3(Core_Map[110], items, -779285466, key),
                    _ck_,
                    _cj_);
          }
          if(! suggestion_list_state) return 1;
          var match = caml_call1(Core_Map[90], items);
          if(! match) return 1;
          var
           first_key = match[1][1],
           match$0 = caml_call3(Core_Map[110], items, -779285466, first_key);
          if(! match$0) return [0, first_key];
          var second_key = match$0[1][1];
          return [0, second_key];
         }
         function prev_suggestion_list_state(param){
          var match = model[2];
          if(typeof match !== "number"){
           var
            key = match[1],
            _cg_ = [0, key],
            _ch_ =
              [246, function(_ci_){return caml_call1(Core_Map[92], items);}];
           return select_key
                   (caml_call3(Core_Map[110], items, -640801497, key),
                    _ch_,
                    _cg_);
          }
          var match$0 = caml_call1(Core_Map[92], items);
          if(! match$0) return 1;
          var last_key = match$0[1][1];
          return [0, last_key];
         }
         if(typeof action === "number")
          switch(action){
            case 0:
             var
              suggestion_list_state$0 = next_suggestion_list_state(0),
              _b__ = model[2],
              comparison =
                compare_suggestion_list_state
                 (caml_call1(Core_Map[2], items)[1],
                  _b__,
                  suggestion_list_state$0),
              offset =
                caml_call2(Core[90], comparison, 0)
                 ? model[3]
                 : caml_call2
                    (Core[92], comparison, 0)
                   ? caml_call2
                     (Core[96], max_visible_items - 1 | 0, model[3] + 1 | 0)
                   : 0;
             return [0, model[1], suggestion_list_state$0, offset];
            case 1:
             var
              suggestion_list_state$1 = prev_suggestion_list_state(0),
              _b$_ = model[2],
              comparison$0 =
                compare_suggestion_list_state
                 (caml_call1(Core_Map[2], items)[1],
                  _b$_,
                  suggestion_list_state$1),
              offset$0 =
                caml_call2(Core[90], comparison$0, 0)
                 ? model[3]
                 : caml_call2
                    (Core[92], comparison$0, 0)
                   ? max_visible_items - 1 | 0
                   : caml_call2(Core[97], 0, model[3] - 1 | 0);
             return [0, model[1], suggestion_list_state$1, offset$0];
            case 2:
             var _ca_ = model[3], _cb_ = next_suggestion_list_state(0);
             return [0, model[1], _cb_, _ca_];
            case 3:
             var _cc_ = model[3], _cd_ = prev_suggestion_list_state(0);
             return [0, model[1], _cd_, _cc_];
            case 4:
             return [0, model[1], 0, model[3]];
            default: return [0, model[1], 1, model[3]];
          }
         if(0 !== action[0]){
          var offset$2 = action[2], key$0 = action[1];
          return caml_call2(Core_Map[48], items, key$0)
                  ? [0, model[1], [0, key$0], offset$2]
                  : model;
         }
         var query = action[1];
         if(typeof suggestion_list_state === "number")
          var suggestion_list_state$2 = 1;
         else
          var
           key = suggestion_list_state[1],
           suggestion_list_state$2 = [0, key];
         var offset$1 = model[3];
         return [0, query, suggestion_list_state$2, offset$1];
        }
        var
         _b2_ = [0, initial_query, 0, 0],
         _b3_ =
           [0,
            function(a_090, b_091){
             if(a_090 === b_091) return 1;
             var _b5_ = caml_call2(Core[553], a_090[1], b_091[1]);
             if(_b5_){
              var b_002 = b_091[2], a_001 = a_090[2];
              a:
              if(a_001 === b_002)
               var _b6_ = 1;
              else{
               if(typeof a_001 === "number"){
                if(! a_001){
                 if(typeof b_002 === "number" && ! b_002){var _b6_ = 1; break a;}
                 var _b6_ = 0;
                 break a;
                }
                if(typeof b_002 !== "number"){var _b6_ = 0; break a;}
                if(b_002){var _b6_ = 1; break a;}
               }
               else{
                var a_003 = a_001[1];
                if(typeof b_002 !== "number"){
                 var
                  b_004 = b_002[1],
                  _b8_ = caml_call2(Key[2][1], a_003, b_004),
                  _b6_ = caml_call2(Core[90], _b8_, 0);
                 break a;
                }
                if(b_002){var _b6_ = 0; break a;}
               }
               var _b6_ = 0;
              }
              if(_b6_) return caml_call2(Core[384], a_090[3], b_091[3]);
              var _b7_ = _b6_;
             }
             else
              var _b7_ = _b5_;
             return _b7_;
            }],
         _b4_ =
           caml_call7
            (Bonsai[38], 0, [0, sexp_of_t], _b3_, _b2_, _b1_, _b0_, _bZ_);
        return caml_call3(Bonsai[49][5][1], _ac_, _b4_, _bY_);
       }
       function _bW_(initialize_suggestion_list){
        return caml_call1(initialize_suggestion_list, 1);
       }
       var
        _bX_ =
          caml_call3(Bonsai[49][5][8], _ad_, initialize_suggestion_list, _bW_);
       return caml_call3(Bonsai[49][5][1], _ae_, _bX_, _bV_);
      }
      function _bS_(param){
       var pattern_syntax_079 = param[2];
       return pattern_syntax_079;
      }
      var
       _bT_ = caml_call3(Bonsai[49][5][4], _af_, pattern_syntax_078, _bS_),
       _bU_ = caml_call1(Bonsai[49][5][6], _bT_);
      return caml_call3(Bonsai[49][5][1], _ag_, _bU_, _bR_);
     }
     function _bO_(param){
      var pattern_syntax_080 = param[1];
      return pattern_syntax_080;
     }
     var
      _bP_ = caml_call3(Bonsai[49][5][4], _ah_, pattern_syntax_078, _bO_),
      _bQ_ = caml_call1(Bonsai[49][5][6], _bP_);
     return caml_call3(Bonsai[49][5][1], _ai_, _bQ_, _bN_);
    }
    var _bK_ = caml_call4(Bonsai[11], 0, 0, 0, 0);
    return caml_call3(Bonsai[49][5][1], _aj_, _bK_, _bJ_);
   }
   function sexp_of_t$1(sexp_of_k, param){
    var
     arg1_162 = param[2],
     arg0_161 = param[1],
     res0_163 = caml_call1(Core[389], arg0_161),
     res1_164 = caml_call1(sexp_of_k, arg1_162);
    return [1, [0, res0_163, [0, res1_164, 0]]];
   }
   function compare$1(compare_k){
    var _bs_ = 0;
    function _bt_(_bz_){return _bz_[2];}
    var _bu_ = [0, caml_call2(Core_Comparable[2], compare_k, _bt_), _bs_];
    function _bv_(_by_){return _by_[1];}
    function _bw_(a_165, b_166){return caml_call2(Core[382], a_165, b_166);}
    var _bx_ = [0, caml_call2(Core_Comparable[2], _bw_, _bv_), _bu_];
    return caml_call1(Core_Comparable[1], _bx_);
   }
   var
    include = caml_call1(Core_Comparator[9], [0, compare$1, sexp_of_t$1]),
    comparator = include[1];
   function M(T){
    var _bq_ = T[1][2];
    function sexp_of_t(_br_){return sexp_of_t$1(_bq_, _br_);}
    var comparator$0 = caml_call1(comparator, T[1]);
    return [0, sexp_of_t, comparator$0];
   }
   var Map = [0];
   function collate
   (Cmp, preprocess, score, query_is_as_strict, to_result, input, query){
    var _bd_ = [0, M(Cmp)[2]], empty_result = caml_call1(Core_Map[4], _bd_);
    function _be_(input_and_query){
     function _bg_(param){
      var pattern_syntax_167 = param[1];
      return pattern_syntax_167;
     }
     var input = caml_call2(Ui_incr[78][4][6], input_and_query, _bg_);
     function _bh_(param){
      var pattern_syntax_168 = param[2];
      return pattern_syntax_168;
     }
     var query = caml_call2(Ui_incr[78][4][6], input_and_query, _bh_);
     function _bi_(input){
      var
       len = caml_call1(Core_Map[35], input),
       array = caml_call1(Core_Uniform_array[70], len),
       index = [0, 0];
      function _bj_(key, data){
       var _bp_ = [0, key, data, caml_call2(preprocess, key, data)];
       caml_call3(Core_Uniform_array[23], array, index[1], _bp_);
       index[1]++;
       return 0;
      }
      caml_call2(Core_Map[51], input, _bj_);
      var
       previous_queries = [0, 0],
       filtered_out_at_index = caml_call2(Core_Array[63], len, Core_Int[45]);
      function _bk_(query){
       var qs$1 = previous_queries[1], qs = qs$1;
       for(;;){
        if(qs){
         var qs$0 = qs[2], q = qs[1];
         if(! caml_call2(query_is_as_strict, query, q)){var qs = qs$0; continue;}
         var _bl_ = [0, q, qs$0];
        }
        else
         var _bl_ = 0;
        previous_queries[1] = [0, query, _bl_];
        var
         num_queries = caml_call1(Core_List[45], previous_queries[1]),
         _bm_ =
           function(index, acc, param){
            var
             preprocessed = param[3],
             data = param[2],
             key = param[1],
             _bn_ = caml_check_bound(filtered_out_at_index, index)[1 + index];
            if(caml_call2(Core[92], _bn_, num_queries))
             var score$0 = 0;
            else{
             var
              score$1 = caml_call2(score, query, preprocessed),
              num_queries$0 =
                caml_call2(Core[90], score$1, 0) ? num_queries : Core_Int[45];
             caml_check_bound(filtered_out_at_index, index)[1 + index] = num_queries$0;
             var score$0 = score$1;
            }
            if(caml_call2(Core[90], score$0, 0)) return acc;
            var
             new_key = [0, score$0, key],
             _bo_ = caml_call3(to_result, preprocessed, key, data);
            return caml_call3(Core_Map[37], acc, new_key, _bo_);
           };
        return caml_call3(Core_Uniform_array[34], array, empty_result, _bm_);
       }
      }
      return caml_call2(Ui_incr[78][4][6], query, _bk_);
     }
     return caml_call2(Ui_incr[78][4][1], input, _bi_);
    }
    var _bf_ = caml_call2(Bonsai[2][3], input, query);
    return caml_call2(Bonsai[48][2], _bf_, _be_);
   }
   var compare$2 = caml_int_compare;
   function equal$1(_bc_, _bb_){return _bc_ === _bb_ ? 1 : 0;}
   function sexp_of_t$2(param){return param ? _ak_ : _al_;}
   var Filter_strategy = [0, compare$2, all$1, equal$1, sexp_of_t$2];
   function stringable
   (Key,
    initial_query,
    max_visible_items,
    suggestion_list_kind,
    expand_direction,
    selected_item_attr,
    extra_list_container_attr,
    extra_input_attr,
    extra_attr,
    opt,
    _av_,
    filter_strategy,
    on_select,
    input){
    if(opt)
     var sth = opt[1], to_view = sth;
    else
     var
      to_view =
        function(param, string){
         return caml_call1(Virtual_dom_Node[6], string);
        };
    if(_av_)
     var sth$0 = _av_[1], let_syntax_175 = sth$0;
    else
     var let_syntax_175 = caml_call1(Bonsai[2][1], -101336657);
    function modify_input_on_select(get_key){
     function _a8_(param){
      var input = param[2], modify_input_on_select = param[1];
      return 718633343 === modify_input_on_select
              ? function(param, query){return query;}
              : 796177224
                <= modify_input_on_select
                ? function
                 (key, query){
                  var
                   _a__ = caml_call1(get_key, key),
                   _a$_ = caml_call2(Core_Map[44], input, _a__);
                  return caml_call2(Core_Option[39], _a$_, query);
                 }
                : function(param, _ba_){return cst$1;};
     }
     var _a9_ = caml_call2(Bonsai[49][5][7], let_syntax_175, input);
     return caml_call3(Bonsai[49][5][8], _am_, _a9_, _a8_);
    }
    if(filter_strategy){
     var
      _aw_ =
        function(on_select){
         function _aK_(result){
          function _a1_(result){
           var
            _a2_ = result[5],
            _a3_ = result[4],
            _a4_ = result[3],
            _a5_ = result[2];
           function _a6_(_a7_){return _a7_[2];}
           return [0,
                   caml_call2(Core_Option[34], result[1], _a6_),
                   _a5_,
                   _a4_,
                   _a3_,
                   _a2_];
          }
          return caml_call3(Bonsai[49][5][8], _an_, result, _a1_);
         }
         function _aL_(modify_input_on_select){
          var _aP_ = 0;
          function _aQ_(query){
           function _aR_(query){
            function _aU_(item, param, _aZ_){
             var _a0_ = [0, caml_call1(Virtual_dom_Node[6], item), 0];
             return caml_call3(Virtual_dom_Node[17], 0, 0, _a0_);
            }
            function _aV_(param, _aY_){
             var as = _aY_[1], q = param[1];
             return caml_call2(Core_String[68], q, as);
            }
            function _aW_(param, item){
             var query = param[2];
             return caml_call2(Fuzzy_search[2], query, item);
            }
            function _aX_(param, data){return data;}
            return collate([0, Key[2]], _aX_, _aW_, _aV_, _aU_, input, query);
           }
           function _aS_(query){
            return [0, query, caml_call1(Fuzzy_search[1][1], query)];
           }
           var _aT_ = caml_call3(Bonsai[49][5][8], _ao_, query, _aS_);
           return caml_call3(Bonsai[49][5][1], _ap_, _aT_, _aR_);
          }
          return create
                  (M([0, Key[2]]),
                   initial_query,
                   max_visible_items,
                   suggestion_list_kind,
                   expand_direction,
                   selected_item_attr,
                   extra_list_container_attr,
                   extra_input_attr,
                   extra_attr,
                   0,
                   [0, modify_input_on_select],
                   _aQ_,
                   on_select,
                   _aP_);
         }
         var
          _aM_ = modify_input_on_select(function(_aO_){return _aO_[2];}),
          _aN_ = caml_call3(Bonsai[49][5][1], _aq_, _aM_, _aL_);
         return caml_call3(Bonsai[49][5][1], _ar_, _aN_, _aK_);
        },
      _ax_ =
        function(on_select, param){
         var key = param[2];
         return caml_call1(on_select, key);
        },
      _ay_ = caml_call3(Bonsai[49][5][8], _as_, on_select, _ax_);
     return caml_call3(Bonsai[49][5][1], _at_, _ay_, _aw_);
    }
    function _az_(modify_input_on_select){
     var _aC_ = 0;
     return create
             (Key,
              initial_query,
              max_visible_items,
              suggestion_list_kind,
              expand_direction,
              selected_item_attr,
              extra_list_container_attr,
              extra_input_attr,
              extra_attr,
              0,
              [0, modify_input_on_select],
              function(query){
               function _aD_(incr){
                function _aF_(param){
                 var pattern_syntax_179 = param[2];
                 return pattern_syntax_179;
                }
                var input = caml_call2(Ui_incr[78][4][6], incr, _aF_);
                function _aG_(param){
                 var pattern_syntax_180 = param[1];
                 return pattern_syntax_180;
                }
                var
                 let_syntax_182 = caml_call2(Ui_incr[78][4][6], incr, _aG_);
                function _aH_(key, string){
                 function _aI_(param){
                  var query = param[2], string = param[1];
                  return caml_call3
                           (Fuzzy_match[1], Core_Char[34][19], query, string)
                          ? [0, caml_call2(to_view, key, string)]
                          : 0;
                 }
                 var
                  _aJ_ =
                    caml_call2(Ui_incr[78][4][21], string, let_syntax_182);
                 return caml_call2(Ui_incr[78][4][6], _aJ_, _aI_);
                }
                return caml_call5(Incr_map[6], 0, 0, 0, input, _aH_);
               }
               var _aE_ = caml_call2(Bonsai[2][3], query, input);
               return caml_call2(Bonsai[48][2], _aE_, _aD_);
              },
              on_select,
              _aC_);
    }
    var _aA_ = modify_input_on_select(function(_aB_){return _aB_;});
    return caml_call3(Bonsai[49][5][1], _au_, _aA_, _az_);
   }
   caml_call1(Ppx_inline_test_lib[7], cst_bonsai_web_ui_query_box);
   caml_call1(Ppx_expect_runtime[1][2], 0);
   caml_call1(Ppx_bench_lib_Benchmark_accumu[1][2], 0);
   caml_call1(Ppx_module_timer_runtime[5], cst_Bonsai_web_ui_query_box);
   var
    Bonsai_web_ui_query_box =
      [0,
       Suggestion_list_kind,
       Expand_direction,
       focus_input,
       set_query,
       query,
       view,
       selected_item,
       create,
       Filter_strategy,
       stringable,
       [0, [0, comparator, M, Map], collate]];
   runtime.caml_register_global
    (217, Bonsai_web_ui_query_box, cst_Bonsai_web_ui_query_box$0);
   return;
  }
  (globalThis));

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLjAsImZpbGUiOiJib25zYWlfd2ViX3VpX3F1ZXJ5X2JveC5jbWEuanMiLCJzb3VyY2VSb290IjoiIiwibmFtZXMiOlsiZXJyb3Jfc291cmNlXzA2NCIsImFsbCIsImVycm9yX3NvdXJjZV8wNzIiLCJhbGwkMCIsImFsbCQxIiwiY29tcGFyZV9zdWdnZXN0aW9uX2xpc3Rfc3RhdGUiLCJjbXBfayIsImFfMDIwIiwiYl8wMjEiLCJhXzAyMiIsImJfMDIzIiwidF9vZl9zZXhwIiwic2V4cF8wNjUiLCJzZXhwX29mX3QiLCJjb21wYXJlIiwiZXF1YWwiLCJ0X29mX3NleHAkMCIsInNleHBfMDczIiwic2V4cF9vZl90JDAiLCJjb21wYXJlJDAiLCJlcXVhbCQwIiwic2VsZWN0X2tleSIsImZpcnN0X3RyeSIsInRoZW5fdHJ5IiwiZWxzZV91c2UiLCJrZXkiLCJrZXkkMCIsImZvY3VzX2lucHV0IiwiciIsInNldF9xdWVyeSIsInF1ZXJ5IiwidmlldyIsInNlbGVjdGVkX2l0ZW0iLCJjcmVhdGUiLCJLZXkiLCJvcHQiLCJmIiwib25fc2VsZWN0Iiwic3RoIiwiaW5pdGlhbF9xdWVyeSIsInN0aCQwIiwibWF4X3Zpc2libGVfaXRlbXMiLCJzdGgkMSIsInN1Z2dlc3Rpb25fbGlzdF9raW5kIiwic3RoJDIiLCJleHBhbmRfZGlyZWN0aW9uIiwic3RoJDMiLCJzZWxlY3RlZF9pdGVtX2F0dHIiLCJzdGgkNCIsImV4dHJhX2xpc3RfY29udGFpbmVyX2F0dHIiLCJzdGgkNSIsImV4dHJhX2lucHV0X2F0dHIiLCJzdGgkNiIsImV4dHJhX2F0dHIiLCJzdGgkNyIsIm9uX2JsdXIiLCJzdGgkOCIsIm1vZGlmeV9pbnB1dF9vbl9zZWxlY3QiLCJzZWxlY3RlZF9rZXkiLCJwYXR0ZXJuX3N5bnRheF8wNzgiLCJzdWdnZXN0aW9uX2xpc3RfaXNfaW5pdGlhbGl6ZWQiLCJpbml0aWFsaXplX3N1Z2dlc3Rpb25fbGlzdCIsImluamVjdF9pbml0aWFsaXplX3N1Z2dlc3Rpb25fbCIsInBhdHRlcm5fc3ludGF4XzA4MyIsInN1Z2dlc3Rpb25fbGlzdF9zdGF0ZSIsIm9mZnNldCIsIml0ZW1zIiwiaW5qZWN0IiwiZ2V0X2l0ZW1zIiwicGF0dGVybl9zeW50YXhfMTI4IiwiZm9jdXNfYXR0ciIsImJsdXJfaW5wdXQiLCJsZXRfc3ludGF4XzE0NyIsImxldF9zeW50YXhfMTU0IiwiaW5wdXRfaWQiLCJzdWdnZXN0aW9uX2NvbnRhaW5lcl9pZCIsImhhbmRsZV9rZXlkb3duIiwiaXNfb3BlbiIsInN1Z2dlc3Rpb25zX3Bvc2l0aW9uIiwiY29udGFpbmVyX3Bvc2l0aW9uIiwiaXNfb3BlbiQwIiwic3VnZ2VzdGlvbnNfcG9zaXRpb24kMCIsImNvbnRhaW5lcl9wb3NpdGlvbiQwIiwiaWQiLCJvbl9ibHVyJDAiLCJldiIsImlucHV0IiwiZGlyZWN0ZWRfaXRlbXMkMCIsInBvc2l0aW9uX2Fib3ZlX29yX2JlbG93IiwiYXR0ciIsInN1Z2dlc3Rpb25zIiwiY29tcGFyaXNvbiIsInN1Z2dlc3Rpb25zX2NvbnRhaW5lciIsIm1vdmVfbmV4dCIsIm1vdmVfcHJldiIsImRvd24iLCJ1cCIsInBhdHRlcm5fc3ludGF4XzEyOSIsInBhdHRlcm5fc3ludGF4XzEzMCIsInBhdHRlcm5fc3ludGF4XzEzMSIsIml0ZW0iLCJzZWxlY3RlZF9rZXkkMCIsInNlbGVjdGVkX2F0dHIiLCJvZmZzZXQkMCIsIm1vdmVfdG9fZWZmZWN0IiwiayIsImxlbmd0aCIsIml0ZW1zJDAiLCJyZXN1bHQiLCJ2aXNpYmxlX2l0ZW1zIiwiYWRkX2VsZW1lbnRfZnJvbV9zaWRlIiwic2lkZSIsImRhdGEiLCJwYXR0ZXJuX3N5bnRheF8xMDIiLCJrZXkkMSIsInBhdHRlcm5fc3ludGF4XzEwMyIsInBhdHRlcm5fc3ludGF4XzA4NCIsInBhdHRlcm5fc3ludGF4XzA4NSIsInBhdHRlcm5fc3ludGF4XzA4NiIsInBhdHRlcm5fc3ludGF4XzA4NyIsInBhdHRlcm5fc3ludGF4XzA4OCIsInhfMDg5Iiwib2Zfa18wMTYiLCJvZmZzZXRfMDM4Iiwic3VnZ2VzdGlvbl9saXN0X3N0YXRlXzAzNiIsInF1ZXJ5XzAzNCIsImFyZ18wMzkiLCJibmRzXzAzMyIsImFyZ18wMzciLCJhcmcwXzAxNyIsInJlczBfMDE4IiwiYm5kc18wMzMkMCIsImFyZ18wMzUiLCJibmRzXzAzMyQxIiwibW9kZWwiLCJwYXR0ZXJuX3N5bnRheF8wOTIiLCJwYXR0ZXJuX3N5bnRheF8wOTUiLCJwYXR0ZXJuX3N5bnRheF8wOTMiLCJhY3Rpb24iLCJuZXh0X3N1Z2dlc3Rpb25fbGlzdF9zdGF0ZSIsImZpcnN0X2tleSIsInNlY29uZF9rZXkiLCJwcmV2X3N1Z2dlc3Rpb25fbGlzdF9zdGF0ZSIsImxhc3Rfa2V5Iiwic3VnZ2VzdGlvbl9saXN0X3N0YXRlJDAiLCJzdWdnZXN0aW9uX2xpc3Rfc3RhdGUkMSIsImNvbXBhcmlzb24kMCIsIm9mZnNldCQyIiwic3VnZ2VzdGlvbl9saXN0X3N0YXRlJDIiLCJvZmZzZXQkMSIsImFfMDkwIiwiYl8wOTEiLCJiXzAwMiIsImFfMDAxIiwiYV8wMDMiLCJiXzAwNCIsInBhdHRlcm5fc3ludGF4XzA3OSIsInBhdHRlcm5fc3ludGF4XzA4MCIsInNleHBfb2ZfdCQxIiwic2V4cF9vZl9rIiwiYXJnMV8xNjIiLCJhcmcwXzE2MSIsInJlczBfMTYzIiwicmVzMV8xNjQiLCJjb21wYXJlJDEiLCJjb21wYXJlX2siLCJhXzE2NSIsImJfMTY2IiwiY29tcGFyYXRvciQwIiwiY29sbGF0ZSIsIkNtcCIsInByZXByb2Nlc3MiLCJzY29yZSIsInF1ZXJ5X2lzX2FzX3N0cmljdCIsInRvX3Jlc3VsdCIsImVtcHR5X3Jlc3VsdCIsImlucHV0X2FuZF9xdWVyeSIsInBhdHRlcm5fc3ludGF4XzE2NyIsInBhdHRlcm5fc3ludGF4XzE2OCIsImxlbiIsImFycmF5IiwiaW5kZXgiLCJwcmV2aW91c19xdWVyaWVzIiwiZmlsdGVyZWRfb3V0X2F0X2luZGV4IiwicXMkMSIsInFzIiwicXMkMCIsInEiLCJudW1fcXVlcmllcyIsImFjYyIsInByZXByb2Nlc3NlZCIsInNjb3JlJDAiLCJzY29yZSQxIiwibnVtX3F1ZXJpZXMkMCIsIm5ld19rZXkiLCJjb21wYXJlJDIiLCJlcXVhbCQxIiwic2V4cF9vZl90JDIiLCJzdHJpbmdhYmxlIiwiZmlsdGVyX3N0cmF0ZWd5IiwidG9fdmlldyIsInN0cmluZyIsImxldF9zeW50YXhfMTc1IiwiZ2V0X2tleSIsImFzIiwiaW5jciIsInBhdHRlcm5fc3ludGF4XzE3OSIsInBhdHRlcm5fc3ludGF4XzE4MCIsImxldF9zeW50YXhfMTgyIl0sInNvdXJjZXMiOlsiL2hvbWUvbGlhbS1jYXJwZW50ZXIvLm9wYW0vcGVyc29uYWwtc2l0ZS9saWIvYm9uc2FpL3dlYl91aV9xdWVyeV9ib3gvYm9uc2FpX3dlYl91aV9xdWVyeV9ib3gubWwiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Rzs7Ozs7Rzs7Ozs7Rzs7Ozs7Rzs7Ozs7Rzs7Ozs7Rzs7Ozs7Ozs7OztJQXFDRUE7O0lBQUFDO0lBT0FDOztJQUFBQztJQWdqQkFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7WUF0bEJBQyw4QkFBQUMsT0FBQUMsT0FBQUM7SUFBQSxHQUFBRCxVQUFBQyxPQUFBO2NBQUFEO1VBQUFBO2dCQUFBQyx3QkFBQUEsT0FDRTtNQUFBOztlQURGQSxvQkFFRTtRQUZGQSxPQUVFOzs7U0FDQUMsUUFIRkY7ZUFBQUM7VUFHRUUsUUFIRkY7TUFHZ0IsT0FBQSxXQUhoQkYsT0FHRUcsT0FBQUM7O1FBSEZGLE9BRUU7O0lBREE7R0FHK0I7R0EyQmpDLFNBQUFHLFVBQUFDO0lBQUE7O2NBQUFBO2lCQUFBQTs7Ozs7OztPQUNFOztNQUNBOztnQkFGRkE7O01BQUEsT0FBQTs2Q0FBQVosa0JBQUFZOzs7TUFBQSxPQUFBOzZDQUFBWixrQkFBQVk7Ozs7Ozs7O01BQUEsT0FB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QUNBWjtTQUFRLE9BQUEsV0FEUlksV0FDQVo7O2dEQWhEWFk7OztrQkFzQlNvQjtLQUNSO0tBQUEsT0Fua0JBeEI7Y0FnaUJNQztjQUNQSztjQUNBRTtjQUNBRTtjQUNBRTtjQUNBRTtjQUNBRTtjQUNBRTtjQUNBRTs7a0JBMEJTSTt1QkFhRTNCOzZCQUMrQytLOztxQkFDdEJDO3dCQUFBQTs7b0JBQUF4SCxzQ0FEc0J1SDs7cUJBQzdCRTt3QkFBQUE7OztpQkFHUkMsK0NBSnFDSDs4QkFFZHBMLEtBQVVnTDs7c0JBRXpDM0ssa0JBRFMySztrQkFFVixPQUFBOytEQURDM0ssT0FEUzJLO2dDQUdILFdBN0NsQkQsU0F5QzJDL0ssS0FDdEJnTDs7Ozs7bURBRGdDQSxRQUVqQ087OztnQkFGaUIsT0FBQSxpQ0FERjFIOztlQURYLFdBQUEseUJBRGR4RCxPQWxDWndEO2VBbUNzRCxPQUFBO2NBT2pDO2NBM0NwQmpEOztJQTRDSztJQXRCNkIsV0FYL0JvQixzQzs7Ozs7Ozs7Ozs7O09BM2pCRjlCO09BREFFO09BREFDO09BREFDO09BREFDO09BUUFDOztPQThoQkFxSztvQ0EvRUU3Qjs7OztFIiwic291cmNlc0NvbnRlbnQiOlsib3BlbiEgQ29yZVxub3BlbiBCb25zYWlfd2ViXG5vcGVuIEJvbnNhaS5MZXRfc3ludGF4XG5vcGVuIFZkb21cblxubW9kdWxlIE1vZGVsID0gc3RydWN0XG4gIHR5cGUgJ2sgc3VnZ2VzdGlvbl9saXN0X3N0YXRlID1cbiAgICB8IENsb3NlZFxuICAgIHwgRmlyc3RfaXRlbVxuICAgIHwgU2VsZWN0ZWQgb2YgJ2tcbiAgW0BAZGVyaXZpbmcgZXF1YWwsIHNleHAsIGNvbXBhcmVdXG5cbiAgdHlwZSAnayB0ID1cbiAgICB7IHF1ZXJ5IDogc3RyaW5nXG4gICAgOyBzdWdnZXN0aW9uX2xpc3Rfc3RhdGUgOiAnayBzdWdnZXN0aW9uX2xpc3Rfc3RhdGVcbiAgICA7IG9mZnNldCA6IGludFxuICAgIH1cbiAgW0BAZGVyaXZpbmcgZXF1YWwsIHNleHBdXG5lbmRcblxubW9kdWxlIEFjdGlvbiA9IHN0cnVjdFxuICB0eXBlICdrIHQgPVxuICAgIHwgU2V0X3F1ZXJ5IG9mIHN0cmluZ1xuICAgIHwgTW92ZV9uZXh0XG4gICAgfCBNb3ZlX3ByZXZcbiAgICB8IE1vdmVfdG8gb2ZcbiAgICAgICAgeyBrZXkgOiAna1xuICAgICAgICA7IG9mZnNldCA6IGludFxuICAgICAgICB9XG4gICAgfCBNb3ZlX25leHRfd2l0aF9maXhlZF9vZmZzZXRcbiAgICB8IE1vdmVfcHJldl93aXRoX2ZpeGVkX29mZnNldFxuICAgIHwgQ2xvc2Vfc3VnZ2VzdGlvbnNcbiAgICB8IE9wZW5fc3VnZ2VzdGlvbnNcbiAgW0BAZGVyaXZpbmcgc2V4cF1cbmVuZFxuXG5tb2R1bGUgU3VnZ2VzdGlvbl9saXN0X2tpbmQgPSBzdHJ1Y3RcbiAgdHlwZSB0ID1cbiAgICB8IFRyYW5zaWVudF9vdmVybGF5XG4gICAgfCBQZXJtYW5lbnRfZml4dHVyZVxuICBbQEBkZXJpdmluZyBzZXhwLCBjb21wYXJlLCBlbnVtZXJhdGUsIGVxdWFsXVxuZW5kXG5cbm1vZHVsZSBFeHBhbmRfZGlyZWN0aW9uID0gc3RydWN0XG4gIHR5cGUgdCA9XG4gICAgfCBEb3duXG4gICAgfCBVcFxuICBbQEBkZXJpdmluZyBzZXhwLCBjb21wYXJlLCBlbnVtZXJhdGUsIGVxdWFsXVxuZW5kXG5cbmxldCBzZWxlY3Rfa2V5IH5maXJzdF90cnkgfnRoZW5fdHJ5IH5lbHNlX3VzZSA9XG4gIG1hdGNoIGZpcnN0X3RyeSB3aXRoXG4gIHwgU29tZSAoa2V5LCBfKSAtPiBNb2RlbC5TZWxlY3RlZCBrZXlcbiAgfCBOb25lIC0+XG4gICAgKG1hdGNoIHRoZW5fdHJ5IHdpdGhcbiAgICAgfCAobGF6eSAoU29tZSAoa2V5LCBfKSkpIC0+IE1vZGVsLlNlbGVjdGVkIGtleVxuICAgICB8IChsYXp5IE5vbmUpIC0+IGVsc2VfdXNlKVxuOztcblxudHlwZSAnayB0ID1cbiAgeyBzZWxlY3RlZF9pdGVtIDogJ2sgb3B0aW9uXG4gIDsgdmlldyA6IFZkb20uTm9kZS50XG4gIDsgcXVlcnkgOiBzdHJpbmdcbiAgOyBzZXRfcXVlcnkgOiBzdHJpbmcgLT4gdW5pdCBFZmZlY3QudFxuICA7IGZvY3VzX2lucHV0IDogdW5pdCBFZmZlY3QudFxuICB9XG5bQEBkZXJpdmluZyBmaWVsZHMgfmdldHRlcnNdXG5cbmxldCBjcmVhdGVcbiAgKHR5cGUgayBjbXApXG4gIChtb2R1bGUgS2V5IDogQm9uc2FpLkNvbXBhcmF0b3Igd2l0aCB0eXBlIHQgPSBrIGFuZCB0eXBlIGNvbXBhcmF0b3Jfd2l0bmVzcyA9IGNtcClcbiAgPyhpbml0aWFsX3F1ZXJ5ID0gXCJcIilcbiAgPyhtYXhfdmlzaWJsZV9pdGVtcyA9IFZhbHVlLnJldHVybiAxMClcbiAgPyhzdWdnZXN0aW9uX2xpc3Rfa2luZCA9IFZhbHVlLnJldHVybiBTdWdnZXN0aW9uX2xpc3Rfa2luZC5UcmFuc2llbnRfb3ZlcmxheSlcbiAgPyhleHBhbmRfZGlyZWN0aW9uID0gVmFsdWUucmV0dXJuIEV4cGFuZF9kaXJlY3Rpb24uRG93bilcbiAgPyhzZWxlY3RlZF9pdGVtX2F0dHIgPSBWYWx1ZS5yZXR1cm4gQXR0ci5lbXB0eSlcbiAgPyhleHRyYV9saXN0X2NvbnRhaW5lcl9hdHRyID0gVmFsdWUucmV0dXJuIEF0dHIuZW1wdHkpXG4gID8oZXh0cmFfaW5wdXRfYXR0ciA9IFZhbHVlLnJldHVybiBBdHRyLmVtcHR5KVxuICA/KGV4dHJhX2F0dHIgPSBWYWx1ZS5yZXR1cm4gQXR0ci5lbXB0eSlcbiAgPyhvbl9ibHVyID0gVmFsdWUucmV0dXJuIChFZmZlY3QucmV0dXJuICgpKSlcbiAgPyhtb2RpZnlfaW5wdXRfb25fc2VsZWN0ID0gVmFsdWUucmV0dXJuIChmdW4gX3NlbGVjdGVkX2tleSBfcXVlcnkgLT4gXCJcIikpXG4gIH5mXG4gIH5vbl9zZWxlY3RcbiAgKClcbiAgPVxuICBsZXQlc3ViIHN1Z2dlc3Rpb25fbGlzdF9pc19pbml0aWFsaXplZCwgaW5pdGlhbGl6ZV9zdWdnZXN0aW9uX2xpc3QgPVxuICAgIEJvbnNhaS5zdGF0ZSBmYWxzZVxuICBpblxuICBsZXQlc3ViIGluamVjdF9pbml0aWFsaXplX3N1Z2dlc3Rpb25fbGlzdCA9XG4gICAgbGV0JWFyciBpbml0aWFsaXplX3N1Z2dlc3Rpb25fbGlzdCA9IGluaXRpYWxpemVfc3VnZ2VzdGlvbl9saXN0IGluXG4gICAgaW5pdGlhbGl6ZV9zdWdnZXN0aW9uX2xpc3QgdHJ1ZVxuICBpblxuICBsZXQlc3ViIHsgTW9kZWwucXVlcnk7IHN1Z2dlc3Rpb25fbGlzdF9zdGF0ZTsgb2Zmc2V0IH0sIGluamVjdCwgaXRlbXMsIF8gPVxuICAgIGxldCBtb2R1bGUgTSA9IHN0cnVjdFxuICAgICAgdHlwZSB0ID0gS2V5LnQgTW9kZWwudCBbQEBkZXJpdmluZyBzZXhwX29mXVxuXG4gICAgICBsZXQgZXF1YWwgYSBiID0gTW9kZWwuZXF1YWwgKGZ1biBhIGIgLT4gS2V5LmNvbXBhcmF0b3IuY29tcGFyZSBhIGIgPSAwKSBhIGJcbiAgICBlbmRcbiAgICBpblxuICAgIEJvbnNhaS53cmFwXG4gICAgICAoKVxuICAgICAgfnNleHBfb2ZfbW9kZWw6WyVzZXhwX29mOiBNLnRdXG4gICAgICB+ZXF1YWw6WyVlcXVhbDogTS50XVxuICAgICAgfmRlZmF1bHRfbW9kZWw6XG4gICAgICAgIHsgTW9kZWwucXVlcnkgPSBpbml0aWFsX3F1ZXJ5OyBzdWdnZXN0aW9uX2xpc3Rfc3RhdGUgPSBDbG9zZWQ7IG9mZnNldCA9IDAgfVxuICAgICAgfmFwcGx5X2FjdGlvbjpcbiAgICAgICAgKGZ1blxuICAgICAgICAgIChfIDogXyBCb25zYWkuQXBwbHlfYWN0aW9uX2NvbnRleHQudClcbiAgICAgICAgICAoXywgXywgaXRlbXMsIG1heF92aXNpYmxlX2l0ZW1zKVxuICAgICAgICAgIG1vZGVsXG4gICAgICAgICAgYWN0aW9uXG4gICAgICAgICAgLT5cbiAgICAgICAgbGV0IHN1Z2dlc3Rpb25fbGlzdF9zdGF0ZSA9XG4gICAgICAgICAgKCogV2Ugbm9ybWFsaXplIHdoaWNoIGl0ZW0gaXMgc2VsZWN0ZWQgaW4gY2FzZSB0aGUgbGlzdCBoYXMgY2hhbmdlZFxuICAgICAgICAgICAgICAgICBzaW5jZSB0aGUgbGFzdCBhY3Rpb24uIE5vcm1hbGl6YXRpb24ganVzdCBtZWFucyBzZXR0aW5nIHRoZVxuICAgICAgICAgICAgICAgICBzZWxlY3RlZCBrZXkgdG8gdGhlIGNsb3Nlc3QgdGhpbmcgdGhhdCBhY3R1YWxseSBleGlzdHMuICopXG4gICAgICAgICAgbWF0Y2ggbW9kZWwuc3VnZ2VzdGlvbl9saXN0X3N0YXRlIHdpdGhcbiAgICAgICAgICB8IFNlbGVjdGVkIGtleSAtPlxuICAgICAgICAgICAgc2VsZWN0X2tleVxuICAgICAgICAgICAgICB+Zmlyc3RfdHJ5OihNYXAuY2xvc2VzdF9rZXkgaXRlbXMgYExlc3Nfb3JfZXF1YWxfdG8ga2V5KVxuICAgICAgICAgICAgICB+dGhlbl90cnk6KGxhenkgKE1hcC5jbG9zZXN0X2tleSBpdGVtcyBgR3JlYXRlcl9vcl9lcXVhbF90byBrZXkpKVxuICAgICAgICAgICAgICB+ZWxzZV91c2U6Rmlyc3RfaXRlbVxuICAgICAgICAgIHwgRmlyc3RfaXRlbSAtPiBGaXJzdF9pdGVtXG4gICAgICAgICAgfCBDbG9zZWQgLT4gQ2xvc2VkXG4gICAgICAgIGluXG4gICAgICAgIGxldCBuZXh0X3N1Z2dlc3Rpb25fbGlzdF9zdGF0ZSAoKSA9XG4gICAgICAgICAgbWF0Y2ggc3VnZ2VzdGlvbl9saXN0X3N0YXRlIHdpdGhcbiAgICAgICAgICB8IFNlbGVjdGVkIGtleSAtPlxuICAgICAgICAgICAgc2VsZWN0X2tleVxuICAgICAgICAgICAgICB+Zmlyc3RfdHJ5OihNYXAuY2xvc2VzdF9rZXkgaXRlbXMgYEdyZWF0ZXJfdGhhbiBrZXkpXG4gICAgICAgICAgICAgIH50aGVuX3RyeToobGF6eSAoTWFwLm1pbl9lbHQgaXRlbXMpKVxuICAgICAgICAgICAgICB+ZWxzZV91c2U6KFNlbGVjdGVkIGtleSlcbiAgICAgICAgICB8IEZpcnN0X2l0ZW0gLT5cbiAgICAgICAgICAgIChtYXRjaCBNYXAubWluX2VsdCBpdGVtcyB3aXRoXG4gICAgICAgICAgICAgfCBOb25lIC0+IEZpcnN0X2l0ZW1cbiAgICAgICAgICAgICB8IFNvbWUgKGZpcnN0X2tleSwgXykgLT5cbiAgICAgICAgICAgICAgIChtYXRjaCBNYXAuY2xvc2VzdF9rZXkgaXRlbXMgYEdyZWF0ZXJfdGhhbiBmaXJzdF9rZXkgd2l0aFxuICAgICAgICAgICAgICAgIHwgTm9uZSAtPiBTZWxlY3RlZCBmaXJzdF9rZXlcbiAgICAgICAgICAgICAgICB8IFNvbWUgKHNlY29uZF9rZXksIF8pIC0+IFNlbGVjdGVkIHNlY29uZF9rZXkpKVxuICAgICAgICAgIHwgQ2xvc2VkIC0+IEZpcnN0X2l0ZW1cbiAgICAgICAgaW5cbiAgICAgICAgbGV0IHByZXZfc3VnZ2VzdGlvbl9saXN0X3N0YXRlICgpID1cbiAgICAgICAgICBtYXRjaCBtb2RlbC5zdWdnZXN0aW9uX2xpc3Rfc3RhdGUgd2l0aFxuICAgICAgICAgIHwgU2VsZWN0ZWQga2V5IC0+XG4gICAgICAgICAgICBzZWxlY3Rfa2V5XG4gICAgICAgICAgICAgIH5maXJzdF90cnk6KE1hcC5jbG9zZXN0X2tleSBpdGVtcyBgTGVzc190aGFuIGtleSlcbiAgICAgICAgICAgICAgfnRoZW5fdHJ5OihsYXp5IChNYXAubWF4X2VsdCBpdGVtcykpXG4gICAgICAgICAgICAgIH5lbHNlX3VzZTooU2VsZWN0ZWQga2V5KVxuICAgICAgICAgIHwgRmlyc3RfaXRlbSB8IENsb3NlZCAtPlxuICAgICAgICAgICAgKG1hdGNoIE1hcC5tYXhfZWx0IGl0ZW1zIHdpdGhcbiAgICAgICAgICAgICB8IE5vbmUgLT4gRmlyc3RfaXRlbVxuICAgICAgICAgICAgIHwgU29tZSAobGFzdF9rZXksIF8pIC0+IFNlbGVjdGVkIGxhc3Rfa2V5KVxuICAgICAgICBpblxuICAgICAgICBtYXRjaCBhY3Rpb24gd2l0aFxuICAgICAgICB8IEFjdGlvbi5TZXRfcXVlcnkgcXVlcnkgLT5cbiAgICAgICAgICBsZXQgc3VnZ2VzdGlvbl9saXN0X3N0YXRlID1cbiAgICAgICAgICAgIG1hdGNoIHN1Z2dlc3Rpb25fbGlzdF9zdGF0ZSB3aXRoXG4gICAgICAgICAgICB8IFNlbGVjdGVkIGtleSAtPiBNb2RlbC5TZWxlY3RlZCBrZXlcbiAgICAgICAgICAgIHwgRmlyc3RfaXRlbSB8IENsb3NlZCAtPiBGaXJzdF9pdGVtXG4gICAgICAgICAgaW5cbiAgICAgICAgICBsZXQgb2Zmc2V0ID0gbW9kZWwub2Zmc2V0IGluXG4gICAgICAgICAgeyBNb2RlbC5xdWVyeTsgc3VnZ2VzdGlvbl9saXN0X3N0YXRlOyBvZmZzZXQgfVxuICAgICAgICB8IE9wZW5fc3VnZ2VzdGlvbnMgLT4geyBtb2RlbCB3aXRoIHN1Z2dlc3Rpb25fbGlzdF9zdGF0ZSA9IEZpcnN0X2l0ZW0gfVxuICAgICAgICB8IENsb3NlX3N1Z2dlc3Rpb25zIC0+IHsgbW9kZWwgd2l0aCBzdWdnZXN0aW9uX2xpc3Rfc3RhdGUgPSBDbG9zZWQgfVxuICAgICAgICB8IE1vdmVfbmV4dCAtPlxuICAgICAgICAgIGxldCBzdWdnZXN0aW9uX2xpc3Rfc3RhdGUgPSBuZXh0X3N1Z2dlc3Rpb25fbGlzdF9zdGF0ZSAoKSBpblxuICAgICAgICAgIGxldCBvZmZzZXQgPVxuICAgICAgICAgICAgbGV0IGNvbXBhcmlzb24gPVxuICAgICAgICAgICAgICBNb2RlbC5jb21wYXJlX3N1Z2dlc3Rpb25fbGlzdF9zdGF0ZVxuICAgICAgICAgICAgICAgIChNYXAuY29tcGFyYXRvciBpdGVtcykuY29tcGFyZVxuICAgICAgICAgICAgICAgIG1vZGVsLnN1Z2dlc3Rpb25fbGlzdF9zdGF0ZVxuICAgICAgICAgICAgICAgIHN1Z2dlc3Rpb25fbGlzdF9zdGF0ZVxuICAgICAgICAgICAgaW5cbiAgICAgICAgICAgIGlmIGNvbXBhcmlzb24gPSAwXG4gICAgICAgICAgICB0aGVuIG1vZGVsLm9mZnNldFxuICAgICAgICAgICAgZWxzZSBpZiBjb21wYXJpc29uIDwgMFxuICAgICAgICAgICAgdGhlbiBtaW4gKG1heF92aXNpYmxlX2l0ZW1zIC0gMSkgKG1vZGVsLm9mZnNldCArIDEpXG4gICAgICAgICAgICBlbHNlIDBcbiAgICAgICAgICBpblxuICAgICAgICAgIHsgbW9kZWwgd2l0aCBzdWdnZXN0aW9uX2xpc3Rfc3RhdGU7IG9mZnNldCB9XG4gICAgICAgIHwgTW92ZV9wcmV2IC0+XG4gICAgICAgICAgbGV0IHN1Z2dlc3Rpb25fbGlzdF9zdGF0ZSA9IHByZXZfc3VnZ2VzdGlvbl9saXN0X3N0YXRlICgpIGluXG4gICAgICAgICAgbGV0IG9mZnNldCA9XG4gICAgICAgICAgICBsZXQgY29tcGFyaXNvbiA9XG4gICAgICAgICAgICAgIE1vZGVsLmNvbXBhcmVfc3VnZ2VzdGlvbl9saXN0X3N0YXRlXG4gICAgICAgICAgICAgICAgKE1hcC5jb21wYXJhdG9yIGl0ZW1zKS5jb21wYXJlXG4gICAgICAgICAgICAgICAgbW9kZWwuc3VnZ2VzdGlvbl9saXN0X3N0YXRlXG4gICAgICAgICAgICAgICAgc3VnZ2VzdGlvbl9saXN0X3N0YXRlXG4gICAgICAgICAgICBpblxuICAgICAgICAgICAgaWYgY29tcGFyaXNvbiA9IDBcbiAgICAgICAgICAgIHRoZW4gbW9kZWwub2Zmc2V0XG4gICAgICAgICAgICBlbHNlIGlmIGNvbXBhcmlzb24gPCAwXG4gICAgICAgICAgICB0aGVuIG1heF92aXNpYmxlX2l0ZW1zIC0gMVxuICAgICAgICAgICAgZWxzZSBtYXggMCAobW9kZWwub2Zmc2V0IC0gMSlcbiAgICAgICAgICBpblxuICAgICAgICAgIHsgbW9kZWwgd2l0aCBzdWdnZXN0aW9uX2xpc3Rfc3RhdGU7IG9mZnNldCB9XG4gICAgICAgIHwgTW92ZV90byB7IGtleTsgb2Zmc2V0IH0gLT5cbiAgICAgICAgICBpZiBNYXAubWVtIGl0ZW1zIGtleVxuICAgICAgICAgIHRoZW4geyBtb2RlbCB3aXRoIHN1Z2dlc3Rpb25fbGlzdF9zdGF0ZSA9IFNlbGVjdGVkIGtleTsgb2Zmc2V0IH1cbiAgICAgICAgICBlbHNlIG1vZGVsXG4gICAgICAgIHwgTW92ZV9uZXh0X3dpdGhfZml4ZWRfb2Zmc2V0IC0+XG4gICAgICAgICAgeyBtb2RlbCB3aXRoIHN1Z2dlc3Rpb25fbGlzdF9zdGF0ZSA9IG5leHRfc3VnZ2VzdGlvbl9saXN0X3N0YXRlICgpIH1cbiAgICAgICAgfCBNb3ZlX3ByZXZfd2l0aF9maXhlZF9vZmZzZXQgLT5cbiAgICAgICAgICB7IG1vZGVsIHdpdGggc3VnZ2VzdGlvbl9saXN0X3N0YXRlID0gcHJldl9zdWdnZXN0aW9uX2xpc3Rfc3RhdGUgKCkgfSlcbiAgICAgIH5mOihmdW4gbW9kZWwgaW5qZWN0IC0+XG4gICAgICAgIGxldCVzdWIgeyBNb2RlbC5xdWVyeTsgXyB9ID0gcmV0dXJuIG1vZGVsIGluXG4gICAgICAgIGxldCVzdWIgaXRlbXMgPVxuICAgICAgICAgIGlmJXN1YiBzdWdnZXN0aW9uX2xpc3RfaXNfaW5pdGlhbGl6ZWRcbiAgICAgICAgICB0aGVuIGYgcXVlcnlcbiAgICAgICAgICBlbHNlIEJvbnNhaS5jb25zdCAoTWFwLmVtcHR5IChtb2R1bGUgS2V5KSlcbiAgICAgICAgaW5cbiAgICAgICAgbGV0JWFyciBtb2RlbCA9IG1vZGVsXG4gICAgICAgIGFuZCBpbmplY3QgPSBpbmplY3RcbiAgICAgICAgYW5kIGl0ZW1zID0gaXRlbXNcbiAgICAgICAgYW5kIG1heF92aXNpYmxlX2l0ZW1zID0gbWF4X3Zpc2libGVfaXRlbXMgaW5cbiAgICAgICAgbW9kZWwsIGluamVjdCwgaXRlbXMsIG1heF92aXNpYmxlX2l0ZW1zKVxuICBpblxuICBsZXQlc3ViIHNlbGVjdGVkX2tleSA9XG4gICAgbWF0Y2glc3ViIHN1Z2dlc3Rpb25fbGlzdF9zdGF0ZSB3aXRoXG4gICAgfCBTZWxlY3RlZCBrZXkgLT5cbiAgICAgIGxldCVhcnIga2V5ID0ga2V5XG4gICAgICBhbmQgaXRlbXMgPSBpdGVtcyBpblxuICAgICAgKG1hdGNoIE1hcC5jbG9zZXN0X2tleSBpdGVtcyBgTGVzc19vcl9lcXVhbF90byBrZXkgd2l0aFxuICAgICAgIHwgU29tZSAoa2V5LCBfKSAtPiBTb21lIGtleVxuICAgICAgIHwgTm9uZSAtPlxuICAgICAgICAgKG1hdGNoIE1hcC5jbG9zZXN0X2tleSBpdGVtcyBgR3JlYXRlcl9vcl9lcXVhbF90byBrZXkgd2l0aFxuICAgICAgICAgIHwgU29tZSAoa2V5LCBfKSAtPiBTb21lIGtleVxuICAgICAgICAgIHwgTm9uZSAtPiBOb25lKSlcbiAgICB8IEZpcnN0X2l0ZW0gLT5cbiAgICAgIGxldCVhcnIgaXRlbXMgPSBpdGVtcyBpblxuICAgICAgKG1hdGNoIE1hcC5taW5fZWx0IGl0ZW1zIHdpdGhcbiAgICAgICB8IFNvbWUgKGtleSwgXykgLT4gU29tZSBrZXlcbiAgICAgICB8IE5vbmUgLT4gTm9uZSlcbiAgICB8IENsb3NlZCAtPiBCb25zYWkuY29uc3QgTm9uZVxuICBpblxuICBsZXQlc3ViIGl0ZW1zID1cbiAgICBsZXQlYXJyIGl0ZW1zID0gaXRlbXNcbiAgICBhbmQgbWF4X3Zpc2libGVfaXRlbXMgPSBtYXhfdmlzaWJsZV9pdGVtc1xuICAgIGFuZCBzZWxlY3RlZF9rZXkgPSBzZWxlY3RlZF9rZXlcbiAgICBhbmQgb2Zmc2V0ID0gb2Zmc2V0IGluXG4gICAgbWF0Y2ggc2VsZWN0ZWRfa2V5IHdpdGhcbiAgICB8IFNvbWUgc2VsZWN0ZWRfa2V5IC0+XG4gICAgICBsZXQgbGVuZ3RoID0gcmVmIDAgaW5cbiAgICAgIGxldCBpdGVtcyA9IHJlZiBpdGVtcyBpblxuICAgICAgbGV0IHJlc3VsdCA9IHJlZiAoTWFwLmVtcHR5IChtb2R1bGUgS2V5KSkgaW5cbiAgICAgICgqIFdlIGFsdGVybmF0ZSBiZXR3ZWVuIHRha2luZyBzb21ldGhpbmcgbGFyZ2VyIGFuZCBzbWFsbGVyIHRoYW4gdGhlXG4gICAgICAgICBzZWxlY3RlZCBrZXkgdW50aWwgd2UgaGF2ZSB0YWtlbiBbbWF4X3Zpc2libGVfaXRlbXNdIG9yIGhhdmUgZXhoYXVzdGVkXG4gICAgICAgICB0aGUgc291cmNlIGxpc3QuIFRoaXMgaXMgcHJvYmFibHkgbm90IGRvbmUgaW4gdGhlIG1vc3QgZWZmaWNpZW50XG4gICAgICAgICBtYW5uZXIsIGJ1dCBpdCdzIE8obWF4X3Zpc2libGVfaXRlbXMgKiBsb2cobnVtYmVyX29mX2l0ZW1zKSksIHdoaWNoIGlzXG4gICAgICAgICBwcm9iYWJseSBhY2NlcHRhYmxlIGlmIFttYXhfdmlzaWJsZV9pdGVtc10gaXMgc21hbGwuICopXG4gICAgICBsZXQgdmlzaWJsZV9pdGVtcyA9IG1pbiBtYXhfdmlzaWJsZV9pdGVtcyAoTWFwLmxlbmd0aCAhaXRlbXMpIGluXG4gICAgICBsZXQgb2Zmc2V0ID0gbWluIG9mZnNldCB2aXNpYmxlX2l0ZW1zIGluXG4gICAgICBsZXQgYWRkX2VsZW1lbnRfZnJvbV9zaWRlIHNpZGUgPVxuICAgICAgICBtYXRjaCBNYXAuY2xvc2VzdF9rZXkgIWl0ZW1zIHNpZGUgc2VsZWN0ZWRfa2V5IHdpdGhcbiAgICAgICAgfCBTb21lIChrZXksIGRhdGEpIC0+XG4gICAgICAgICAgcmVzdWx0IDo9IE1hcC5zZXQgIXJlc3VsdCB+a2V5IH5kYXRhO1xuICAgICAgICAgIGl0ZW1zIDo9IE1hcC5yZW1vdmUgIWl0ZW1zIGtleTtcbiAgICAgICAgICBpbmNyIGxlbmd0aDtcbiAgICAgICAgICB0cnVlXG4gICAgICAgIHwgTm9uZSAtPiBmYWxzZVxuICAgICAgaW5cbiAgICAgIHdoaWxlICFsZW5ndGggPCB2aXNpYmxlX2l0ZW1zIGRvXG4gICAgICAgICgqIEFuIGludmFyaWFudCBvZiB0aGlzIGxvb3AgaXMgdGhhdCB3ZSB3aWxsIGFsd2F5cyBpbmNyZW1lbnQgW2xlbmd0aF1cbiAgICAgICAgICAgZXZlcnkgaXRlcmF0aW9uLCB0aHVzIGd1YXJhbnRlZWluZyB0aGUgdGVybWluYXRpb24gb2YgdGhlIGxvb3AuIFRoaXNcbiAgICAgICAgICAgaXMgZ3VhcmFudGVlZCBiZWNhdXNlIFt2aXNpYmxlX2l0ZW1zXSBpcyBkZWZpbmVkIHRvIGJlIGF0IG1vc3QgdGhlXG4gICAgICAgICAgIGxlbmd0aCBvZiB0aGUgbWFwIG9mIGl0ZW1zIGJlaW5nIHB1bGxlZCBmcm9tLCB3aGljaCBlbnN1cmVzIHRoYXQgd2VcbiAgICAgICAgICAgd29uJ3QgcnVuIG91dCBvZiBpdGVtcyBjb2xsZWN0IHVudGlsIHdlIGhhdmUgbWV0IHRoZSBkZXNpcmVkIGxlbmd0aC4gKilcbiAgICAgICAgaWYgIWxlbmd0aCA8PSBvZmZzZXRcbiAgICAgICAgdGhlbiAoXG4gICAgICAgICAgaWYgbm90IChhZGRfZWxlbWVudF9mcm9tX3NpZGUgYExlc3Nfb3JfZXF1YWxfdG8pXG4gICAgICAgICAgdGhlbiBpZ25vcmUgKGFkZF9lbGVtZW50X2Zyb21fc2lkZSBgR3JlYXRlcl9vcl9lcXVhbF90byA6IGJvb2wpKVxuICAgICAgICBlbHNlIGlmIG5vdCAoYWRkX2VsZW1lbnRfZnJvbV9zaWRlIGBHcmVhdGVyX29yX2VxdWFsX3RvKVxuICAgICAgICB0aGVuIGlnbm9yZSAoYWRkX2VsZW1lbnRfZnJvbV9zaWRlIGBMZXNzX29yX2VxdWFsX3RvIDogYm9vbClcbiAgICAgIGRvbmU7XG4gICAgICAhcmVzdWx0XG4gICAgfCBOb25lIC0+XG4gICAgICBNYXAuc3VicmFuZ2VcbiAgICAgICAgaXRlbXNcbiAgICAgICAgfmxvd2VyX2JvdW5kOlVuYm91bmRlZFxuICAgICAgICB+dXBwZXJfYm91bmQ6XG4gICAgICAgICAgKG1hdGNoIE1hcC5udGggaXRlbXMgbWF4X3Zpc2libGVfaXRlbXMgd2l0aFxuICAgICAgICAgICB8IFNvbWUgKGssIF8pIC0+IEV4Y2wga1xuICAgICAgICAgICB8IE5vbmUgLT4gVW5ib3VuZGVkKVxuICBpblxuICBsZXQlc3ViIGdldF9pdGVtcyA9IEJvbnNhaS55b2luayBpdGVtcyBpblxuICBsZXQlc3ViIGl0ZW1zID1cbiAgICBCb25zYWkuYXNzb2NcbiAgICAgIChtb2R1bGUgS2V5KVxuICAgICAgaXRlbXNcbiAgICAgIH5mOihmdW4ga2V5IGl0ZW0gLT5cbiAgICAgICAgbGV0JWFyciBrZXkgPSBrZXlcbiAgICAgICAgYW5kIGl0ZW0gPSBpdGVtXG4gICAgICAgIGFuZCBnZXRfaXRlbXMgPSBnZXRfaXRlbXNcbiAgICAgICAgYW5kIHNlbGVjdGVkX2tleSA9IHNlbGVjdGVkX2tleVxuICAgICAgICBhbmQgc2VsZWN0ZWRfaXRlbV9hdHRyID0gc2VsZWN0ZWRfaXRlbV9hdHRyXG4gICAgICAgIGFuZCBpbmplY3QgPSBpbmplY3RcbiAgICAgICAgYW5kIG9uX3NlbGVjdCA9IG9uX3NlbGVjdFxuICAgICAgICBhbmQgcXVlcnkgPSBxdWVyeVxuICAgICAgICBhbmQgbW9kaWZ5X2lucHV0X29uX3NlbGVjdCA9IG1vZGlmeV9pbnB1dF9vbl9zZWxlY3QgaW5cbiAgICAgICAgbGV0IHNlbGVjdGVkX2F0dHIgPVxuICAgICAgICAgIG1hdGNoIHNlbGVjdGVkX2tleSB3aXRoXG4gICAgICAgICAgfCBTb21lIHNlbGVjdGVkX2tleSB3aGVuIEtleS5jb21wYXJhdG9yLmNvbXBhcmUga2V5IHNlbGVjdGVkX2tleSA9IDAgLT5cbiAgICAgICAgICAgIHNlbGVjdGVkX2l0ZW1fYXR0clxuICAgICAgICAgIHwgXyAtPiBBdHRyLmVtcHR5XG4gICAgICAgIGluXG4gICAgICAgIGxldCBtb3ZlX3RvX2VmZmVjdCA9XG4gICAgICAgICAgbGV0JWJpbmQuRWZmZWN0IGl0ZW1zID1cbiAgICAgICAgICAgIG1hdGNoJWJpbmQuRWZmZWN0IGdldF9pdGVtcyB3aXRoXG4gICAgICAgICAgICB8IEFjdGl2ZSBpdGVtcyAtPiBFZmZlY3QucmV0dXJuIGl0ZW1zXG4gICAgICAgICAgICB8IEluYWN0aXZlIC0+IEVmZmVjdC5uZXZlclxuICAgICAgICAgIGluXG4gICAgICAgICAgbGV0JWJpbmQuRWZmZWN0IG9mZnNldCA9IEVmZmVjdC5vZl9zeW5jX2Z1biAoTWFwLnJhbmsgaXRlbXMpIGtleSBpblxuICAgICAgICAgIGxldCBvZmZzZXQgPSBPcHRpb24udmFsdWUgb2Zmc2V0IH5kZWZhdWx0OjAgaW5cbiAgICAgICAgICBpbmplY3QgKE1vdmVfdG8geyBrZXk7IG9mZnNldCB9KVxuICAgICAgICBpblxuICAgICAgICBsZXQgYXR0ciA9XG4gICAgICAgICAgQXR0ci5tYW55XG4gICAgICAgICAgICBbIHNlbGVjdGVkX2F0dHJcbiAgICAgICAgICAgIDsgQXR0ci5vbl9tb3VzZWVudGVyIChmdW4gXyAtPiBtb3ZlX3RvX2VmZmVjdClcbiAgICAgICAgICAgIDsgQXR0ci5vbl9jbGljayAoZnVuIF8gLT5cbiAgICAgICAgICAgICAgICBFZmZlY3QuTWFueVxuICAgICAgICAgICAgICAgICAgWyBvbl9zZWxlY3Qga2V5XG4gICAgICAgICAgICAgICAgICA7IGluamVjdCAoU2V0X3F1ZXJ5IChtb2RpZnlfaW5wdXRfb25fc2VsZWN0IGtleSBxdWVyeSkpXG4gICAgICAgICAgICAgICAgICA7IGluamVjdCBDbG9zZV9zdWdnZXN0aW9uc1xuICAgICAgICAgICAgICAgICAgXSlcbiAgICAgICAgICAgIF1cbiAgICAgICAgaW5cbiAgICAgICAgTm9kZS5kaXYgfmF0dHJzOlsgYXR0ciBdIFsgaXRlbSBdKVxuICBpblxuICBsZXQlc3ViIHsgYXR0ciA9IGZvY3VzX2F0dHI7IGZvY3VzID0gZm9jdXNfaW5wdXQ7IGJsdXIgPSBibHVyX2lucHV0IH0gPVxuICAgIEJvbnNhaV93ZWIuRWZmZWN0LkZvY3VzLm9uX2VmZmVjdCB+bmFtZV9mb3JfdGVzdGluZzpcInF1ZXJ5LWJveFwiICgpXG4gIGluXG4gIGxldCVzdWIgaGFuZGxlX2tleWRvd24gPVxuICAgIGxldCVhcnIgaW5qZWN0ID0gaW5qZWN0XG4gICAgYW5kIHNlbGVjdGVkX2tleSA9IHNlbGVjdGVkX2tleVxuICAgIGFuZCBvbl9zZWxlY3QgPSBvbl9zZWxlY3RcbiAgICBhbmQgZXhwYW5kX2RpcmVjdGlvbiA9IGV4cGFuZF9kaXJlY3Rpb25cbiAgICBhbmQgc3VnZ2VzdGlvbl9saXN0X3N0YXRlID0gc3VnZ2VzdGlvbl9saXN0X3N0YXRlXG4gICAgYW5kIGJsdXJfaW5wdXQgPSBibHVyX2lucHV0XG4gICAgYW5kIHF1ZXJ5ID0gcXVlcnlcbiAgICBhbmQgbW9kaWZ5X2lucHV0X29uX3NlbGVjdCA9IG1vZGlmeV9pbnB1dF9vbl9zZWxlY3QgaW5cbiAgICBsZXQgb3BlbiBWZG9tIGluXG4gICAgbGV0IG9wZW4gSnNfb2Zfb2NhbWwgaW5cbiAgICBmdW4gZXYgLT5cbiAgICAgIGxldCBtb3ZlX25leHQgPSBFZmZlY3QuTWFueSBbIGluamVjdCBNb3ZlX25leHQ7IEVmZmVjdC5QcmV2ZW50X2RlZmF1bHQgXSBpblxuICAgICAgbGV0IG1vdmVfcHJldiA9IEVmZmVjdC5NYW55IFsgaW5qZWN0IE1vdmVfcHJldjsgRWZmZWN0LlByZXZlbnRfZGVmYXVsdCBdIGluXG4gICAgICBsZXQgdXAsIGRvd24gPVxuICAgICAgICBtYXRjaCBleHBhbmRfZGlyZWN0aW9uIHdpdGhcbiAgICAgICAgfCBVcCAtPiBtb3ZlX25leHQsIG1vdmVfcHJldlxuICAgICAgICB8IERvd24gLT4gbW92ZV9wcmV2LCBtb3ZlX25leHRcbiAgICAgIGluXG4gICAgICBtYXRjaCBEb21faHRtbC5LZXlib2FyZF9jb2RlLm9mX2V2ZW50IGV2IHdpdGhcbiAgICAgIHwgQXJyb3dVcCAtPiB1cFxuICAgICAgfCBUYWIgd2hlbiBKcy50b19ib29sIGV2IyMuc2hpZnRLZXkgLT5cbiAgICAgICAgKG1hdGNoIHNlbGVjdGVkX2tleSB3aXRoXG4gICAgICAgICB8IFNvbWUgXyAtPiB1cFxuICAgICAgICAgfCBOb25lIC0+IEVmZmVjdC5JZ25vcmUpXG4gICAgICB8IEFycm93RG93biAtPiBkb3duXG4gICAgICB8IFRhYiAtPlxuICAgICAgICAobWF0Y2ggc2VsZWN0ZWRfa2V5IHdpdGhcbiAgICAgICAgIHwgU29tZSBfIC0+IGRvd25cbiAgICAgICAgIHwgTm9uZSAtPiBFZmZlY3QuSWdub3JlKVxuICAgICAgfCBFc2NhcGUgLT5cbiAgICAgICAgKG1hdGNoIHN1Z2dlc3Rpb25fbGlzdF9zdGF0ZSB3aXRoXG4gICAgICAgICB8IENsb3NlZCAtPiBibHVyX2lucHV0XG4gICAgICAgICB8IEZpcnN0X2l0ZW0gfCBTZWxlY3RlZCBfIC0+IGluamVjdCBBY3Rpb24uQ2xvc2Vfc3VnZ2VzdGlvbnMpXG4gICAgICB8IEVudGVyIC0+XG4gICAgICAgIChtYXRjaCBzZWxlY3RlZF9rZXkgd2l0aFxuICAgICAgICAgfCBTb21lIGtleSAtPlxuICAgICAgICAgICBFZmZlY3QuTWFueVxuICAgICAgICAgICAgIFsgb25fc2VsZWN0IGtleVxuICAgICAgICAgICAgIDsgaW5qZWN0IChTZXRfcXVlcnkgKG1vZGlmeV9pbnB1dF9vbl9zZWxlY3Qga2V5IHF1ZXJ5KSlcbiAgICAgICAgICAgICA7IGluamVjdCBDbG9zZV9zdWdnZXN0aW9uc1xuICAgICAgICAgICAgIDsgRWZmZWN0LlByZXZlbnRfZGVmYXVsdFxuICAgICAgICAgICAgIF1cbiAgICAgICAgIHwgTm9uZSAtPiBpbmplY3QgT3Blbl9zdWdnZXN0aW9ucylcbiAgICAgIHwgXyAtPiBFZmZlY3QuSWdub3JlXG4gIGluXG4gIGxldCVzdWIgc3VnZ2VzdGlvbl9jb250YWluZXJfaWQgPSBCb25zYWkucGF0aF9pZCBpblxuICBsZXQlc3ViIGlucHV0X2lkID0gQm9uc2FpLnBhdGhfaWQgaW5cbiAgbGV0JWFyciBxdWVyeSA9IHF1ZXJ5XG4gIGFuZCBzZWxlY3RlZF9rZXkgPSBzZWxlY3RlZF9rZXlcbiAgYW5kIGluamVjdCA9IGluamVjdFxuICBhbmQgaGFuZGxlX2tleWRvd24gPSBoYW5kbGVfa2V5ZG93blxuICBhbmQgc3VnZ2VzdGlvbl9saXN0X2tpbmQgPSBzdWdnZXN0aW9uX2xpc3Rfa2luZFxuICBhbmQgZXhwYW5kX2RpcmVjdGlvbiA9IGV4cGFuZF9kaXJlY3Rpb25cbiAgYW5kIGl0ZW1zID0gaXRlbXNcbiAgYW5kIGV4dHJhX2xpc3RfY29udGFpbmVyX2F0dHIgPSBleHRyYV9saXN0X2NvbnRhaW5lcl9hdHRyXG4gIGFuZCBleHRyYV9pbnB1dF9hdHRyID0gZXh0cmFfaW5wdXRfYXR0clxuICBhbmQgZXh0cmFfYXR0ciA9IGV4dHJhX2F0dHJcbiAgYW5kIHN1Z2dlc3Rpb25fY29udGFpbmVyX2lkID0gc3VnZ2VzdGlvbl9jb250YWluZXJfaWRcbiAgYW5kIGlucHV0X2lkID0gaW5wdXRfaWRcbiAgYW5kIGZvY3VzX2F0dHIgPSBmb2N1c19hdHRyXG4gIGFuZCBmb2N1c19pbnB1dCA9IGZvY3VzX2lucHV0XG4gIGFuZCBpbmplY3RfaW5pdGlhbGl6ZV9zdWdnZXN0aW9uX2xpc3QgPSBpbmplY3RfaW5pdGlhbGl6ZV9zdWdnZXN0aW9uX2xpc3RcbiAgYW5kIG9uX2JsdXIgPSBvbl9ibHVyIGluXG4gIGxldCBjb250YWluZXJfcG9zaXRpb24sIHN1Z2dlc3Rpb25zX3Bvc2l0aW9uLCBpc19vcGVuID1cbiAgICBtYXRjaCBzdWdnZXN0aW9uX2xpc3Rfa2luZCB3aXRoXG4gICAgfCBTdWdnZXN0aW9uX2xpc3Rfa2luZC5UcmFuc2llbnRfb3ZlcmxheSAtPlxuICAgICAgbGV0IGlzX29wZW4gPSBPcHRpb24uaXNfc29tZSBzZWxlY3RlZF9rZXkgaW5cbiAgICAgICggQXR0ci5zdHlsZSAoQ3NzX2dlbi5wb3NpdGlvbiBgUmVsYXRpdmUpXG4gICAgICAsIEF0dHIuc3R5bGUgKENzc19nZW4ucG9zaXRpb24gYEFic29sdXRlKVxuICAgICAgLCBpc19vcGVuIClcbiAgICB8IFBlcm1hbmVudF9maXh0dXJlIC0+IEF0dHIuZW1wdHksIEF0dHIuZW1wdHksIHRydWVcbiAgaW5cbiAgbGV0IG9uX2JsdXIgPVxuICAgIEF0dHIub25fYmx1clxuICAgICAgKGxldCBvcGVuIEpzX29mX29jYW1sIGluXG4gICAgICAgZnVuIChldiA6IERvbV9odG1sLmZvY3VzRXZlbnQgSnMudCkgLT5cbiAgICAgICAgICgqIEJsdXJyaW5nIHVzdWFsbHkgbWVhbnMgdGhhdCB3ZSB3YW50IHRvIGNsb3NlIHRoZSBzdWdnZXN0aW9uIGxpc3QuXG4gICAgICAgICAgICBIb3dldmVyLCBpZiB3ZSBhcmUgYmx1cnJpbmcgdGhlIHRleHQgaW5wdXQgaW4gb3JkZXIgdG8gZm9jdXMgdGhlXG4gICAgICAgICAgICBsaXN0IG9mIGl0ZW1zIChvciB2aWNlIHZlcnNhKSwgd2Ugd2FudCB0byBrZWVwIHRoZSBsaXN0IG9wZW4uIFRodXMsXG4gICAgICAgICAgICB3ZSBjaGVjayB3aGV0aGVyIHRoZSByZWxhdGVkVGFyZ2V0IG9mIHRoZSBldmVudCBpcyBvbmUgb2YgdGhvc2UgdHdvXG4gICAgICAgICAgICBlbGVtZW50cywgaW4gd2hpY2ggY2FzZSB3ZSBkb24ndCBjbG9zZSB0aGUgbGlzdC4gKilcbiAgICAgICAgIG1hdGNoXG4gICAgICAgICAgIE9wdGlvbi5iaW5kIChKcy5PcHRkZWYudG9fb3B0aW9uIGV2IyMucmVsYXRlZFRhcmdldCkgfmY6SnMuT3B0LnRvX29wdGlvblxuICAgICAgICAgd2l0aFxuICAgICAgICAgfCBTb21lIHJlbGF0ZWRfdGFyZ2V0IC0+XG4gICAgICAgICAgIGxldCBpZCA9IEpzLnRvX3N0cmluZyByZWxhdGVkX3RhcmdldCMjLmlkIGluXG4gICAgICAgICAgIGlmIFN0cmluZy5lcXVhbCBpZCBzdWdnZXN0aW9uX2NvbnRhaW5lcl9pZCB8fCBTdHJpbmcuZXF1YWwgaWQgaW5wdXRfaWRcbiAgICAgICAgICAgdGhlbiBFZmZlY3QuSWdub3JlXG4gICAgICAgICAgIGVsc2UgRWZmZWN0Lk1hbnkgWyBpbmplY3QgQ2xvc2Vfc3VnZ2VzdGlvbnM7IG9uX2JsdXIgXVxuICAgICAgICAgfCBOb25lIC0+IEVmZmVjdC5NYW55IFsgaW5qZWN0IENsb3NlX3N1Z2dlc3Rpb25zOyBvbl9ibHVyIF0pXG4gIGluXG4gIGxldCBpbnB1dCA9XG4gICAgTm9kZS5pbnB1dFxuICAgICAgfmF0dHJzOlxuICAgICAgICBbIEF0dHIuaWQgaW5wdXRfaWRcbiAgICAgICAgOyBBdHRyLnR5cGVfIFwidGV4dFwiXG4gICAgICAgIDsgQXR0ci5zdHJpbmdfcHJvcGVydHkgXCJ2YWx1ZVwiIHF1ZXJ5XG4gICAgICAgIDsgQXR0ci5vbl9rZXlkb3duIChmdW4gZXYgLT5cbiAgICAgICAgICAgIEVmZmVjdC5hbGxfdW5pdCBbIGluamVjdF9pbml0aWFsaXplX3N1Z2dlc3Rpb25fbGlzdDsgaGFuZGxlX2tleWRvd24gZXYgXSlcbiAgICAgICAgOyBBdHRyLm9uX2lucHV0IChmdW4gXyBxdWVyeSAtPlxuICAgICAgICAgICAgKCogSXQgbWF5IHNlZW0gd2VpcmQgdG8gc2V0IHRoZSBxdWVyeSBmaXJzdCBhbmQgdGhlbiBpbml0aWFsaXplIHRoZSBzdWdnZXN0aW9uXG4gICAgICAgICAgICAgICBsaXN0LCBidXQgaW5qZWN0aW5nIHRoZSBzdWdnZXN0aW9uIGxpc3Qgd2lsbCBjYWxsIHRoZSB1c2VyJ3MgcHJvdmlkZWRcbiAgICAgICAgICAgICAgIFtmOihxdWVyeSAtPiBvcHRpb25zKV0gZnVuY3Rpb24uIFRodXMsIGlmIHdlIGluaXRpYWxpemUgdGhlIHN1Z2dlc3Rpb25zXG4gICAgICAgICAgICAgICBmaXJzdCwgd2UnbGwgY2FsbCBbZiBcIlwiXSBhbmQgdGhlbiBbZiBxdWVyeV0uIFRoaXMgb3JkZXJpbmcgZW5zdXJlcyB3ZSBvbmx5XG4gICAgICAgICAgICAgICBjYWxsIFtmIHF1ZXJ5XS4gKilcbiAgICAgICAgICAgIEVmZmVjdC5hbGxfdW5pdFxuICAgICAgICAgICAgICBbIGluamVjdCAoU2V0X3F1ZXJ5IHF1ZXJ5KTsgaW5qZWN0X2luaXRpYWxpemVfc3VnZ2VzdGlvbl9saXN0IF0pXG4gICAgICAgIDsgQXR0ci5vbl9mb2N1cyAoZnVuIF8gLT5cbiAgICAgICAgICAgIEVmZmVjdC5hbGxfdW5pdCBbIGluamVjdF9pbml0aWFsaXplX3N1Z2dlc3Rpb25fbGlzdDsgaW5qZWN0IE9wZW5fc3VnZ2VzdGlvbnMgXSlcbiAgICAgICAgOyBmb2N1c19hdHRyXG4gICAgICAgIDsgb25fYmx1clxuICAgICAgICA7IGV4dHJhX2lucHV0X2F0dHJcbiAgICAgICAgXVxuICAgICAgKClcbiAgaW5cbiAgbGV0IHN1Z2dlc3Rpb25zID1cbiAgICBtYXRjaCBpc19vcGVuIHdpdGhcbiAgICB8IGZhbHNlIC0+IE5vZGUuZGl2IFtdXG4gICAgfCB0cnVlIC0+XG4gICAgICBsZXQgcG9zaXRpb25fYWJvdmVfb3JfYmVsb3csIGRpcmVjdGVkX2l0ZW1zID1cbiAgICAgICAgbWF0Y2ggZXhwYW5kX2RpcmVjdGlvbiB3aXRoXG4gICAgICAgIHwgVXAgLT4gQXR0ci5zdHlsZSAoQ3NzX2dlbi5ib3R0b20gKGBQeCAwKSksIGl0ZW1zIHw+IE1hcC5kYXRhIHw+IExpc3QucmV2XG4gICAgICAgIHwgRG93biAtPiBBdHRyLmVtcHR5LCBNYXAuZGF0YSBpdGVtc1xuICAgICAgaW5cbiAgICAgIGxldCBhdHRyID1cbiAgICAgICAgQXR0ci4oc3VnZ2VzdGlvbnNfcG9zaXRpb24gQCBwb3NpdGlvbl9hYm92ZV9vcl9iZWxvdyBAIGV4dHJhX2xpc3RfY29udGFpbmVyX2F0dHIpXG4gICAgICBpblxuICAgICAgTm9kZS5kaXYgfmF0dHJzOlsgYXR0ciBdIGRpcmVjdGVkX2l0ZW1zXG4gIGluXG4gIGxldCBzdWdnZXN0aW9uc19jb250YWluZXIgPVxuICAgIE5vZGUuZGl2XG4gICAgICB+YXR0cnM6XG4gICAgICAgIFsgQXR0ci5jcmVhdGUgXCJkYXRhLXRlc3RcIiBcInF1ZXJ5LWJveC1pdGVtLWNvbnRhaW5lclwiXG4gICAgICAgIDsgQXR0ci5pZCBzdWdnZXN0aW9uX2NvbnRhaW5lcl9pZFxuICAgICAgICA7IEF0dHIudGFiaW5kZXggKC0xKVxuICAgICAgICA7IEF0dHIub25fd2hlZWxcbiAgICAgICAgICAgIChsZXQgb3BlbiBKc19vZl9vY2FtbCBpblxuICAgICAgICAgICAgIGZ1biAoZXYgOiBKc19vZl9vY2FtbF9wYXRjaGVzLkRvbV9odG1sLndoZWVsRXZlbnQgSnMudCkgLT5cbiAgICAgICAgICAgICAgIGxldCBjb21wYXJpc29uID1cbiAgICAgICAgICAgICAgICAgbWF0Y2ggZXhwYW5kX2RpcmVjdGlvbiB3aXRoXG4gICAgICAgICAgICAgICAgIHwgRG93biAtPiBGbG9hdC4oIDwgKSBldiMjLmRlbHRhWSAwLjBcbiAgICAgICAgICAgICAgICAgfCBVcCAtPiBGbG9hdC4oID4gKSBldiMjLmRlbHRhWSAwLjBcbiAgICAgICAgICAgICAgIGluXG4gICAgICAgICAgICAgICBFZmZlY3QuTWFueVxuICAgICAgICAgICAgICAgICBbIChpZiBjb21wYXJpc29uXG4gICAgICAgICAgICAgICAgICAgIHRoZW4gaW5qZWN0IE1vdmVfcHJldl93aXRoX2ZpeGVkX29mZnNldFxuICAgICAgICAgICAgICAgICAgICBlbHNlIGluamVjdCBNb3ZlX25leHRfd2l0aF9maXhlZF9vZmZzZXQpXG4gICAgICAgICAgICAgICAgIDsgRWZmZWN0LlByZXZlbnRfZGVmYXVsdFxuICAgICAgICAgICAgICAgICBdKVxuICAgICAgICA7IG9uX2JsdXJcbiAgICAgICAgOyBjb250YWluZXJfcG9zaXRpb25cbiAgICAgICAgXVxuICAgICAgWyBzdWdnZXN0aW9ucyBdXG4gIGluXG4gIGxldCB2aWV3ID1cbiAgICBOb2RlLmRpdlxuICAgICAgfmF0dHJzOlsgZXh0cmFfYXR0ciBdXG4gICAgICAobWF0Y2ggZXhwYW5kX2RpcmVjdGlvbiB3aXRoXG4gICAgICAgfCBVcCAtPiBbIHN1Z2dlc3Rpb25zX2NvbnRhaW5lcjsgaW5wdXQgXVxuICAgICAgIHwgRG93biAtPiBbIGlucHV0OyBzdWdnZXN0aW9uc19jb250YWluZXIgXSlcbiAgaW5cbiAgeyBzZWxlY3RlZF9pdGVtID0gc2VsZWN0ZWRfa2V5XG4gIDsgdmlld1xuICA7IHF1ZXJ5XG4gIDsgc2V0X3F1ZXJ5ID0gKGZ1biBxdWVyeSAtPiBpbmplY3QgKFNldF9xdWVyeSBxdWVyeSkpXG4gIDsgZm9jdXNfaW5wdXRcbiAgfVxuOztcblxubW9kdWxlIENvbGxhdGVfbWFwX3dpdGhfc2NvcmUgPSBzdHJ1Y3RcbiAgbW9kdWxlIFNjb3JlZF9rZXkgPSBzdHJ1Y3RcbiAgICBtb2R1bGUgVCA9IHN0cnVjdFxuICAgICAgdHlwZSAnayB0ID0gaW50ICogJ2tcblxuICAgICAgbGV0IHNleHBfb2ZfdCBzZXhwX29mX2sgPSBbJXNleHBfb2Y6IGludCAqIGtdXG5cbiAgICAgIGxldCBjb21wYXJlIGNvbXBhcmVfayA9XG4gICAgICAgIENvbXBhcmFibGUubGV4aWNvZ3JhcGhpY1xuICAgICAgICAgIFsgQ29tcGFyYWJsZS5saWZ0IFslY29tcGFyZTogaW50XSB+Zjpmc3Q7IENvbXBhcmFibGUubGlmdCBjb21wYXJlX2sgfmY6c25kIF1cbiAgICAgIDs7XG4gICAgZW5kXG5cbiAgICBpbmNsdWRlIFRcbiAgICBpbmNsdWRlIENvbXBhcmF0b3IuRGVyaXZlZCAoVClcblxuICAgIG1vZHVsZSBNIChUIDogQ29tcGFyYXRvci5TKSA9IHN0cnVjdFxuICAgICAgdHlwZSBub25yZWMgdCA9IFQudCB0XG4gICAgICB0eXBlIG5vbnJlYyBjb21wYXJhdG9yX3dpdG5lc3MgPSBULmNvbXBhcmF0b3Jfd2l0bmVzcyBjb21wYXJhdG9yX3dpdG5lc3NcblxuICAgICAgbGV0IHNleHBfb2ZfdCA9IHNleHBfb2ZfdCBULmNvbXBhcmF0b3Iuc2V4cF9vZl90XG4gICAgICBsZXQgY29tcGFyYXRvciA9IGNvbXBhcmF0b3IgVC5jb21wYXJhdG9yXG4gICAgZW5kXG5cbiAgICBtb2R1bGUgTWFwID0gc3RydWN0XG4gICAgICB0eXBlIG5vbnJlYyAoJ2ssICd2LCAnY21wKSB0ID0gKCdrIHQsICd2LCAnY21wIGNvbXBhcmF0b3Jfd2l0bmVzcykgTWFwLnRcbiAgICBlbmRcbiAgZW5kXG5cbiAgbGV0IGNvbGxhdGVcbiAgICAodHlwZSBrIGNtcClcbiAgICAobW9kdWxlIENtcCA6IENvbXBhcmF0b3IuUyB3aXRoIHR5cGUgdCA9IGsgYW5kIHR5cGUgY29tcGFyYXRvcl93aXRuZXNzID0gY21wKVxuICAgIH5wcmVwcm9jZXNzXG4gICAgfnNjb3JlXG4gICAgfnF1ZXJ5X2lzX2FzX3N0cmljdFxuICAgIH50b19yZXN1bHRcbiAgICBpbnB1dFxuICAgIHF1ZXJ5XG4gICAgPVxuICAgIGxldCBlbXB0eV9yZXN1bHQgPSBNYXAuZW1wdHkgKG1vZHVsZSBTY29yZWRfa2V5Lk0gKENtcCkpIGluXG4gICAgQm9uc2FpLkluY3IuY29tcHV0ZSAoVmFsdWUuYm90aCBpbnB1dCBxdWVyeSkgfmY6KGZ1biBpbnB1dF9hbmRfcXVlcnkgLT5cbiAgICAgIGxldCVwYXR0ZXJuX2JpbmQuVWlfaW5jciBpbnB1dCwgcXVlcnkgPSBpbnB1dF9hbmRfcXVlcnkgaW5cbiAgICAgIGxldCViaW5kLlVpX2luY3IgaW5wdXQgPSBpbnB1dCBpblxuICAgICAgbGV0IGxlbiA9IE1hcC5sZW5ndGggaW5wdXQgaW5cbiAgICAgIGxldCBhcnJheSA9IFVuaWZvcm1fYXJyYXkudW5zYWZlX2NyZWF0ZV91bmluaXRpYWxpemVkIH5sZW4gaW5cbiAgICAgIGxldCAoKSA9XG4gICAgICAgIGxldCBpbmRleCA9IHJlZiAwIGluXG4gICAgICAgIE1hcC5pdGVyaSBpbnB1dCB+ZjooZnVuIH5rZXkgfmRhdGEgLT5cbiAgICAgICAgICBVbmlmb3JtX2FycmF5LnNldCBhcnJheSAhaW5kZXggKGtleSwgZGF0YSwgcHJlcHJvY2VzcyB+a2V5IH5kYXRhKTtcbiAgICAgICAgICBpbmNyIGluZGV4KVxuICAgICAgaW5cbiAgICAgICgqIFdlIGtlZXAgdHJhY2sgb2YgYW4gYXJiaXRyYXJ5IG51bWJlciBvZiBxdWVyaWVzLiBFYWNoXG4gICAgICAgICB0aW1lIHRoZSBxdWVyeSBjaGFuZ2VzLCB3ZSBkaXNjYXJkIGFueSBxdWVyaWVzIGZvciB3aGljaCB0aGUgbmV3IHF1ZXJ5XG4gICAgICAgICBpcyBub3QgbWVyZWx5IGEgcmVmaW5lbWVudCBvZi4gSW4gb3RoZXIgd29yZHMsIHdlIG1haW50YWluIHRoZVxuICAgICAgICAgaW52YXJpYW50IHRoYXQgZWFjaCBpdGVtIGluIHRoaXMgbGlzdCBvZiBxdWVyaWVzIGlzIHN0cmljdGx5IG1vcmVcbiAgICAgICAgIGdlbmVyYWwgdGhhbiB0aGUgcHJldmlvdXMgb25lLiAqKVxuICAgICAgbGV0IHByZXZpb3VzX3F1ZXJpZXMgPSByZWYgW10gaW5cbiAgICAgICgqIEluIGFkZGl0aW9uLCB3ZSBhbHNvIGtlZXAgdHJhY2sgb2YgdGhlIGluZGV4IChmcm9tIHRoZSBiYWNrIG9mIHRoZVxuICAgICAgICAgbGlzdCBvZiBxdWVyaWVzLCByYXRoZXIgdGhhbiB0aGUgZnJvbnQsIGJ1dCB0aGlzIGRvZXNuJ3QgbWF0dGVyXG4gICAgICAgICBiZWNhdXNlIHdlIG5ldmVyIHVzZSB0aGUgaW5kZXggdG8gZ2V0IGFuIGVsZW1lbnQgb3V0IG9mIHRoZSBsaXN0KVxuICAgICAgICAgb2YgdGhlIGZpcnN0IHF1ZXJ5IHRoYXQgZWxpbWluYXRlZCBhbiBpdGVtIGZyb20gdGhlIHNldCBvZiByZXN1bHQuICopXG4gICAgICBsZXQgZmlsdGVyZWRfb3V0X2F0X2luZGV4ID0gQXJyYXkuY3JlYXRlIH5sZW4gSW50Lm1heF92YWx1ZSBpblxuICAgICAgbGV0JW1hcC5VaV9pbmNyIHF1ZXJ5ID0gcXVlcnkgaW5cbiAgICAgIGxldCByZWMgdHJpbV9xdWVyaWVzIHFzID1cbiAgICAgICAgbWF0Y2ggcXMgd2l0aFxuICAgICAgICB8IFtdIC0+IFtdXG4gICAgICAgIHwgcSA6OiBxcyAtPiBpZiBxdWVyeV9pc19hc19zdHJpY3QgcXVlcnkgfmFzXzpxIHRoZW4gcSA6OiBxcyBlbHNlIHRyaW1fcXVlcmllcyBxc1xuICAgICAgaW5cbiAgICAgIHByZXZpb3VzX3F1ZXJpZXMgOj0gcXVlcnkgOjogdHJpbV9xdWVyaWVzICFwcmV2aW91c19xdWVyaWVzO1xuICAgICAgbGV0IG51bV9xdWVyaWVzID0gTGlzdC5sZW5ndGggIXByZXZpb3VzX3F1ZXJpZXMgaW5cbiAgICAgIFVuaWZvcm1fYXJyYXkuZm9sZGlcbiAgICAgICAgYXJyYXlcbiAgICAgICAgfmluaXQ6ZW1wdHlfcmVzdWx0XG4gICAgICAgIH5mOihmdW4gaW5kZXggYWNjIChrZXksIGRhdGEsIHByZXByb2Nlc3NlZCkgLT5cbiAgICAgICAgbGV0IHNjb3JlID1cbiAgICAgICAgICAoKiBJZiB0aGUgaXRlbSB3YXMgYWxyZWFkeSBmaWx0ZXJlZCBvdXQgYnkgYSBwcmV2aW91cyBxdWVyeSwgd2UgY2FuXG4gICAgICAgICAgICAgICBrZWVwIGZpbHRlcmluZyBpdCBvdXQuIElmIGluc3RlYWQgaXQgd2FzIGZpbHRlcmVkIG91dCBieSBhIHF1ZXJ5XG4gICAgICAgICAgICAgICB0aGF0IGhhdmUgc2luY2UgZGlzY2FyZGVkIChvciwgcG9zc2libHksIGl0IHdhcyBuZXZlciBmaWx0ZXJlZFxuICAgICAgICAgICAgICAgb3V0KSwgdGhlbiB3ZSBuZWVkIHRvIHJlLWV2YWx1YXRlIHRoZSBzY29yZS4gKilcbiAgICAgICAgICBpZiBmaWx0ZXJlZF9vdXRfYXRfaW5kZXguKGluZGV4KSA8IG51bV9xdWVyaWVzXG4gICAgICAgICAgdGhlbiAwXG4gICAgICAgICAgZWxzZSAoXG4gICAgICAgICAgICBsZXQgc2NvcmUgPSBzY29yZSBxdWVyeSBwcmVwcm9jZXNzZWQgaW5cbiAgICAgICAgICAgIGZpbHRlcmVkX291dF9hdF9pbmRleC4oaW5kZXgpXG4gICAgICAgICAgICAgIDwtIChpZiBzY29yZSA9IDAgdGhlbiBudW1fcXVlcmllcyBlbHNlIEludC5tYXhfdmFsdWUpO1xuICAgICAgICAgICAgc2NvcmUpXG4gICAgICAgIGluXG4gICAgICAgIGlmIHNjb3JlID0gMFxuICAgICAgICB0aGVuIGFjY1xuICAgICAgICBlbHNlIChcbiAgICAgICAgICAoKiBUaGUgZmlyc3QgY29tcG9uZW50IG9mIHRoZSBrZXkgY29tcGFyZXMgZXF1aXZhbGVudGx5IHRvIHRoZSBwYWlyXG4gICAgICAgICAgICAgICAoc2NvcmUsIGluZGV4KSwgYnV0IGZhc3Rlciwgc2luY2UgaXQgaXMgb25seSBhbiBpbnRlZ2VyLiBOb3RlXG4gICAgICAgICAgICAgICB0aGF0IHRoZSBtYXAgY29tcGFyYXRvciBkb2Vzbid0IG5lZWQgdG8gaW5zcGVjdCB0aGUga2V5IGl0c2VsZixcbiAgICAgICAgICAgICAgIHNpbmNlIFtpbmRleF0gYWxyZWFkeSBjYXB0dXJlcyB0aGF0IG9yZGVyaW5nLiBUaHVzLCB0aGlzIHdob2xlXG4gICAgICAgICAgICAgICBjb21wdXRhdGlvbiByZW1haW5zIGZhc3QgZXZlbiBpZiB0aGUgaW5wdXQgbWFwIGNvbXBhcmF0b3IgaXNcbiAgICAgICAgICAgICAgIGV4dHJlbWVseSBzbG93LiAqKVxuICAgICAgICAgIGxldCBuZXdfa2V5ID0gc2NvcmUsIGtleSBpblxuICAgICAgICAgIE1hcC5hZGRfZXhuIGFjYyB+a2V5Om5ld19rZXkgfmRhdGE6KHRvX3Jlc3VsdCBwcmVwcm9jZXNzZWQgfmtleSB+ZGF0YSkpKSlcbiAgOztcbmVuZFxuXG5tb2R1bGUgRmlsdGVyX3N0cmF0ZWd5ID0gc3RydWN0XG4gIHR5cGUgdCA9XG4gICAgfCBGdXp6eV9tYXRjaFxuICAgIHwgRnV6enlfc2VhcmNoX2FuZF9zY29yZVxuICBbQEBkZXJpdmluZyBjb21wYXJlLCBlbnVtZXJhdGUsIGVxdWFsLCBzZXhwX29mXVxuZW5kXG5cbmxldCBzdHJpbmdhYmxlXG4gICh0eXBlIGsgY21wKVxuICAobW9kdWxlIEtleSA6IEJvbnNhaS5Db21wYXJhdG9yIHdpdGggdHlwZSB0ID0gayBhbmQgdHlwZSBjb21wYXJhdG9yX3dpdG5lc3MgPSBjbXApXG4gID9pbml0aWFsX3F1ZXJ5XG4gID9tYXhfdmlzaWJsZV9pdGVtc1xuICA/c3VnZ2VzdGlvbl9saXN0X2tpbmRcbiAgP2V4cGFuZF9kaXJlY3Rpb25cbiAgP3NlbGVjdGVkX2l0ZW1fYXR0clxuICA/ZXh0cmFfbGlzdF9jb250YWluZXJfYXR0clxuICA/ZXh0cmFfaW5wdXRfYXR0clxuICA/ZXh0cmFfYXR0clxuICA/KHRvX3ZpZXcgPSBmdW4gXyBzdHJpbmcgLT4gVmRvbS5Ob2RlLnRleHQgc3RyaW5nKVxuICA/KG1vZGlmeV9pbnB1dF9vbl9zZWxlY3QgPSBWYWx1ZS5yZXR1cm4gYFJlc2V0KVxuICB+ZmlsdGVyX3N0cmF0ZWd5XG4gIH5vbl9zZWxlY3RcbiAgaW5wdXRcbiAgPVxuICAoKiBbZmlsdGVyX3N0cmF0ZWd5XSBpcyBub3QgYSBbVmFsdWUudF07IGl0IHdvdWxkIGJlIGVhc3kgdG8gbWFrZSBpdCBvbmUgYnlcbiAgICAgdXNpbmcgW21hdGNoJXN1Yl0gaGVyZSwgYnV0IHRoZW4gdGhlIG1vZGVsIHdvdWxkIG5vdCBiZSBzaGFyZWQgYmV0d2VlbiB0aGVcbiAgICAgdHdvIGJyYW5jaGVzLCB3aGljaCBpcyBwb3RlbnRpYWxseSBjb25mdXNpbmcuIElmIG1ha2UgYm90aCBrZXkgbW9kdWxlcyBiZVxuICAgICBbU2NvcmVkX2tleV0sIHRoZW4gd2UgY291bGQgbW92ZSB0aGUgYnJhbmNoIGludG8gW2ZdIHdoZXJlIHRoZSBmaWx0ZXJpbmdcbiAgICAgYWN0dWFsbHkgaGFwcGVuczsgdGhpcyB3b3VsZCBoYXZlIHRoZSBkb3duc2lkZSBvZiBjYXVzaW5nIHRoZVxuICAgICBbRnV6enlfbWF0Y2hdIGNhc2UgdG8gcGF5IHRoZSBjb3N0IG9mIHRoZSBleHRyYSBkYXRhIGluIHRoZSBrZXkuIFNpbmNlIHdlXG4gICAgIGRvbid0IGV4cGVjdCB0aGlzIHBhcmFtZXRlciB0byBiZSBjaGFuZ2VkIGF0IHJ1bnRpbWUsIGl0IGlzIHByb2JhYmx5IG5vdFxuICAgICB3b3J0aCB0aGUgY29zdCB0byBtYWtlIHRoZSBwYXJhbWV0ZXIgZHluYW1pYy4gKilcbiAgbGV0IG1vZGlmeV9pbnB1dF9vbl9zZWxlY3QgfmdldF9rZXkgPVxuICAgIGxldCVhcnIgbW9kaWZ5X2lucHV0X29uX3NlbGVjdCA9IG1vZGlmeV9pbnB1dF9vbl9zZWxlY3RcbiAgICBhbmQgaW5wdXQgPSBpbnB1dCBpblxuICAgIG1hdGNoIG1vZGlmeV9pbnB1dF9vbl9zZWxlY3Qgd2l0aFxuICAgIHwgYFJlc2V0IC0+IGZ1biBfIF8gLT4gXCJcIlxuICAgIHwgYERvbid0X2NoYW5nZSAtPiBmdW4gXyBxdWVyeSAtPiBxdWVyeVxuICAgIHwgYEF1dG9jb21wbGV0ZSAtPlxuICAgICAgZnVuIGtleSBxdWVyeSAtPiBNYXAuZmluZCBpbnB1dCAoZ2V0X2tleSBrZXkpIHw+IE9wdGlvbi52YWx1ZSB+ZGVmYXVsdDpxdWVyeVxuICBpblxuICBtYXRjaCBmaWx0ZXJfc3RyYXRlZ3kgd2l0aFxuICB8IEZpbHRlcl9zdHJhdGVneS5GdXp6eV9tYXRjaCAtPlxuICAgIGxldCVzdWIgbW9kaWZ5X2lucHV0X29uX3NlbGVjdCA9IG1vZGlmeV9pbnB1dF9vbl9zZWxlY3QgfmdldF9rZXk6Rm4uaWQgaW5cbiAgICBjcmVhdGVcbiAgICAgIChtb2R1bGUgS2V5KVxuICAgICAgP2luaXRpYWxfcXVlcnlcbiAgICAgID9tYXhfdmlzaWJsZV9pdGVtc1xuICAgICAgP3N1Z2dlc3Rpb25fbGlzdF9raW5kXG4gICAgICA/ZXhwYW5kX2RpcmVjdGlvblxuICAgICAgP3NlbGVjdGVkX2l0ZW1fYXR0clxuICAgICAgP2V4dHJhX2xpc3RfY29udGFpbmVyX2F0dHJcbiAgICAgID9leHRyYV9pbnB1dF9hdHRyXG4gICAgICA/ZXh0cmFfYXR0clxuICAgICAgfm1vZGlmeV9pbnB1dF9vbl9zZWxlY3RcbiAgICAgIH5vbl9zZWxlY3RcbiAgICAgIH5mOihmdW4gcXVlcnkgLT5cbiAgICAgICAgQm9uc2FpLkluY3IuY29tcHV0ZSAoVmFsdWUuYm90aCBxdWVyeSBpbnB1dCkgfmY6KGZ1biBpbmNyIC0+XG4gICAgICAgICAgbGV0JXBhdHRlcm5fYmluZC5JbmNyIHF1ZXJ5LCBpbnB1dCA9IGluY3IgaW5cbiAgICAgICAgICBJbmNyX21hcC5maWx0ZXJfbWFwaScgaW5wdXQgfmY6KGZ1biB+a2V5IH5kYXRhOnN0cmluZyAtPlxuICAgICAgICAgICAgbGV0JW1hcC5JbmNyIHN0cmluZyA9IHN0cmluZ1xuICAgICAgICAgICAgYW5kIHF1ZXJ5ID0gcXVlcnkgaW5cbiAgICAgICAgICAgIGlmIEZ1enp5X21hdGNoLmlzX21hdGNoIH5jaGFyX2VxdWFsOkNoYXIuQ2FzZWxlc3MuZXF1YWwgfnBhdHRlcm46cXVlcnkgc3RyaW5nXG4gICAgICAgICAgICB0aGVuIFNvbWUgKHRvX3ZpZXcga2V5IHN0cmluZylcbiAgICAgICAgICAgIGVsc2UgTm9uZSkpKVxuICAgICAgKClcbiAgfCBGdXp6eV9zZWFyY2hfYW5kX3Njb3JlIC0+XG4gICAgbGV0JXN1YiBvbl9zZWxlY3QgPVxuICAgICAgbGV0JWFyciBvbl9zZWxlY3QgPSBvbl9zZWxlY3QgaW5cbiAgICAgIGZ1biAoXywga2V5KSAtPiBvbl9zZWxlY3Qga2V5XG4gICAgaW5cbiAgICBsZXQlc3ViIHJlc3VsdCA9XG4gICAgICBsZXQlc3ViIG1vZGlmeV9pbnB1dF9vbl9zZWxlY3QgPSBtb2RpZnlfaW5wdXRfb25fc2VsZWN0IH5nZXRfa2V5OnNuZCBpblxuICAgICAgY3JlYXRlXG4gICAgICAgIChtb2R1bGUgQ29sbGF0ZV9tYXBfd2l0aF9zY29yZS5TY29yZWRfa2V5Lk0gKEtleSkpXG4gICAgICAgID9pbml0aWFsX3F1ZXJ5XG4gICAgICAgID9tYXhfdmlzaWJsZV9pdGVtc1xuICAgICAgICA/c3VnZ2VzdGlvbl9saXN0X2tpbmRcbiAgICAgICAgP2V4cGFuZF9kaXJlY3Rpb25cbiAgICAgICAgP3NlbGVjdGVkX2l0ZW1fYXR0clxuICAgICAgICA/ZXh0cmFfbGlzdF9jb250YWluZXJfYXR0clxuICAgICAgICA/ZXh0cmFfaW5wdXRfYXR0clxuICAgICAgICA/ZXh0cmFfYXR0clxuICAgICAgICB+bW9kaWZ5X2lucHV0X29uX3NlbGVjdFxuICAgICAgICB+b25fc2VsZWN0XG4gICAgICAgIH5mOihmdW4gcXVlcnkgLT5cbiAgICAgICAgICBsZXQlc3ViIHF1ZXJ5ID1cbiAgICAgICAgICAgIGxldCVhcnIgcXVlcnkgPSBxdWVyeSBpblxuICAgICAgICAgICAgcXVlcnksIEZ1enp5X3NlYXJjaC5RdWVyeS5jcmVhdGUgcXVlcnlcbiAgICAgICAgICBpblxuICAgICAgICAgIENvbGxhdGVfbWFwX3dpdGhfc2NvcmUuY29sbGF0ZVxuICAgICAgICAgICAgKG1vZHVsZSBLZXkpXG4gICAgICAgICAgICBpbnB1dFxuICAgICAgICAgICAgcXVlcnlcbiAgICAgICAgICAgIH5wcmVwcm9jZXNzOihmdW4gfmtleTpfIH5kYXRhIC0+IGRhdGEpXG4gICAgICAgICAgICB+c2NvcmU6KGZ1biAoXywgcXVlcnkpIGl0ZW0gLT4gRnV6enlfc2VhcmNoLnNjb3JlIHF1ZXJ5IH5pdGVtKVxuICAgICAgICAgICAgfnF1ZXJ5X2lzX2FzX3N0cmljdDooZnVuIChxLCBfKSB+YXNfOihhc18sIF8pIC0+XG4gICAgICAgICAgICAgIFN0cmluZy5pc19zdWJzdHJpbmcgcSB+c3Vic3RyaW5nOmFzXylcbiAgICAgICAgICAgIH50b19yZXN1bHQ6KGZ1biBpdGVtIH5rZXk6XyB+ZGF0YTpfIC0+IE5vZGUuZGl2IFsgTm9kZS50ZXh0IGl0ZW0gXSkpXG4gICAgICAgICgpXG4gICAgaW5cbiAgICBsZXQlYXJyIHJlc3VsdCA9IHJlc3VsdCBpblxuICAgIHsgcmVzdWx0IHdpdGggc2VsZWN0ZWRfaXRlbSA9IE9wdGlvbi5tYXAgcmVzdWx0LnNlbGVjdGVkX2l0ZW0gfmY6c25kIH1cbjs7XG4iXX0=
