// Generated by js_of_ocaml
//# buildInfo:effects=false, kind=cma, use-js-string=true, version=5.6.0

//# unitInfo: Provides: Dream_gluten
(function
  (globalThis){
   "use strict";
   var runtime = globalThis.jsoo_runtime, Dream_gluten = [0];
   runtime.caml_register_global(0, Dream_gluten, "Dream_gluten");
   return;
  }
  (globalThis));

//# unitInfo: Provides: Dream_gluten__Gluten
//# unitInfo: Requires: Bigstringaf, CamlinternalLazy
(function
  (globalThis){
   "use strict";
   var
    runtime = globalThis.jsoo_runtime,
    caml_obj_tag = runtime.caml_obj_tag,
    caml_update_dummy = runtime.caml_update_dummy;
   function caml_call1(f, a0){
    return (f.l >= 0 ? f.l : f.l = f.length) == 1
            ? f(a0)
            : runtime.caml_call_gen(f, [a0]);
   }
   function caml_call3(f, a0, a1, a2){
    return (f.l >= 0 ? f.l : f.l = f.length) == 3
            ? f(a0, a1, a2)
            : runtime.caml_call_gen(f, [a0, a1, a2]);
   }
   function caml_call4(f, a0, a1, a2, a3){
    return (f.l >= 0 ? f.l : f.l = f.length) == 4
            ? f(a0, a1, a2, a3)
            : runtime.caml_call_gen(f, [a0, a1, a2, a3]);
   }
   function caml_call5(f, a0, a1, a2, a3, a4){
    return (f.l >= 0 ? f.l : f.l = f.length) == 5
            ? f(a0, a1, a2, a3, a4)
            : runtime.caml_call_gen(f, [a0, a1, a2, a3, a4]);
   }
   var
    global_data = runtime.caml_get_global_data(),
    Bigstringaf = global_data.Bigstringaf,
    CamlinternalLazy = global_data.CamlinternalLazy;
   function make(runtime, t){return [0, runtime, t];}
   function create(protocol, t){return [0, [0, protocol, t]];}
   function upgrade_protocol(t, protocol){
    var match = t[1], t$0 = match[2], P = match[1];
    t[1] = protocol;
    return caml_call1(P[10], t$0);
   }
   function next_read_operation(param){
    var match = param[1], t = match[2], P = match[1];
    return caml_call1(P[1], t);
   }
   function read(param){
    var match = param[1], t = match[2], P = match[1];
    return caml_call1(P[2], t);
   }
   function read_eof(param){
    var match = param[1], t = match[2], P = match[1];
    return caml_call1(P[3], t);
   }
   function yield_reader(param){
    var match = param[1], t = match[2], P = match[1];
    return caml_call1(P[4], t);
   }
   function next_write_operation(param){
    var match = param[1], t = match[2], P = match[1];
    return caml_call1(P[5], t);
   }
   function report_write_result(param){
    var match = param[1], t = match[2], P = match[1];
    return caml_call1(P[6], t);
   }
   function yield_writer(param){
    var match = param[1], t = match[2], P = match[1];
    return caml_call1(P[7], t);
   }
   function report_exn(param){
    var match = param[1], t = match[2], P = match[1];
    return caml_call1(P[8], t);
   }
   function shutdown(param){
    var match = param[1], t = match[2], P = match[1];
    return caml_call1(P[10], t);
   }
   function is_closed(param){
    var match = param[1], t = match[2], P = match[1];
    return caml_call1(P[9], t);
   }
   function create_upgradable(protocol, create, request_handler){
    var t = [], request_handler$0 = function _g_(_f_){return _g_.fun(_f_);};
    caml_update_dummy
     (t,
      [246,
       function(param){
        return [0, [0, protocol, caml_call1(create, request_handler$0)]];
       }]);
    caml_update_dummy
     (request_handler$0,
      function(reqd){
       var _c_ = caml_obj_tag(t);
       a:
       if(250 === _c_)
        var _d_ = t[1];
       else{
        if(246 !== _c_ && 244 !== _c_){var _d_ = t; break a;}
        var _d_ = caml_call1(CamlinternalLazy[2], t);
       }
       var
        reqd$0 = [0, reqd, function(_e_){return upgrade_protocol(_d_, _e_);}];
       return caml_call1(request_handler, reqd$0);
      });
    var _b_ = caml_obj_tag(t);
    if(250 === _b_) return t[1];
    if(246 !== _b_ && 244 !== _b_) return t;
    return caml_call1(CamlinternalLazy[2], t);
   }
   function create$0(size){
    var buffer = caml_call1(Bigstringaf[1], size);
    return [0, buffer, 0, 0, size];
   }
   function get(t, f){
    var n = caml_call3(f, t[1], t[2], t[3]);
    t[2] = t[2] + n | 0;
    t[3] = t[3] - n | 0;
    if(0 === t[3]) t[2] = 0;
    return n;
   }
   function put(t, f, k){
    if(0 === t[3]){
     t[2] = 0;
     t[3] = 0;
    }
    else if(0 < t[2]){
     caml_call5(Bigstringaf[23], t[1], t[2], t[1], 0, t[3]);
     t[2] = 0;
    }
    var off = t[2] + t[3] | 0, len = (t[4] - t[3] | 0) - t[2] | 0;
    function _a_(n){t[3] = t[3] + n | 0; return caml_call1(k, n);}
    return caml_call4(f, t[1], off, len, _a_);
   }
   var
    Dream_gluten_Gluten =
      [0,
       make,
       [0],
       [0,
        next_read_operation,
        read,
        read_eof,
        yield_reader,
        next_write_operation,
        report_write_result,
        yield_writer,
        report_exn,
        is_closed,
        shutdown,
        create,
        upgrade_protocol,
        create_upgradable],
       [0,
        next_read_operation,
        read,
        read_eof,
        yield_reader,
        next_write_operation,
        report_write_result,
        yield_writer,
        report_exn,
        is_closed,
        shutdown,
        create,
        upgrade_protocol],
       [0, create$0, get, put]];
   runtime.caml_register_global
    (2, Dream_gluten_Gluten, "Dream_gluten__Gluten");
   return;
  }
  (globalThis));

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLjAsImZpbGUiOiJkcmVhbV9nbHV0ZW4uY21hLmpzIiwic291cmNlUm9vdCI6IiIsIm5hbWVzIjpbIm1ha2UiLCJydW50aW1lIiwidCIsImNyZWF0ZSIsInByb3RvY29sIiwidXBncmFkZV9wcm90b2NvbCIsInQkMCIsIlAiLCJuZXh0X3JlYWRfb3BlcmF0aW9uIiwicmVhZCIsInJlYWRfZW9mIiwieWllbGRfcmVhZGVyIiwibmV4dF93cml0ZV9vcGVyYXRpb24iLCJyZXBvcnRfd3JpdGVfcmVzdWx0IiwieWllbGRfd3JpdGVyIiwicmVwb3J0X2V4biIsInNodXRkb3duIiwiaXNfY2xvc2VkIiwiY3JlYXRlX3VwZ3JhZGFibGUiLCJyZXF1ZXN0X2hhbmRsZXIiLCJyZXF1ZXN0X2hhbmRsZXIkMCIsInJlcWQiLCJyZXFkJDAiLCJjcmVhdGUkMCIsInNpemUiLCJidWZmZXIiLCJnZXQiLCJmIiwibiIsInB1dCIsImsiLCJvZmYiLCJsZW4iXSwic291cmNlcyI6WyIvaG9tZS9saWFtLWNhcnBlbnRlci8ub3BhbS9wZXJzb25hbC1zaXRlL2xpYi9kcmVhbS1odHRwYWYvZHJlYW0tZ2x1dGVuL2dsdXRlbi5tbCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztFOzs7Ozs7Ozs7Ozs7Rzs7Ozs7Rzs7Ozs7Rzs7Ozs7Rzs7Ozs7Ozs7O1lBc0RJQSxLQUFLQyxTQUFRQyxHQUFJLFdBQVpELFNBQVFDLEdBQXdCO1lBS25DQyxPQUFRQyxVQUFTRixHQUFLLGVBQWRFLFVBQVNGLElBQTRDO1lBRTdERyxpQkFBaUJILEdBQUVFO0lBQ3JCLFlBRG1CRixNQUNxQkksZ0JBQVpDO0lBRFRMLE9BQUVFO0lBR3JCLE9BQUEsV0FGNEJHLE9BQVlEO0dBRTNCO1lBRVhFOzBCQUF3RE4sY0FBWks7SUFDOUMsT0FBQSxXQUQ4Q0EsTUFBWUw7O1lBR3hETzswQkFBeUNQLGNBQVpLO0lBQW1CLE9BQUEsV0FBbkJBLE1BQVlMOztZQUN6Q1E7MEJBQTZDUixjQUFaSztJQUFtQixPQUFBLFdBQW5CQSxNQUFZTDs7WUFDN0NTOzBCQUFpRFQsY0FBWks7SUFBbUIsT0FBQSxXQUFuQkEsTUFBWUw7O1lBRWpEVTswQkFBeURWLGNBQVpLO0lBQy9DLE9BQUEsV0FEK0NBLE1BQVlMOztZQUd6RFc7MEJBQXdEWCxjQUFaSztJQUM5QyxPQUFBLFdBRDhDQSxNQUFZTDs7WUFHeERZOzBCQUFpRFosY0FBWks7SUFBbUIsT0FBQSxXQUFuQkEsTUFBWUw7O1lBQ2pEYTswQkFBK0NiLGNBQVpLO0lBQW1CLE9BQUEsV0FBbkJBLE1BQVlMOztZQUMvQ2M7MEJBQTZDZCxjQUFaSztJQUFtQixPQUFBLFdBQW5CQSxPQUFZTDs7WUFDN0NlOzBCQUE4Q2YsY0FBWks7SUFBbUIsT0FBQSxXQUFuQkEsTUFBWUw7O1lBbUI5Q2dCLGtCQU9FZCxVQUFVRCxRQUFPZ0I7SUFDckIsSUFBUWpCLFFBRUprQjs7TUFGSWxCOzs7UUFDRCxlQUZIRSxVQUVxQyxXQUYzQkQsUUFHVmlCOzs7TUFBQUE7ZUFBaUJDO09BQ25CLHVCQUhNbkI7OztrQkFBQUE7O2lEQUFBQTtrREFBQUE7O09BR007UUFBUm9CLGFBRGVELG9CLE9BbERuQmhCO09Bb0RBLE9BQUEsV0FMbUJjLGlCQUlmRztNQUNpQjsyQkFKZnBCOzJCQUFBQTttQ0FNUixPQU5RQTtJQU1SLE9BQUEsZ0NBTlFBO0dBTUk7WUFpQlZxQixTQUFPQztJQUNJLElBQVRDLFNBQVMsMkJBREpEO0lBRVQsV0FESUMsY0FES0Q7R0FFK0I7WUFZdENFLElBQUl4QixHQUFHeUI7SUFDRCxJQUFKQyxJQUFJLFdBRENELEdBQUh6QixNQUFBQSxNQUFBQTtJQUFBQSxPQUFBQSxPQUNGMEI7SUFERTFCLE9BQUFBLE9BQ0YwQjthQURFMUIsTUFBQUE7SUFLTixPQUpJMEI7R0FJSDtZQUVDQyxJQUFJM0IsR0FBR3lCLEdBQUVHO0lBQ1gsU0FETTVCO0tBQUFBO0tBQUFBOztnQkFBQUE7S0FWSiw0QkFVSUEsTUFBQUEsTUFBQUEsU0FBQUE7S0FBQUE7O1FBRUY2QixNQUZFN0IsT0FBQUEsVUFHRjhCLE9BSEU5QixPQUFBQSxZQUFBQTtpQkFJb0IwQixHQUpwQjFCLE9BQUFBLE9BSW9CMEIsT0FFeEIsT0FBQSxXQU5TRSxHQUllRixHQUVyQjtJQUZnQixPQUFBLFdBSlpELEdBQUh6QixNQUVGNkIsS0FDQUM7R0FHRTs7OztPQXpHTmhDOzs7UUFZRVE7UUFHQUM7UUFDQUM7UUFDQUM7UUFFQUM7UUFHQUM7UUFHQUM7UUFDQUM7UUFFQUU7UUFEQUQ7UUF0QkFiO1FBRUFFO1FBd0NBYTs7UUFuQ0FWO1FBR0FDO1FBQ0FDO1FBQ0FDO1FBRUFDO1FBR0FDO1FBR0FDO1FBQ0FDO1FBRUFFO1FBREFEO1FBdEJBYjtRQUVBRTtXQXVFQWtCLFVBY0FHLEtBT0FHOzs7O0UiLCJzb3VyY2VzQ29udGVudCI6WyIoKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqICBDb3B5cmlnaHQgKGMpIDIwMTktMjAyMCBBbnTDs25pbyBOdW5vIE1vbnRlaXJvXG4gKlxuICogIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogIFJlZGlzdHJpYnV0aW9uIGFuZCB1c2UgaW4gc291cmNlIGFuZCBiaW5hcnkgZm9ybXMsIHdpdGggb3Igd2l0aG91dFxuICogIG1vZGlmaWNhdGlvbiwgYXJlIHBlcm1pdHRlZCBwcm92aWRlZCB0aGF0IHRoZSBmb2xsb3dpbmcgY29uZGl0aW9ucyBhcmUgbWV0OlxuICpcbiAqICAxLiBSZWRpc3RyaWJ1dGlvbnMgb2Ygc291cmNlIGNvZGUgbXVzdCByZXRhaW4gdGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UsXG4gKiAgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lci5cbiAqXG4gKiAgMi4gUmVkaXN0cmlidXRpb25zIGluIGJpbmFyeSBmb3JtIG11c3QgcmVwcm9kdWNlIHRoZSBhYm92ZSBjb3B5cmlnaHRcbiAqICBub3RpY2UsIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIgaW4gdGhlXG4gKiAgZG9jdW1lbnRhdGlvbiBhbmQvb3Igb3RoZXIgbWF0ZXJpYWxzIHByb3ZpZGVkIHdpdGggdGhlIGRpc3RyaWJ1dGlvbi5cbiAqXG4gKiAgMy4gTmVpdGhlciB0aGUgbmFtZSBvZiB0aGUgY29weXJpZ2h0IGhvbGRlciBub3IgdGhlIG5hbWVzIG9mIGl0c1xuICogIGNvbnRyaWJ1dG9ycyBtYXkgYmUgdXNlZCB0byBlbmRvcnNlIG9yIHByb21vdGUgcHJvZHVjdHMgZGVyaXZlZCBmcm9tIHRoaXNcbiAqICBzb2Z0d2FyZSB3aXRob3V0IHNwZWNpZmljIHByaW9yIHdyaXR0ZW4gcGVybWlzc2lvbi5cbiAqXG4gKiAgVEhJUyBTT0ZUV0FSRSBJUyBQUk9WSURFRCBCWSBUSEUgQ09QWVJJR0hUIEhPTERFUlMgQU5EIENPTlRSSUJVVE9SUyBcIkFTIElTXCJcbiAqICBBTkQgQU5ZIEVYUFJFU1MgT1IgSU1QTElFRCBXQVJSQU5USUVTLCBJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgVEhFXG4gKiAgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSBBTkQgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0VcbiAqICBBUkUgRElTQ0xBSU1FRC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIENPUFlSSUdIVCBIT0xERVIgT1IgQ09OVFJJQlVUT1JTIEJFXG4gKiAgTElBQkxFIEZPUiBBTlkgRElSRUNULCBJTkRJUkVDVCwgSU5DSURFTlRBTCwgU1BFQ0lBTCwgRVhFTVBMQVJZLCBPUlxuICogIENPTlNFUVVFTlRJQUwgREFNQUdFUyAoSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sIFBST0NVUkVNRU5UIE9GXG4gKiAgU1VCU1RJVFVURSBHT09EUyBPUiBTRVJWSUNFUzsgTE9TUyBPRiBVU0UsIERBVEEsIE9SIFBST0ZJVFM7IE9SIEJVU0lORVNTXG4gKiAgSU5URVJSVVBUSU9OKSBIT1dFVkVSIENBVVNFRCBBTkQgT04gQU5ZIFRIRU9SWSBPRiBMSUFCSUxJVFksIFdIRVRIRVIgSU5cbiAqICBDT05UUkFDVCwgU1RSSUNUIExJQUJJTElUWSwgT1IgVE9SVCAoSU5DTFVESU5HIE5FR0xJR0VOQ0UgT1IgT1RIRVJXSVNFKVxuICogIEFSSVNJTkcgSU4gQU5ZIFdBWSBPVVQgT0YgVEhFIFVTRSBPRiBUSElTIFNPRlRXQVJFLCBFVkVOIElGIEFEVklTRUQgT0YgVEhFXG4gKiAgUE9TU0lCSUxJVFkgT0YgU1VDSCBEQU1BR0UuXG4gKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSopXG5cbm1vZHVsZSB0eXBlIFJVTlRJTUUgPSBzaWdcbiAgdHlwZSB0XG5cbiAgdmFsIG5leHRfcmVhZF9vcGVyYXRpb24gOiB0IC0+IFsgYFJlYWQgfCBgWWllbGQgfCBgQ2xvc2UgXVxuICB2YWwgcmVhZCA6IHQgLT4gQmlnc3RyaW5nYWYudCAtPiBvZmY6aW50IC0+IGxlbjppbnQgLT4gaW50XG4gIHZhbCByZWFkX2VvZiA6IHQgLT4gQmlnc3RyaW5nYWYudCAtPiBvZmY6aW50IC0+IGxlbjppbnQgLT4gaW50XG4gIHZhbCB5aWVsZF9yZWFkZXIgOiB0IC0+ICh1bml0IC0+IHVuaXQpIC0+IHVuaXRcblxuICB2YWwgbmV4dF93cml0ZV9vcGVyYXRpb24gOlxuICAgICB0XG4gICAgLT4gWyBgV3JpdGUgb2YgQmlnc3RyaW5nYWYudCBGYXJhZGF5LmlvdmVjIGxpc3QgfCBgWWllbGQgfCBgQ2xvc2Ugb2YgaW50IF1cblxuICB2YWwgcmVwb3J0X3dyaXRlX3Jlc3VsdCA6IHQgLT4gWyBgT2sgb2YgaW50IHwgYENsb3NlZCBdIC0+IHVuaXRcbiAgdmFsIHlpZWxkX3dyaXRlciA6IHQgLT4gKHVuaXQgLT4gdW5pdCkgLT4gdW5pdFxuICB2YWwgcmVwb3J0X2V4biA6IHQgLT4gZXhuIC0+IHVuaXRcbiAgdmFsIGlzX2Nsb3NlZCA6IHQgLT4gYm9vbFxuICB2YWwgc2h1dGRvd24gOiB0IC0+IHVuaXRcbmVuZFxuXG50eXBlICd0IHJ1bnRpbWUgPSAobW9kdWxlIFJVTlRJTUUgd2l0aCB0eXBlIHQgPSAndClcbnR5cGUgaW1wbCA9IFJ1bnRpbWUgOiAndCBydW50aW1lICogJ3QgLT4gaW1wbFxuXG5sZXQgbWFrZSBydW50aW1lIHQgPSBSdW50aW1lIChydW50aW1lLCB0KVxuXG5tb2R1bGUgUnVudGltZSA9IHN0cnVjdFxuICB0eXBlIHQgPSB7IG11dGFibGUgY29ubmVjdGlvbiA6IGltcGwgfVxuXG4gIGxldCBjcmVhdGUgfnByb3RvY29sIHQnID0geyBjb25uZWN0aW9uID0gUnVudGltZSAocHJvdG9jb2wsIHQnKSB9XG5cbiAgbGV0IHVwZ3JhZGVfcHJvdG9jb2wgdCBwcm90b2NvbCcgPVxuICAgIGxldCB7IGNvbm5lY3Rpb24gPSBSdW50aW1lICgobW9kdWxlIFApLCB0JykgfSA9IHQgaW5cbiAgICB0LmNvbm5lY3Rpb24gPC0gcHJvdG9jb2wnO1xuICAgIFAuc2h1dGRvd24gdCdcblxuICBsZXQgbmV4dF9yZWFkX29wZXJhdGlvbiB7IGNvbm5lY3Rpb24gPSBSdW50aW1lICgobW9kdWxlIFApLCB0KSB9ID1cbiAgICBQLm5leHRfcmVhZF9vcGVyYXRpb24gdFxuXG4gIGxldCByZWFkIHsgY29ubmVjdGlvbiA9IFJ1bnRpbWUgKChtb2R1bGUgUCksIHQpIH0gPSBQLnJlYWQgdFxuICBsZXQgcmVhZF9lb2YgeyBjb25uZWN0aW9uID0gUnVudGltZSAoKG1vZHVsZSBQKSwgdCkgfSA9IFAucmVhZF9lb2YgdFxuICBsZXQgeWllbGRfcmVhZGVyIHsgY29ubmVjdGlvbiA9IFJ1bnRpbWUgKChtb2R1bGUgUCksIHQpIH0gPSBQLnlpZWxkX3JlYWRlciB0XG5cbiAgbGV0IG5leHRfd3JpdGVfb3BlcmF0aW9uIHsgY29ubmVjdGlvbiA9IFJ1bnRpbWUgKChtb2R1bGUgUCksIHQpIH0gPVxuICAgIFAubmV4dF93cml0ZV9vcGVyYXRpb24gdFxuXG4gIGxldCByZXBvcnRfd3JpdGVfcmVzdWx0IHsgY29ubmVjdGlvbiA9IFJ1bnRpbWUgKChtb2R1bGUgUCksIHQpIH0gPVxuICAgIFAucmVwb3J0X3dyaXRlX3Jlc3VsdCB0XG5cbiAgbGV0IHlpZWxkX3dyaXRlciB7IGNvbm5lY3Rpb24gPSBSdW50aW1lICgobW9kdWxlIFApLCB0KSB9ID0gUC55aWVsZF93cml0ZXIgdFxuICBsZXQgcmVwb3J0X2V4biB7IGNvbm5lY3Rpb24gPSBSdW50aW1lICgobW9kdWxlIFApLCB0KSB9ID0gUC5yZXBvcnRfZXhuIHRcbiAgbGV0IHNodXRkb3duIHsgY29ubmVjdGlvbiA9IFJ1bnRpbWUgKChtb2R1bGUgUCksIHQpIH0gPSBQLnNodXRkb3duIHRcbiAgbGV0IGlzX2Nsb3NlZCB7IGNvbm5lY3Rpb24gPSBSdW50aW1lICgobW9kdWxlIFApLCB0KSB9ID0gUC5pc19jbG9zZWQgdFxuZW5kXG5cbm1vZHVsZSBSZXFkID0gc3RydWN0XG4gIHR5cGUgJ3JlcWQgdCA9XG4gICAgeyByZXFkIDogJ3JlcWRcbiAgICA7IHVwZ3JhZGUgOiBpbXBsIC0+IHVuaXRcbiAgICB9XG5cbiAgbGV0IGNyZWF0ZSByZXFkIHVwZ3JhZGUgPSB7IHJlcWQ7IHVwZ3JhZGUgfVxuZW5kXG5cbm1vZHVsZSBDbGllbnQgPSBSdW50aW1lXG5cbm1vZHVsZSBTZXJ2ZXIgPSBzdHJ1Y3RcbiAgaW5jbHVkZSBSdW50aW1lXG5cbiAgdHlwZSAncmVxZCByZXF1ZXN0X2hhbmRsZXIgPSAncmVxZCBSZXFkLnQgLT4gdW5pdFxuXG4gIGxldCBjcmVhdGVfdXBncmFkYWJsZSA6XG4gICAgICB0eXBlIHQnIHJlcWQuXG4gICAgICBwcm90b2NvbDp0JyBydW50aW1lXG4gICAgICAtPiBjcmVhdGU6KChyZXFkIC0+IHVuaXQpIC0+IHQnKVxuICAgICAgLT4gcmVxZCByZXF1ZXN0X2hhbmRsZXJcbiAgICAgIC0+IHRcbiAgICA9XG4gICBmdW4gfnByb3RvY29sIH5jcmVhdGUgcmVxdWVzdF9oYW5kbGVyIC0+XG4gICAgbGV0IHJlYyB0ID1cbiAgICAgIGxhenkgeyBjb25uZWN0aW9uID0gUnVudGltZSAocHJvdG9jb2wsIGNyZWF0ZSByZXF1ZXN0X2hhbmRsZXInKSB9XG4gICAgYW5kIHJlcXVlc3RfaGFuZGxlcicgcmVxZCA9XG4gICAgICBsZXQgcmVxZCcgPSBSZXFkLmNyZWF0ZSByZXFkICh1cGdyYWRlX3Byb3RvY29sIChMYXp5LmZvcmNlIHQpKSBpblxuICAgICAgcmVxdWVzdF9oYW5kbGVyIHJlcWQnXG4gICAgaW5cbiAgICBMYXp5LmZvcmNlIHRcbmVuZFxuXG50eXBlICdyZXFkIHJlcWQgPSAncmVxZCBSZXFkLnQgPSBwcml2YXRlXG4gIHsgcmVxZCA6ICdyZXFkXG4gIDsgdXBncmFkZSA6IGltcGwgLT4gdW5pdFxuICB9XG5cbm1vZHVsZSBCdWZmZXIgPSBzdHJ1Y3RcbiAgdHlwZSB0ID1cbiAgICB7IGJ1ZmZlciA6XG4gICAgICAgIChjaGFyLCBCaWdhcnJheS5pbnQ4X3Vuc2lnbmVkX2VsdCwgQmlnYXJyYXkuY19sYXlvdXQpIEJpZ2FycmF5LkFycmF5MS50XG4gICAgOyBtdXRhYmxlIG9mZiA6IGludFxuICAgIDsgbXV0YWJsZSBsZW4gOiBpbnRcbiAgICA7IGNhcCA6IGludFxuICAgIH1cblxuICBsZXQgY3JlYXRlIHNpemUgPVxuICAgIGxldCBidWZmZXIgPSBCaWdzdHJpbmdhZi5jcmVhdGUgc2l6ZSBpblxuICAgIHsgYnVmZmVyOyBvZmYgPSAwOyBsZW4gPSAwOyBjYXAgPSBzaXplIH1cblxuICBsZXQgY29tcHJlc3MgdCA9XG4gICAgaWYgdC5sZW4gPSAwXG4gICAgdGhlbiAoXG4gICAgICB0Lm9mZiA8LSAwO1xuICAgICAgdC5sZW4gPC0gMClcbiAgICBlbHNlIGlmIHQub2ZmID4gMFxuICAgIHRoZW4gKFxuICAgICAgQmlnc3RyaW5nYWYuYmxpdCB0LmJ1ZmZlciB+c3JjX29mZjp0Lm9mZiB0LmJ1ZmZlciB+ZHN0X29mZjowIH5sZW46dC5sZW47XG4gICAgICB0Lm9mZiA8LSAwKVxuXG4gIGxldCBnZXQgdCB+ZiA9XG4gICAgbGV0IG4gPSBmIHQuYnVmZmVyIH5vZmY6dC5vZmYgfmxlbjp0LmxlbiBpblxuICAgIHQub2ZmIDwtIHQub2ZmICsgbjtcbiAgICB0LmxlbiA8LSB0LmxlbiAtIG47XG4gICAgaWYgdC5sZW4gPSAwIHRoZW4gdC5vZmYgPC0gMDtcbiAgICBuXG5cbiAgbGV0IHB1dCB0IH5mIGsgPVxuICAgIGNvbXByZXNzIHQ7XG4gICAgbGV0IG9mZiA9IHQub2ZmICsgdC5sZW4gaW5cbiAgICBsZXQgbGVuID0gdC5jYXAgLSB0LmxlbiAtIHQub2ZmIGluXG4gICAgZiB0LmJ1ZmZlciB+b2ZmIH5sZW4gKGZ1biBuIC0+XG4gICAgICB0LmxlbiA8LSB0LmxlbiArIG47XG4gICAgICBrIG4pXG5lbmRcbiJdfQ==
